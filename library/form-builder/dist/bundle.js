!function(e){var t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=void 0;const n=i(/*! ./section */4),l=i(/*! ./builder */1),s=i(/*! ./data.json */23);t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container"),e.data?this.json=e.data:this.json=s,e.singleSection?this.singleSection=e.singleSection:this.singleSection=!1,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,this.singleSection?null:e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}build(){if(this.clear(),this.sections.forEach(e=>{if(e.build(this.mainNode),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.mainNode.removeChild(e.node),this.sections=this.sections.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)}}),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});t.innerText="+",t.onclick=t=>{let i=t.target,s=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(s),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(e),s.build(this.mainNode);let o=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+s.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(s.node),this.sections=this.sections.filter((function(e){return e.id!=s.id}))},s.node.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(e)},this.mainNode.appendChild(t)}let e=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});e.innerText="GO TO RUN",e.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(e)}run(){this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.saveBtn=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"submit",id:"form-builder-save-final-btn"}),this.saveBtn.innerText="Save",this.saveBtn.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Please complete the form"))},this.currentNode!=this.sections.length-1||this.singleSection||(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)),this.singleSection&&this.sections[this.currentNode].node.appendChild(this.saveBtn);let e=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){e?this.currentNode>=0&&this.currentNode<this.sections.length-1?(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="inline-block",this.currentNode==this.sections.length-1?(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)):document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block"):alert("You already are on the next slide"):this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),l=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="Default Title",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=l.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});l.Builder.addBuilderInputText(t,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-4"),this.node.appendChild(t),this.blocks.forEach(e=>{e.build(this.node);let t=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",style:"display:block"});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.node.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let i=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});i.innerHTML="+",i.onclick=e=>{let t,i=e.target,s=new n.Block(null);this.blocks.push(s),this.node.removeChild(i),this.callback&&(t=document.getElementById("btn-delete-section-"+this.id),this.node.removeChild(t)),s.build(this.node);let o=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",style:"display:block"});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.node.removeChild(s.node),this.blocks=this.blocks.filter((function(e){return e.id!=s.id}))},s.node.appendChild(o),this.node.appendChild(i),this.callback&&this.node.appendChild(t)},this.node.appendChild(i),e.appendChild(this.node)}run(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");t.innerHTML=this.title;let i=document.createElement("hr");if(this.node.appendChild(t),this.node.appendChild(i),this.blocks.forEach(e=>{e.run(this.node)}),console.log("node.singleSection"),console.log(this.callback),this.callback){let e=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-previous-section-"+this.id,type:"button"});e.innerText="Previous",e.style.display="none",e.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-next-section-"+this.id,type:"button"});t.innerText="Next",t.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Please complete the form")},this.node.appendChild(t)}this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{console.log(t.answer),t&&0==t.answer.length&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),l=i(/*! ./choice */9),s=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),r=i(/*! ./blockRadio */15),d=i(/*! ./blockCheckbox */17),c=i(/*! ./blockLongtext */19),a=i(/*! ./BlockTags */21);var u;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER",e[e.TAGS=7]="TAGS"}(u=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==u.RADIO&&this.type!==u.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new l.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let t=n.Builder.createElement("hr",{class:"pixium-hr col-md-12"});n.Builder.addBuilderInputText(this.node,this.id,this.text,"Text",e=>{this.text=e},"col-md-4");let i=Object.keys(u).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:u[e]}));n.Builder.addBuilderInputDropdown(this.node,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},i,"col-md-4");let s="";this.type!==u.RADIO&&this.type!==u.CHECKBOX&&(s="display:none;");let o=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"row col-md-12",style:s}),r=n.Builder.createElement("label");r.innerHTML="Choices : ",o.appendChild(r),this.choices.length>0&&this.choices.forEach(e=>{e.build(o);let t=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});t.innerText="-",t.onclick=t=>{o.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let d=n.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});d.innerText="+",d.onclick=e=>{let t=e.target,i=new l.Choice(null);this.choices.push(i),o.removeChild(t),i.build(o);let s=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});s.innerText="-",s.onclick=e=>{o.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(s),o.appendChild(t)},o.appendChild(d),this.node.appendChild(o);let c="";this.type!==u.SLIDER&&(c="display:none;");let a=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"row col-md-12",style:c});n.Builder.addBuilderInputText(a,this.id,this.min,"Min",e=>{this.min=e},"col-md-4"),n.Builder.addBuilderInputText(a,this.id,this.max,"Max",e=>{this.max=e},"col-md-4"),n.Builder.addBuilderInputText(a,this.id,this.step,"Step",e=>{this.step=e},"col-md-4"),this.node.appendChild(a),this.node.appendChild(t),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div"),this.node.appendChild(t),this.type){case u.RADIO:r.BlockRadio.run(this.node,this);break;case u.CHECKBOX:d.BlockCheckbox.run(this.node,this);break;case u.FREETEXT:o.BlockFreetext.run(this.node,this);break;case u.LONGTEXT:c.BlockLongtext.run(this.node,this);break;case u.NOANSWER:break;case u.SLIDER:s.BlockSlider.run(this.node,this);break;case u.TAGS:a.BlockTags.run(this.node,this)}let i=n.Builder.createElement("hr",{class:"pixium-hr"});this.node.appendChild(i),e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===u.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===u.RADIO||this.type===u.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var l=t[n];i.setAttribute(n,l)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,l,s,o="col-md-12"){let r=n.createElement("div",{class:"pixium-row-block "+o}),d=n.createElement("label");d.innerHTML=l+": ";let c=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:l+"_"+t,style:"color:Red",placeholder:l});c.onblur=e=>{console.log(e.target),s(e.target.value)},r.appendChild(d),r.appendChild(c),e.appendChild(r)}static addBuilderInputDropdown(e,t,i,l,s,o,r="col-md-12"){let d=n.createElement("div",{class:"pixium-row-block "+r}),c=n.createElement("label");c.innerHTML=l+": ";let a=n.createElement("select",{class:"pixium-dropdown",value:i,name:l+"_"+t,style:"display:block"});a.onchange=e=>{s(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,a.appendChild(t)}),d.appendChild(c),d.appendChild(a),e.appendChild(d)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value,id:"input_"+this.value+"_"+this.id,style:"color:Red;"});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let l=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});l.innerHTML="Label : ";let s=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label,id:"input_"+this.label+"_"+this.id,style:"color:Red;"});s.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(l),this.node.appendChild(s),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("input"),s=n.Builder.createElement("span",{class:"_left"});s.innerHTML=t.min?t.min:"0";let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max?t.max:"100",n.Builder.setAttributes(l,{class:"pixium-slider",type:"range",value:t.answer?t.answer:t.max?Number(t.max)/2:50,min:t.min?t.min:0,max:t.max?t.max:100,id:"inputrange_"+t.id}),t.step&&l.setAttribute("step",t.step),l.onchange=()=>{t.answer=parseFloat(l.value),console.log(t.answer),document.getElementById("output_"+t.id).innerHTML=t.answer};let r=n.Builder.createElement("div");r.setAttribute("class","pixium-block-slider");let d=n.Builder.createElement("output",{id:"output_"+t.id});d.innerHTML=t.answer?t.answer:t.max?Number(t.max)/2:50,t.answer=d.innerHTML,r.appendChild(d),r.appendChild(l),r.appendChild(s),r.appendChild(o),i.appendChild(r),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("input");n.Builder.setAttributes(l,{class:"pixium-textbox",type:"text",value:t.answer,id:"inputfreetext_"+t.id,style:"color:Red"}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"radio",id:"inputradio_"+t.id,value:e.value+""}),s=n.Builder.createElement("label");s.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(l),o.appendChild(s),i.appendChild(o),l.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"checkbox",name:t.id,value:e.value+"",id:e.value+""});for(var s=0;s<t.answer.length;s++)e.value+""===t.answer[s]&&n.Builder.setAttributes(l,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let r=n.Builder.createElement("div");r.appendChild(l),r.appendChild(o),i.appendChild(r),l.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.id+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */20)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("textarea");n.Builder.setAttributes(l,{class:"pixium-textbox",rows:5,value:t.answer,id:"inputlongtext_"+t.id,style:"color:Red"}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!****************************************!*\
  !*** ./src/block/BlockTags.ts-exposed ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./BlockTags.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/BlockTags.ts ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTags=void 0;const n=i(/*! ../builder */1);t.BlockTags=class{static run(e,t){0==t.answer.length&&(t.answer=[]);let i=document.createElement("div");i.setAttribute("class","element-form-container"),i.setAttribute("style","display:flex");let l=document.createElement("div");i.setAttribute("class","tags"),t.answer&&t.answer.forEach(e=>{if(e&&e.length>0){let i=document.createElement("span");i.setAttribute("id","tag-"+t.id+"-"+e),i.innerHTML=e;let s=n.Builder.createElement("button",{class:"btn btn-danger",type:"button"});s.innerText="-",s.onclick=e=>{l.removeChild(i),t.answer=t.answer.filter((function(e){return e+s.outerHTML!=i.innerHTML}))},i.appendChild(s),l.appendChild(i)}});let s=document.createElement("input");n.Builder.setAttributes(s,{style:"color:Red"}),s.addEventListener("keypress",(function(e){if("Enter"===e.key||","===e.key||188==e.keyCode){e.preventDefault();let i=s.value.trim();if(console.log(i),i&&i.length>0){s.value=null,t.answer.push(i);let e=document.createElement("span");e.innerHTML=i;let o=n.Builder.createElement("button",{class:"btn btn-danger",type:"button"});o.innerText="-",o.onclick=i=>{l.removeChild(e),t.answer=t.answer.filter((function(t){return t+o.outerHTML!=e.innerHTML}))},e.appendChild(o),l.appendChild(e)}}})),i.appendChild(l),i.appendChild(s),e.appendChild(i)}}},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":7},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","label":"Delegation"}]},{"title":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL0Jsb2NrVGFncy50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9CbG9ja1RhZ3MudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJwYXJhbXMiLCJzZWN0aW9ucyIsImN1cnJlbnROb2RlIiwiZGl2IiwibWFpbk5vZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJzaW5nbGVTZWN0aW9uIiwiZm9yRWFjaCIsInNlYyIsInNlY3Rpb25Nb2RlbCIsIlNlY3Rpb24iLCJuZXh0U2xpZGUiLCJtb3ZlU2VjdGlvbiIsInB1c2giLCJhbGVydCIsImRlYnVnIiwiYnVpbGQiLCJydW4iLCJjbGVhciIsImRlbEJ0biIsIkJ1aWxkZXIiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJpbm5lckhUTUwiLCJvbmNsaWNrIiwiZXYiLCJyZW1vdmVDaGlsZCIsIm5vZGUiLCJmaWx0ZXIiLCJlbCIsImFwcGVuZENoaWxkIiwiYWRkQnV0dG9uIiwiaW5uZXJUZXh0IiwiYnRuU2VjQWRkIiwidGFyZ2V0Iiwic3dpdGNoQnV0dG9uIiwiYnRuU2VjRGVsIiwic2F2ZUJ0biIsImlzQ29tcGxldGVkIiwiY29tcGlsZUpzb24iLCJwcmV2ZW50RGVmYXVsdCIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsImFmdGVyIiwic2F2ZUJ1dHRvbiIsInNob3ciLCJhcnIiLCJmaW5hbE91dHB1dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoaWRlIiwiX3BhcmVudCIsIl9qc29uIiwiX2NhbGxiYWNrIiwicGFyZW50IiwiYmxvY2tzIiwiY2FsbGJhY2siLCJ0aXRsZSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImIiLCJibG9ja01vZGVsIiwiQmxvY2siLCJub2RlSGVhZGVyIiwiYWRkQnVpbGRlcklucHV0VGV4dCIsInZhbCIsImJsayIsImJ0bkJsa0FkZCIsImJ0bkJsa0RlbCIsIm5hbWVOb2RlIiwiaHJOYW1lIiwicHJldkJ1dHRvbiIsIm5leHRCdXR0b24iLCJhbnN3ZXIiLCJ0eXBlIiwiQmxvY2tUeXBlIiwiTk9BTlNXRVIiLCJ0ZXh0IiwibWluIiwibWF4Iiwic3RlcCIsImNob2ljZXMiLCJSQURJTyIsIkNIRUNLQk9YIiwiY2hvaWNlSnNvbiIsImNob2ljZSIsIkNob2ljZSIsImhyIiwiZW51bUFycmF5Iiwia2V5cyIsImEiLCJtYXRjaCIsIm1hcCIsImFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duIiwiTnVtYmVyIiwidHJpZ2dlclN1YkVsZW1lbnRCbG9jayIsImJsa0Nob2ljZXNTdHlsZSIsIm5vZGVDaG9pY2VzIiwibGFiVGl0bGUiLCJjaCIsImFkZENob2ljZUJ1dHRvbiIsImJ0bkNoQWRkIiwiYnRuQ2hEZWwiLCJibGtTbGlkZXJTdHlsZSIsIlNMSURFUiIsIm5vZGVTbGlkZXIiLCJ0aXRsZU5vZGUiLCJCbG9ja1JhZGlvIiwiQmxvY2tDaGVja2JveCIsIkZSRUVURVhUIiwiQmxvY2tGcmVldGV4dCIsIkxPTkdURVhUIiwiQmxvY2tMb25ndGV4dCIsIkJsb2NrU2xpZGVyIiwiVEFHUyIsIkJsb2NrVGFncyIsInNsaWRlckJsb2NrIiwiY2hvaWNlQmxvY2siLCJfcGFyYW1zIiwiZWxlbSIsImxhYmVsIiwiY2xhc3NlcyIsImxhYiIsImlucHV0Iiwib25ibHVyIiwib3B0aW9ucyIsIm9uY2hhbmdlIiwiZWxlbWVudCIsIm9wdCIsInNldEF0dHJpYnV0ZXMiLCJsYWJWYWx1ZSIsImlucHV0VmFsdWUiLCJsYWJMYWJlbCIsImlucHV0TGFiZWwiLCJibG9jayIsImhvbGRlciIsImZpZWxkIiwicGFyc2VGbG9hdCIsImlucHV0RGl2Iiwib3V0cHV0IiwiZiIsIl9kaXYiLCJjaGVja2VkQm94ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaWRzIiwidGFncyIsInRhZyIsIm91dGVySFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleUNvZGUiLCJ0cmltIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVB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QSxFQUFHVixFQUFPbUksV0FBYUQsRUFBSTlILGNBRXhGOEgsRUFBSXZILFlBQVlYLEdBQ2hCaUksRUFBS3RILFlBQVl1SCxRQVk3QlgsRUFBTzVHLFlBQVlzSCxHQUNuQlYsRUFBTzVHLFlBQVk2RyxHQUNuQmhILEVBQUtHLFlBQVk0RyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi4vZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYnVpbGRlci50c1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnRzXCIpOyIsIlxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuL3NlY3Rpb24nO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tICcuL2J1aWxkZXInO1xuLy8gaW1wb3J0ICogYXMgZGF0YSBmcm9tICcuL2RhdGEuanNvbic7XG4vLyBpbXBvcnQgQ2hhcnQgZnJvbSAnY2hhcnRqcyc7XG4vLyBpbXBvcnQgZm9udGF3ZXNvbWUgZnJvbSAnQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWUnO1xuXG5jb25zdCBkYXRhID0gcmVxdWlyZSgnLi9kYXRhLmpzb24nKTtcbi8vIGNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5leHBvcnQgY2xhc3MgUGl4aXVtRm9ybSB7XG4gICAganNvbjpGb3JtRGF0YTtcbiAgICBkaXY6c3RyaW5nO1xuICAgIHNlY3Rpb25zOlNlY3Rpb25bXTtcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgICBtYWluTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgdGl0bGVOb2RlOiBIVE1MRWxlbWVudDtcbiAgICBjdXJyZW50Tm9kZTogbnVtYmVyO1xuICAgIG1vZGU6c3RyaW5nO1xuICAgIGRlYnVnOmJvb2xlYW47XG4gICAgc2luZ2xlU2VjdGlvbjpib29sZWFuO1xuICAgIHNhdmVCdG46IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IocGFyYW1zOkZvcm1EYXRhKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG5cbiAgICAgICAgaWYoIXBhcmFtc1tcImRpdlwiXSl7XG4gICAgICAgICAgICBhbGVydCgnRGl2IG5vdCBmb3VuZC4gQ2Fubm90IGRpc3BsYXkgdGhlIGZvcm0nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpdiA9IHBhcmFtc1tcImRpdlwiXTtcbiAgICAgICAgdGhpcy5tYWluTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2KTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5tYWluTm9kZSk7XG4gICAgICAgIHRoaXMubWFpbk5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb250YWluZXIgZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgaWYocGFyYW1zW1wiZGF0YVwiXSl7XG4gICAgICAgICAgICB0aGlzLmpzb24gPSBwYXJhbXNbXCJkYXRhXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5qc29uID0gZGF0YTsvL0pTT04ucGFyc2UoIGRhdGEgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgT05MWSBBTExPVyBPTkUgU0VDVElPTiBGT1JNXG4gICAgICAgIGlmKHBhcmFtc1tcInNpbmdsZVNlY3Rpb25cIl0pe1xuICAgICAgICAgICAgdGhpcy5zaW5nbGVTZWN0aW9uID0gcGFyYW1zW1wic2luZ2xlU2VjdGlvblwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VjdGlvbiA9IGZhbHNlO1xuICAgICAgICB9IFxuXG4gICAgICAgIC8vIEJVSUxEIHRoZSBzZWN0aW9uIHN1YiBlbGVtZW50IChubyBnZW5lcmF0ZWQgSFRNTCBhdCB0aGlzIHN0YWdlIHlldClcbiAgICAgICAgaWYodGhpcy5qc29uICYmIHRoaXMuanNvbltcInNlY3Rpb25zXCJdKXtcbiAgICAgICAgICAgIGxldCBzZWNzID0gdGhpcy5qc29uW1wic2VjdGlvbnNcIl07XG4gICAgICAgICAgICBzZWNzLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VjdGlvbk1vZGVsID0gbmV3IFNlY3Rpb24odGhpcy5tYWluTm9kZSwgc2VjLCAoKCF0aGlzLnNpbmdsZVNlY3Rpb24pID8gKG5leHRTbGlkZTpib29sZWFuKSA9PnRoaXMubW92ZVNlY3Rpb24obmV4dFNsaWRlKSA6IG51bGwgKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucy5wdXNoKHNlY3Rpb25Nb2RlbCk7XG4gICAgICAgICAgICB9KTsgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ291bGQgbm90IGluaXQgdGhlIG1vZHVsZS5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmpzb24pO1xuICAgICAgICB9ICAgICAgICAgICAgIFxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgU1RBUlQgVEhFIEFQUExJQ0FUSU9OIElOIGRlYnVnXG4gICAgICAgICBpZihwYXJhbXNbXCJkZWJ1Z1wiXSl7XG4gICAgICAgICAgICB0aGlzLmRlYnVnID0gcGFyYW1zW1wiZGVidWdcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnID0gZmFsc2U7XG4gICAgICAgIH0gICAgICAgXG5cbiAgICAgICAgLy8gIC0tLS0tLS0tLS0tLSAgICBTVEFSVCBUSEUgQVBQTElDQVRJT04gSU4gYnVpbGQgT1IgcnVuIE1PREVcbiAgICAgICAgaWYocGFyYW1zW1wibW9kZVwiXSl7XG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBwYXJhbXNbXCJtb2RlXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gJ3J1bic7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5tb2RlID09PSAnYnVpbGQnKXtcbiAgICAgICAgICAgIHRoaXMuYnVpbGQoKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBFbnRlciBCVUlMRCBNT0RFIGZvciB1c2VyIHRvIGVkaXQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZCgpe1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICBzZWMuYnVpbGQodGhpcy5tYWluTm9kZSk7XG4gICAgICAgICAgICBpZighdGhpcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgU0VDVElPTiBCVE5cbiAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwiaWRcIjpcImJ0bi1kZWxldGUtc2VjdGlvbi1cIitzZWMuaWR9KTtcbiAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgIFxuICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzZWMubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gc2VjLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZWMubm9kZS5hcHBlbmRDaGlsZChkZWxCdG4pO1xuICAgICAgICAgICAgfSAgICAgICBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoIXRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvLyBCVUlMRCBBREQgU0VDVElPTiBCVE5cbiAgICAgICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5pbm5lclRleHQgPSAnKyc7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBsZXQgYnRuU2VjQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgICAgICBsZXQgc2VjID0gbmV3IFNlY3Rpb24odGhpcy5tYWluTm9kZSwgbnVsbCwgKCAobmV4dFNsaWRlOmJvb2xlYW4pID0+dGhpcy5tb3ZlU2VjdGlvbihuZXh0U2xpZGUpICkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWMpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoYnRuU2VjQWRkKTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWMuYnVpbGQodGhpcy5tYWluTm9kZSk7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFNFQ1RJT04gQlROXG4gICAgICAgICAgICAgICAgbGV0IGJ0blNlY0RlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICAgICAgYnRuU2VjRGVsLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPmA7ICBcbiAgICAgICAgICAgICAgICBidG5TZWNEZWwub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc2VjLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IHNlYy5pZDsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2VjLm5vZGUuYXBwZW5kQ2hpbGQoYnRuU2VjRGVsKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoYnRuU2VjQWRkKTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07ICBcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJVSUxEIFRIRSBTV0lUQ0ggVUkgQlVUVE9OIFRPIERPIFRPIFJVTiBNT0RFIElGIERFQlVHLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHN3aXRjaEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tcHJpbWFyeSBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24uaW5uZXJUZXh0ID0gXCJHTyBUTyBSVU5cIjsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIGZvciB1c2VyIHRvIGFuc3dlciB0aGUgcXVlc3Rpb25zXG4gICAgICovXG4gICAgcnVuKCl7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgIHNlYy5ydW4odGhpcy5tYWluTm9kZSk7XG4gICAgICAgIH0pOyBcblxuICAgICAgICAvL0NyZWF0ZSBTYXZlIGJ0blxuICAgICAgICB0aGlzLnNhdmVCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcInN1Ym1pdFwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1maW5hbC1idG5cIn0pOyAgXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5pbm5lclRleHQgPSBcIlNhdmVcIjsgIFxuICAgICAgICB0aGlzLnNhdmVCdG4ub25jbGljayA9IChlKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVKc29uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZm9ybVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsgIFxuICAgICAgICBpZigodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKSAmJiAhdGhpcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgIC8vUmVtb3ZlIE5leHQgYnRuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLmFmdGVyKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgIC8vRGlzcGxheSBzYXZlQnRuXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLm5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zYXZlQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBERUJVRyBTQVZFIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBsZXQgc2F2ZUJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwiaWRcIjpcImZvcm0tYnVpbGRlci1zYXZlLWJ0blwifSk7ICBcbiAgICAgICAgc2F2ZUJ1dHRvbi5pbm5lclRleHQgPSBcIlNBVkVcIjsgIFxuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5jb21waWxlSnNvbigpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQlVJTEQgVEhFIFNXSVRDSCBVSSBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHN3aXRjaEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tcHJpbWFyeSBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24uaW5uZXJUZXh0ID0gXCJHTyBUTyBCVUlMRCBNT0RFXCI7ICAgXG4gICAgICAgIHN3aXRjaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIHRoaXMuYnVpbGQoKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICAgICB0aGlzLm1haW5Ob2RlLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwibGlzdFwiPjwhLS0gU29ydGFibGUgLS0+XG4gICAgICAgIC8vICAgICA8ZGl2IGNsYXNzPVwiaXRlbVwiPiBJdGVtIDFcbiAgICAgICAgLy8gICAgICAgPGRpdiBjbGFzcz1cInN1Ymxpc3RcIj48IS0tIE5lc3RlZCBTb3J0YWJsZTsgV3JhcHBpbmcgY29udGFpbmVyIG5lZWRlZCAtLT5cbiAgICAgICAgLy8gICAgICAgICA8ZGl2IGNsYXNzPVwic3ViaXRlbVwiPlN1Yml0ZW0gMTwvZGl2PlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJpdGVtXCI+U3ViaXRlbSAyPC9kaXY+XG4gICAgICAgIC8vICAgICAgIDwvZGl2PlxuICAgICAgICAvLyAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICA8ZGl2IGNsYXNzPVwiaXRlbVwiPiBJdGVtIDIgPC9kaXY+XG4gICAgICAgIC8vICAgPC9kaXY+YDtcblxuICAgICAgICAvLyBsZXQgdGVtcCA9IHNvcnRhYmxlKHRoaXMubWFpbk5vZGUsIHtcbiAgICAgICAgLy8gICAgIGNvcHk6dHJ1ZSAvLyBkZWZhdWx0IHRvIGZhbHNlXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHRlbXApO1xuXG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgIH1cblxuICAgIHJlc3VsdCgpe1xuICAgICAgICAvLyA8Y2FudmFzIGlkPVwibXlDaGFydFwiIHdpZHRoPVwiNDAwXCIgaGVpZ2h0PVwiNDAwXCI+PC9jYW52YVxuICAgICAgICAvLyBsZXQgY2hhcnRIb2xkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiwge1xuICAgICAgICAvLyAgICAgXCJpZFwiOlwiY2hhcnRkaXZcIixcbiAgICAgICAgLy8gICAgIFwid2lkdGhcIjogNDAwLFxuICAgICAgICAvLyAgICAgXCJoZWlnaHRcIjogNDAwXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIC8vIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuICAgICAgICAvLyA7XG5cbiAgICAgICAgLy8gdmFyIG15TGluZUNoYXJ0ID0gbmV3IENoYXJ0KGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIHtcbiAgICAgICAgLy8gICAgIHR5cGU6ICdsaW5lJyxcbiAgICAgICAgLy8gICAgIGRhdGE6IHtcbiAgICAgICAgLy8gICAgICAgICBkYXRhc2V0czogW3tcbiAgICAgICAgLy8gICAgICAgICAgICAgbGFiZWw6ICdUZXN0IERhdGFzZXQnLFxuICAgICAgICAvLyAgICAgICAgICAgICBkYXRhOiBbe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeDogLTEwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeTogMFxuICAgICAgICAvLyAgICAgICAgICAgICB9LCB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeTogMTBcbiAgICAgICAgLy8gICAgICAgICAgICAgfSwge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeDogMTAsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB5OiA1XG4gICAgICAgIC8vICAgICAgICAgICAgIH1dXG4gICAgICAgIC8vICAgICAgICAgfV1cbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICAvL29wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgLy8gfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBBTEwgdGhlIG5vZGVzXG4gICAgICovXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5tYWluTm9kZSl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmlubmVySFRNTCA9ICcnOyAgLy8gY2xlYXIgYWxsIHRoZSBzdWIgbm9kZXNcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgICAgIHNlYy5jbGVhcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cblxuXG4gICAgZGlzcGxheSgpe1xuICAgICAgICAvLyB0aGlzLm91dHB1dCA9IFwiXCI7XG4gICAgICAgIC8vIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlY3Rpb24pID0+IHtcbiAgICAgICAgLy8gICAgIHRoaXMub3V0cHV0ICs9IHNlY3Rpb24uZGlzcGxheSgpO1xuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdGhpcy5tYWluTm9kZS5pbm5lckhUTUwgPSB0aGlzLm91dHB1dDtcbiAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MCAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6IGFueVtdO1xuICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjOlNlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGFyci5wdXNoKHNlYy5jb21waWxlSnNvbigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KCB7XCJzZWN0aW9uc1wiOmFycn0gKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2ZpbmFsT3V0cHV0Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGZpbmFsT3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIGZpbmFsT3V0cHV0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogTW92ZSB0aGUgc2xpZGVyIG9yIGRpc3BsYXkgdG8gdGhlIG5leHQgc2VjdGlvblxuICAgICAqL1xuICAgIG1vdmVTZWN0aW9uKG5leHRTbGlkZTpib29sZWFuKXtcbiAgICAgICAgLy8gaWYgbW92ZSBmb3J3YXJkXG4gICAgICAgIGlmKG5leHRTbGlkZSl7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSBJIGFtIGFsbG93ZWQgdG8gbW92ZSB0byB0aGUgbmV4dCBzbGlkZSBpZiB0aGVyZSBpcyBvbmVcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTAgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlKys7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLy9EaXNwbGF5IFByZXZpb3VzIGJ0blxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcHJldmlvdXMtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlID09IHRoaXMuc2VjdGlvbnMubGVuZ3RoLTEpe1xuICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5hZnRlcih0aGlzLnNhdmVCdG4pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRGlzcGxheSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgYWxyZWFkeSBhcmUgb24gdGhlIG5leHQgc2xpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgSSBhbSBhbGxvd2VkIHRvIG1vdmUgdG8gdGhlIHByZXZpb3VzIHNsaWRlIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MSAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLS07XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLy9EaXNwbGF5IE5leHQgYnRuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT09MCkge1xuICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSBQcmV2aW91cyBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2aW91cy1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgYWxyZWFkeSBhcmUgb24gdGhlIGZpcnN0IHNsaWRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9zZWN0aW9uLnRzXCIpOyIsImltcG9ydCB7QmxvY2ssIEJsb2NrVHlwZX0gZnJvbSBcIi4vYmxvY2svYmxvY2tcIjtcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4vYnVpbGRlclwiO1xuaW1wb3J0IHsgQmxvY2tGYWN0b3J5IH0gZnJvbSBcIi4vYmxvY2svYmxvY2tGYWN0b3J5XCI7XG5pbXBvcnQgeyBCbG9ja1NsaWRlciB9IGZyb20gXCIuL2Jsb2NrL2Jsb2NrU2xpZGVyXCI7XG5cbi8qKlxuICogU0VDVElPTiBjbGFzcyBjb250YWlucyBhIHBvdGVudGlhbCBsaXN0IG9mIHF1ZXN0aW9uIHRoYXQgaXMgZGlzcGxheWVkIG9uIHRoZSBzYW1lIHBhZ2UgXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWN0aW9ue1xuICAgIGJsb2NrczpCbG9ja1tdOyBcbiAgICB0aXRsZTogc3RyaW5nOyAgIFxuICAgIC8vIG5hbWU6IHN0cmluZztcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAgcGFyZW50OiBIVE1MRWxlbWVudDtcbiAgICBub2RlOiBIVE1MRWxlbWVudDtcbiAgICBjYWxsYmFjazogRnVuY3Rpb247XG5cbiAgICBjb25zdHJ1Y3RvcihfcGFyZW50OkhUTUxFbGVtZW50LCBfanNvbjpGb3JtRGF0YSwgX2NhbGxiYWNrOkZ1bmN0aW9uKXtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLmJsb2NrcyA9IFtdO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gX2NhbGxiYWNrO1xuICAgICAgICB0aGlzLnRpdGxlID0gXCJEZWZhdWx0IFRpdGxlXCI7XG4gICAgICAgIC8vIHRoaXMubmFtZSA9IFwiZGVmYXVsdF9uYW1lXCI7XG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJ0aXRsZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9IF9qc29uW1widGl0bGVcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZihfanNvbltcIm5hbWVcIl0pe1xuICAgICAgICAgICAgLy8gICAgIHRoaXMubmFtZSA9IF9qc29uW1wibmFtZVwiXTtcbiAgICAgICAgICAgIC8vIH1cbiAgICBcbiAgICAgICAgICAgIGlmKF9qc29uW1wiYmxvY2tzXCJdKXtcbiAgICAgICAgICAgICAgICBfanNvbltcImJsb2Nrc1wiXS5mb3JFYWNoKCAoYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tNb2RlbCA9IG5ldyBCbG9jayhiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MucHVzaChibG9ja01vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgLy9ibG9ja01vZGVsLnJ1bih0aGlzLm5vZGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5IHRoZSBmb3JtIGluIEJVSUxERVIgTU9ERSBmb3IgdGhlIHVzZXIgdG8gZWRpdCB0aGUgZm9ybSBpdHNlbGZcbiAgICAgKiBAcGFyYW0gbm9kZSBcbiAgICAgKi9cbiAgICBidWlsZChub2RlKXtcbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJveFwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBzZWN0aW9uIGhlYWRlciBkaXYgd2l0aCB0aXRsZSBhbmQgbmFtZSBpbnB1dFxuICAgICAgICBsZXQgbm9kZUhlYWRlciA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYmxvY2stYnVpbGQgcGl4aXVtLWJsb2NrLWJ1aWxkLWhlYWRlclwifSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlSGVhZGVyLCB0aGlzLmlkLCB0aGlzLnRpdGxlLCBcIlRpdGxlIFNlY3Rpb25cIiwgKHZhbCkgPT4ge3RoaXMudGl0bGU9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobm9kZUhlYWRlcik7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgYmxrLmJ1aWxkKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwic3R5bGVcIjpcImRpc3BsYXk6YmxvY2tcIn0pO1xuICAgICAgICAgICAgZGVsQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7IFxuICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVDaGlsZChibGsubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MgPSB0aGlzLmJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGJsay5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJsay5ub2RlLmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gQlVJTEQgQUREIEJPTENLIEJUTlxuICAgICAgICBsZXQgYWRkQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIGFkZEJ1dHRvbi5pbm5lckhUTUwgPSAnKyc7ICBcbiAgICAgICAgYWRkQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBsZXQgYnRuQmxrQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgIC8vIEFERCBORVcgQk9MQ0tcbiAgICAgICAgICAgIGxldCBibGsgPSBuZXcgQmxvY2sobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsayk7XG4gICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYnRuQmxrQWRkKTtcbiAgICAgICAgICAgIGxldCBidG5TZWNEZWw7XG4gICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICBidG5TZWNEZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bi1kZWxldGUtc2VjdGlvbi1cIit0aGlzLmlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYnRuU2VjRGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsay5idWlsZCh0aGlzLm5vZGUpO1xuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgbGV0IGJ0bkJsa0RlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcInN0eWxlXCI6XCJkaXNwbGF5OmJsb2NrXCJ9KTtcbiAgICAgICAgICAgIGJ0bkJsa0RlbC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG4gICAgICAgICAgICBidG5CbGtEZWwub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUNoaWxkKGJsay5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHRoaXMuYmxvY2tzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gYmxrLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmxrLm5vZGUuYXBwZW5kQ2hpbGQoYnRuQmxrRGVsKTtcblxuICAgICAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGJ0bkJsa0FkZCk7XG4gICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoYnRuU2VjRGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsgIFxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIFJ1biB0aGUgZm9ybSBmb3IgdXNlciB0byBhbnN3ZXJcbiAgICAgKiBAcGFyYW0gbm9kZSBcbiAgICAgKi9cbiAgICBydW4obm9kZSl7XG5cbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJveFwiXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbmFtZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgICAgIG5hbWVOb2RlLmlubmVySFRNTCA9IHRoaXMudGl0bGU7XG4gICAgICAgIGxldCBock5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIik7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChuYW1lTm9kZSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChock5hbWUpO1xuXG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChiKSA9PiB7XG4gICAgICAgICAgICBiLnJ1bih0aGlzLm5vZGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnbm9kZS5zaW5nbGVTZWN0aW9uJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2FsbGJhY2spO1xuICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgIC8vIEJVSUxEIFRIRSBCVVRUT04uIFBSRVZJT1VTIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgbGV0IHByZXZCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLWluZm8gZm9ybS1idWlsZGVyLWJ0blwiLCBcImlkXCI6IFwiYnRuLXByZXZpb3VzLXNlY3Rpb24tXCIrdGhpcy5pZCwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgICAgICBwcmV2QnV0dG9uLmlubmVyVGV4dCA9IFwiUHJldmlvdXNcIjtcbiAgICAgICAgICAgIHByZXZCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsgIFxuICAgICAgICAgICAgcHJldkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRSVUUgRk9SIE5FWFQgU0xJREVcbiAgICAgICAgICAgICAgICAgICAgLy8gRkFMU0UgRk9SIFBSRVYgU0xJREVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFjayhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTsgIFxuICAgICAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKHByZXZCdXR0b24pO1xuXG4gICAgICAgICAgICAvLyBCVUlMRCBUSEUgQlVUVE9OLiBORVhUIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgbGV0IG5leHRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLWluZm8gZm9ybS1idWlsZGVyLWJ0blwiLCBcImlkXCI6IFwiYnRuLW5leHQtc2VjdGlvbi1cIit0aGlzLmlkLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIG5leHRCdXR0b24uaW5uZXJUZXh0ID0gXCJOZXh0XCI7ICBcbiAgICAgICAgICAgIG5leHRCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICAgICAgeyAgIFxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNDb21wbGV0ZWQoKSl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVFJVRSBGT1IgTkVYVCBTTElERVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRkFMU0UgRk9SIFBSRVYgU0xJREVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgY29tcGxldGUgdGhlIGZvcm1cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTsgIFxuICAgICAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5leHRCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm5vZGUpe1xuICAgICAgICAgICAgdGhpcy5ub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGspID0+IHtcbiAgICAgICAgICAgIGJsay5jbGVhcigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXROb2RlKCl7XG4gICAgICAgIGFsZXJ0KHRoaXMubm9kZSk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGlkZSB0aGUgY3VycmVudCBzZWN0aW9uXG4gICAgICovXG4gICAgc2hvdygpe1xuICAgICAgICB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5IHRoZSBjdXJyZW50IHNlY3Rpb24gb24gc2NyZWVuXG4gICAgICovXG4gICAgaGlkZSgpe1xuICAgICAgICB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIEZPUk0gaGFzIGJlZW4gZnVsbHkgY29tcGxldGVkIC0gQWxsIGJsb2NrcyBoYXZlIGEgdmFsaWQgYW5zd2VyXG4gICAgICovXG4gICAgaXNDb21wbGV0ZWQoKXtcbiAgICAgICAgbGV0IGlzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jayk9PntcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsay5hbnN3ZXIpO1xuICAgICAgICAgICAgaWYoYmxrICYmIChibGsuYW5zd2VyLmxlbmd0aD09MCkgJiYgKGJsay50eXBlICE9PSBCbG9ja1R5cGUuTk9BTlNXRVIpKXtcbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGlzQ29tcGxldGVkO1xuICAgIH1cblxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjphbnlbXTtcbiAgICAgICAgYXJyID0gW107XG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGs6QmxvY2spID0+IHtcbiAgICAgICAgICAgIGFyci5wdXNoKGJsay5jb21waWxlSnNvbigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzZWMgPSB7XG4gICAgICAgICAgICBcInRpdGxlXCI6IHRoaXMudGl0bGUsXG4gICAgICAgICAgICBcImJsb2Nrc1wiOmFyclxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWM7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcbmltcG9ydCB7Q2hvaWNlfSBmcm9tIFwiLi9jaG9pY2VcIjtcblxuaW1wb3J0IHtCbG9ja1NsaWRlcn0gZnJvbSBcIi4vYmxvY2tTbGlkZXJcIjtcbmltcG9ydCB7QmxvY2tGcmVldGV4dH0gZnJvbSBcIi4vYmxvY2tGcmVldGV4dFwiO1xuaW1wb3J0IHtCbG9ja1JhZGlvfSBmcm9tIFwiLi9ibG9ja1JhZGlvXCI7XG5pbXBvcnQgeyBCbG9ja0NoZWNrYm94IH0gZnJvbSBcIi4vYmxvY2tDaGVja2JveFwiO1xuaW1wb3J0IHtCbG9ja0xvbmd0ZXh0fSBmcm9tIFwiLi9ibG9ja0xvbmd0ZXh0XCI7XG5pbXBvcnQge0Jsb2NrVGFnc30gZnJvbSBcIi4vQmxvY2tUYWdzXCI7XG4vLyBpbXBvcnQge0Jsb2NrTm9hbnN3ZXJ9IGZyb20gXCIuL2Jsb2NrTm9hbnN3ZXJcIjtcblxuZXhwb3J0IGVudW0gQmxvY2tUeXBlIHtcbiAgICBGUkVFVEVYVCA9IDEsXG4gICAgUkFESU8gPSAyLFxuICAgIFNMSURFUiA9IDMsXG4gICAgQ0hFQ0tCT1ggPSA0LFxuICAgIExPTkdURVhUID0gNSxcbiAgICBOT0FOU1dFUiA9IDYsXG4gICAgVEFHUyA9IDdcbn1cblxuXG4vKipcbiAqIEEgQmxvY2sgaXMgYSBsaXN0IFxuICovXG5leHBvcnQgY2xhc3MgQmxvY2t7XG4gICAgdHlwZTpudW1iZXI7XG4gICAgdGV4dDpzdHJpbmc7XG4gICAgYW5zd2VyOmFueTtcbiAgICBtaW46c3RyaW5nO1xuICAgIG1heDpzdHJpbmc7XG4gICAgc3RlcDpzdHJpbmc7XG4gICAgY2hvaWNlczpDaG9pY2VbXTtcblxuICAgIG91dHB1dDpzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIGpzb246YW55O1xuXG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG5cbiAgICAvKlxuICAgIFwidGl0bGVcIjogXCJERUxFR0FUSU9OOiA8YnI+IDxicj4gSG93IHNraWxsZWQgZG8geW91IGZlZWwgdG9kYXkgYWJvdXQgeW91ciBhYmlsaXR5IHRvIGRlbGVnYXRlP1wiLFxuICAgIFwidHlwZVwiOiA0LFxuICAgIFwiZ3JvdXBcIjogMSxcbiAgICBcImxhYmVsXCI6IFxuICAgICovXG5cbiAgICBjb25zdHJ1Y3RvcihfanNvbjpGb3JtRGF0YSA9IG51bGwpe1xuICAgICAgICB0aGlzLmpzb24gPSBfanNvbjtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5taW4gPSBcIlwiO1xuICAgICAgICB0aGlzLm1heCA9IFwiXCI7XG4gICAgICAgIHRoaXMuc3RlcCA9IFwiXCI7XG4gICAgICAgIHRoaXMuYW5zd2VyID0gXCJcIjtcbiAgICAgICAgdGhpcy5jaG9pY2VzID0gW107XG5cbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcInRleHRcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IF9qc29uW1widGV4dFwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJ0eXBlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBfanNvbltcInR5cGVcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYW5zd2VyID0gXCJcIjtcbiAgICAgICAgICAgIGlmKF9qc29uW1wiYW5zd2VyXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFuc3dlciA9IF9qc29uW1wiYW5zd2VyXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfanNvbltcIm1pblwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5taW4gPSBfanNvbltcIm1pblwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF9qc29uW1wibWF4XCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1heCA9IF9qc29uW1wibWF4XCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX2pzb25bXCJzdGVwXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSBfanNvbltcInN0ZXBcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLlJBRElPIHx8IHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLkNIRUNLQk9YKXtcbiAgICAgICAgICAgICAgICAvLyBsb2FkIGFkZGl0aW9uYWwgZGF0YVxuICAgICAgICAgICAgICAgIGlmKF9qc29uW1wiY2hvaWNlc1wiXSl7XG4gICAgICAgICAgICAgICAgICAgIF9qc29uW1wiY2hvaWNlc1wiXS5mb3JFYWNoKGNob2ljZUpzb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNob2ljZSA9IG5ldyBDaG9pY2UoY2hvaWNlSnNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNob2ljZXMucHVzaChjaG9pY2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy90aGlzLmNob2ljZXMgPSBfanNvbltcImNob2ljZXNcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENsZWFyIGFuZCByZW1vdmUgYWxsIHRoZSBIVE1MIE5vZGVcbiAgICAgKi9cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm5vZGUpe1xuICAgICAgICAgICAgdGhpcy5ub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBidWlsZCB0aGUgZm9ybVxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiIDogXCJyb3cgcGl4aXVtLWJsb2NrLWJ1aWxkXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGhyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaHJcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1ociBjb2wtbWQtMTJcIlxuICAgICAgICB9KTtcblxuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQodGhpcy5ub2RlLCB0aGlzLmlkLCB0aGlzLnRleHQsIFwiVGV4dFwiLCAodmFsKSA9PiB7dGhpcy50ZXh0PXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgbGV0IGVudW1BcnJheSA9IE9iamVjdC5rZXlzKEJsb2NrVHlwZSkuZmlsdGVyKGE9PmEubWF0Y2goL15cXEQvKSkubWFwKG5hbWU9Pih7bmFtZSwgdmFsdWU6IEJsb2NrVHlwZVtuYW1lXSBhcyBudW1iZXJ9KSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0RHJvcGRvd24odGhpcy5ub2RlLCB0aGlzLmlkLCB0aGlzLnR5cGUsIFwiVHlwZVwiLCAodmFsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnR5cGU9TnVtYmVyKHZhbCk7XG4gICAgICAgICAgICB0aGlzLmFuc3dlcj0nJztcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1YkVsZW1lbnRCbG9jaygpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sIGVudW1BcnJheSwgXCJjb2wtbWQtNFwiICk7XG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgQ2hvaWNlcyBibG9ja1xuICAgICAgICBsZXQgYmxrQ2hvaWNlc1N0eWxlID0gXCJcIjtcbiAgICAgICAgaWYoKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlJBRElPKSAmJiAodGhpcy50eXBlICE9PSBCbG9ja1R5cGUuQ0hFQ0tCT1gpKXtcbiAgICAgICAgICAgIGJsa0Nob2ljZXNTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVDaG9pY2VzID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJjaG9pY2VzX2Jsb2NrX1wiK3RoaXMuaWQsXG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicm93IGNvbC1tZC0xMlwiLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBibGtDaG9pY2VzU3R5bGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGxhYlRpdGxlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYlRpdGxlLmlubmVySFRNTCA9IFwiQ2hvaWNlcyA6IFwiO1xuICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChsYWJUaXRsZSk7XG4gICAgICAgIGlmKHRoaXMuY2hvaWNlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5mb3JFYWNoKCAoY2g6Q2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2guYnVpbGQobm9kZUNob2ljZXMpO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChjaC5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzID0gdGhpcy5jaG9pY2VzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gY2guaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNoLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQlVJTEQgQUREIEJPTENLIEJUTlxuICAgICAgICBsZXQgYWRkQ2hvaWNlQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIGFkZENob2ljZUJ1dHRvbi5pbm5lclRleHQgPSAnKyc7ICBcbiAgICAgICAgYWRkQ2hvaWNlQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBsZXQgYnRuQ2hBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgLy8gQUREIE5FVyBCT0xDS1xuICAgICAgICAgICAgbGV0IGNoID0gbmV3IENob2ljZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5wdXNoKGNoKTtcbiAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGJ0bkNoQWRkKTtcbiAgICAgICAgICAgIGNoLmJ1aWxkKG5vZGVDaG9pY2VzKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgIGxldCBidG5DaERlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICBidG5DaERlbC5pbm5lclRleHQgPSAnLSc7ICBcbiAgICAgICAgICAgIGJ0bkNoRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGNoLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMuY2hvaWNlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGNoLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2gubm9kZS5hcHBlbmRDaGlsZChidG5DaERlbCk7XG5cbiAgICAgICAgICAgIG5vZGVDaG9pY2VzLmFwcGVuZENoaWxkKGJ0bkNoQWRkKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChhZGRDaG9pY2VCdXR0b24pO1xuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgIC8vIC0tLS0gXG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgU2xpZGVyIGJsb2NrXG4gICAgICAgIGxldCBibGtTbGlkZXJTdHlsZSA9IFwiXCI7XG4gICAgICAgIGlmKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlNMSURFUil7XG4gICAgICAgICAgICBibGtTbGlkZXJTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVTbGlkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBjb2wtbWQtMTJcIixcbiAgICAgICAgICAgIFwic3R5bGVcIjogYmxrU2xpZGVyU3R5bGVcbiAgICAgICAgfSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLm1pbiwgXCJNaW5cIiwgKHZhbCkgPT4ge3RoaXMubWluPXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMubWF4LCBcIk1heFwiLCAodmFsKSA9PiB7dGhpcy5tYXg9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5zdGVwLCBcIlN0ZXBcIiwgKHZhbCkgPT4ge3RoaXMuc3RlcD12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChub2RlU2xpZGVyKTtcbiAgICAgICAgLy8gLS0tLVxuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChocik7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gUnVuIHRoZSBmb3JtXG4gICAgICovXG4gICAgcnVuKG5vZGUpe1xuICAgICAgICAvLyBhbGVydChcIkNcIik7XG4gICAgICAgIGxldCB0aXRsZU5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJwXCIpOyAvL2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0aXRsZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50ZXh0O1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aXRsZU5vZGUpO1xuXG4gICAgICAgIHN3aXRjaCh0aGlzLnR5cGUpe1xuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuUkFESU86XG4gICAgICAgICAgICAgICAgQmxvY2tSYWRpby5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuQ0hFQ0tCT1g6XG4gICAgICAgICAgICAgICAgQmxvY2tDaGVja2JveC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuRlJFRVRFWFQ6XG4gICAgICAgICAgICAgICAgQmxvY2tGcmVldGV4dC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkxPTkdURVhUOlxuICAgICAgICAgICAgICAgIEJsb2NrTG9uZ3RleHQucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLk5PQU5TV0VSOlxuICAgICAgICAgICAgICAgIC8vIEJsb2NrTm9hbnN3ZXIucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLlNMSURFUjpcbiAgICAgICAgICAgICAgICBCbG9ja1NsaWRlci5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuVEFHUzpcbiAgICAgICAgICAgICAgICBCbG9ja1RhZ3MucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCBociA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImhyXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0taHJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCl7XG4gICAgfVxuXG5cblxuICAgIHRyaWdnZXJTdWJFbGVtZW50QmxvY2soKXtcbiAgICAgICAgbGV0IHNsaWRlckJsb2NrID0gbnVsbDtcbiAgICAgICAgaWYoc2xpZGVyQmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5TTElERVIpe1xuICAgICAgICAgICAgICAgIHNsaWRlckJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbGlkZXJCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIFNpbGRlciBub3QgZm91bmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2hvaWNlQmxvY2sgPSBudWxsO1xuICAgICAgICBpZihjaG9pY2VCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZigodGhpcy50eXBlID09PSBCbG9ja1R5cGUuUkFESU8pIHx8ICh0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCkpe1xuICAgICAgICAgICAgICAgIGNob2ljZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjaG9pY2VCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIENob2ljZSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6YW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCggKGNoOkNob2ljZSkgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goY2guY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmpzb24gPSB7XG4gICAgICAgICAgICBcInR5cGVcIjp0aGlzLnR5cGUsXG4gICAgICAgICAgICBcInRleHRcIjp0aGlzLnRleHQsXG4gICAgICAgICAgICBcImFuc3dlclwiOnRoaXMuYW5zd2VyLFxuICAgICAgICAgICAgXCJtaW5cIjp0aGlzLm1pbixcbiAgICAgICAgICAgIFwibWF4XCI6dGhpcy5tYXgsXG4gICAgICAgICAgICBcInN0ZXBcIjp0aGlzLnN0ZXAsXG4gICAgICAgICAgICBcImNob2ljZXNcIjogYXJyXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbjtcbiAgICB9XG59IiwiXG5leHBvcnQgY2xhc3MgQnVpbGRlcntcblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGFuZCBzZXQgYWxsIHRoZSBhdHRyaWJ1dGUgb2YgYSBIVE1MIEVsZW1lbnQgbm9kZVxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBpbnB1dCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gX3BhcmFtcyBUaGUgYXR0cmlidXRlcyBsaXN0IHRvIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVFbGVtZW50KHR5cGU6c3RyaW5nLCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZighdHlwZSl7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBidWlsZCB0aGUgZWxlbWVudFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgaWYoX3BhcmFtcyl7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3BhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9wYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB3aWxsIHNldCBhbGwgYXR0cmlidXRlIGludG8gYSBzcGVjaWZpYyBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW0gRWxlbWVudCB0byBzZXQgdGUgYXR0cmlidXRlIG9mXG4gICAgICogQHBhcmFtIF9wYXJhbXMgVGhlIGF0dHJpYnV0ZXMgbGlzdCB0byBzZXRcbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0QXR0cmlidXRlcyhlbGVtOkhUTUxFbGVtZW50LCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZihfcGFyYW1zKXtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3BhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0VGV4dChub2RlLCBpZCwgdmFsdWUsIGxhYmVsLCBjYWxsYmFjaywgY2xhc3Nlcz1cImNvbC1tZC0xMlwiKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBcIitjbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFiID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYi5pbm5lckhUTUwgPSBsYWJlbCtcIjogXCI7XG4gICAgICAgIGxldCBpbnB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJjb2xvcjpSZWRcIixcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogbGFiZWxcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlKTtcbiAgICAgICAgfTsgXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChsYWIpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxuXG4gICAgLypcbjxzZWxlY3QgbmFtZT1cImNhcnNcIiBpZD1cImNhcnNcIj5cbiAgPG9wdGlvbiB2YWx1ZT1cInZvbHZvXCI+Vm9sdm88L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cInNhYWJcIj5TYWFiPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJtZXJjZWRlc1wiPk1lcmNlZGVzPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJhdWRpXCI+QXVkaTwvb3B0aW9uPlxuPC9zZWxlY3Q+XG4gICAgKi9cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0RHJvcGRvd24obm9kZSwgaWQsIHZhbHVlLCBsYWJlbCwgY2FsbGJhY2ssIG9wdGlvbnMsIGNsYXNzZXM9XCJjb2wtbWQtMTJcIil7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgXCIrY2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhYiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWIuaW5uZXJIVE1MID0gbGFiZWwrXCI6IFwiO1xuICAgICAgICBsZXQgaW5wdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1kcm9wZG93blwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJkaXNwbGF5OmJsb2NrXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uY2hhbmdlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjaygoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZSk7XG4gICAgICAgIH07IFxuXG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGxldCBvcHQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiwge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZWxlbWVudC52YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYodmFsdWU9PT1lbGVtZW50LnZhbHVlKXtcbiAgICAgICAgICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMob3B0LCB7XG4gICAgICAgICAgICAgICAgICAgIFwic2VsZWN0ZWRcIjpcInNlbGVjdGVkXCJcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0LmlubmVySFRNTCA9IGVsZW1lbnQubmFtZTtcbiAgICAgICAgICAgIGlucHV0LmFwcGVuZENoaWxkKG9wdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChsYWIpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Nob2ljZS50c1wiKTsiLCJcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIENob2ljZXtcbiAgICBsYWJlbDpzdHJpbmc7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAganNvbjphbnk7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihfanNvbil7XG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJsYWJlbFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbCA9IF9qc29uW1wibGFiZWxcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widmFsdWVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBfanNvbltcInZhbHVlXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBidWlsZCB0aGUgZm9ybVxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgYmxvY2stY2hvaWNlcyBjb2wtbWQtMTJcIixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ1JFQVRFIFZBTFVFIElOUFVUXG4gICAgICAgIGxldCBsYWJWYWx1ZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcImZvclwiOlwiaW5wdXRfXCIrdGhpcy52YWx1ZStcIl9cIit0aGlzLmlkfSk7XG4gICAgICAgIGxhYlZhbHVlLmlubmVySFRNTCA9IFwiVmFsdWUgOiBcIjtcbiAgICAgICAgbGV0IGlucHV0VmFsdWUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogdGhpcy52YWx1ZSxcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dF9cIit0aGlzLnZhbHVlK1wiX1wiK3RoaXMuaWQsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiY29sb3I6UmVkO1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dFZhbHVlLm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWU9KDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgIH07IFxuXG4gICAgICAgIC8vIENSRUFURSBMQUJFTCBJTlBVVFxuICAgICAgICBsZXQgbGFiTGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XCJmb3JcIjpcImlucHV0X1wiK3RoaXMubGFiZWwrXCJfXCIrdGhpcy5pZCwgXCJzdHlsZVwiOlwibWluLXdpZHRoOiBhdXRvO1wifSk7XG4gICAgICAgIGxhYkxhYmVsLmlubmVySFRNTCA9IFwiTGFiZWwgOiBcIjtcbiAgICAgICAgbGV0IGlucHV0TGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIFwiaWRcIjpcImlucHV0X1wiK3RoaXMubGFiZWwrXCJfXCIrdGhpcy5pZCxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJjb2xvcjpSZWQ7XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0TGFiZWwub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5sYWJlbD0oPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGxhYlZhbHVlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGlucHV0VmFsdWUpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobGFiTGFiZWwpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbCk7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIHRoaXMuanNvbiA9IHtcbiAgICAgICAgICAgIFwibGFiZWxcIjp0aGlzLmxhYmVsLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOnRoaXMudmFsdWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5qc29uO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja1NsaWRlci50c1wiKTsiLCJpbXBvcnQge0Jsb2NrfSBmcm9tIFwiLi9ibG9ja1wiO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tTbGlkZXJ7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrOkJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgICBsZXQgbWluID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6XCJfbGVmdFwiXG4gICAgICAgIH0pO1xuICAgICAgICBtaW4uaW5uZXJIVE1MID0gKGJsb2NrLm1pbikgPyBibG9jay5taW4gOiAnMCc7XG4gICAgICAgIGxldCBtYXggPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjpcIl9yaWdodFwiXG4gICAgICAgIH0pOztcbiAgICAgICAgbWF4LmlubmVySFRNTCA9IChibG9jay5tYXgpID8gYmxvY2subWF4IDogJzEwMCc7XG5cbiAgICAgICAgLy8gPG91dHB1dCBmb3I9XCJmb29cIiBvbmZvcm1pbnB1dD1cInZhbHVlID0gZm9vLnZhbHVlQXNOdW1iZXI7XCI+PC9vdXRwdXQ+XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYmxvY2suYW5zd2VyJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1zbGlkZXJcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInJhbmdlXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IChibG9jay5hbnN3ZXIpID8gYmxvY2suYW5zd2VyIDogKChibG9jay5tYXgpID8gKE51bWJlcihibG9jay5tYXgpLzIpIDogNTApLFxuICAgICAgICAgICAgXCJtaW5cIjogKGJsb2NrLm1pbikgPyBibG9jay5taW4gOiAwLFxuICAgICAgICAgICAgXCJtYXhcIjogKGJsb2NrLm1heCkgPyBibG9jay5tYXggOiAxMDAsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRyYW5nZV9cIitibG9jay5pZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYoYmxvY2suc3RlcCl7XG4gICAgICAgICAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIGJsb2NrLnN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIGZpZWxkLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm91dHB1dF9cIitibG9jay5pZCkuaW5uZXJIVE1MID0gYmxvY2suYW5zd2VyO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlucHV0RGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpbnB1dERpdi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBpeGl1bS1ibG9jay1zbGlkZXJcIik7XG4gICAgICAgIGxldCBvdXRwdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJvdXRwdXRcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcIm91dHB1dF9cIitibG9jay5pZFxuICAgICAgICB9KTtcbiAgICAgICAgb3V0cHV0LmlubmVySFRNTCA9IChibG9jay5hbnN3ZXIpID8gYmxvY2suYW5zd2VyIDogKChibG9jay5tYXgpID8gKE51bWJlcihibG9jay5tYXgpLzIpIDogNTApO1xuICAgICAgICBibG9jay5hbnN3ZXIgPSBvdXRwdXQuaW5uZXJIVE1MO1xuICAgICAgICBcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQob3V0cHV0KTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoZmllbGQpO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtaW4pO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtYXgpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGlucHV0RGl2KTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrRnJlZXRleHQudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tGcmVldGV4dHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dGZyZWV0ZXh0X1wiK2Jsb2NrLmlkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZFwiXG4gICAgICAgIH0pOyBcbiAgICAgICAgZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIH07IFxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoZmllbGQpOyBcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja1JhZGlvLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrUmFkaW8ge1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGJsb2NrLmNob2ljZXMuZm9yRWFjaCggKGNob2ljZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGYgID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0cmFkaW9fXCIrYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNob2ljZS5sYWJlbDtcblxuICAgICAgICAgICAgbGV0IF9kaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoX2Rpdik7XG5cbiAgICAgICAgICAgIGYub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja0NoZWNrYm94LnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrQ2hlY2tib3gge1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGJsb2NrLmNob2ljZXMuZm9yRWFjaCggKGNob2ljZSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgZiAgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiY2hlY2tib3hcIixcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogIGJsb2NrLmlkLFxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogIGNob2ljZS52YWx1ZStcIlwiLFxuICAgICAgICAgICAgICAgIFwiaWRcIjogIGNob2ljZS52YWx1ZStcIlwiLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vUHJlc2VsZWN0IGFuc3dlcnMgaWYgc2V0XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJsb2NrLmFuc3dlci5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoKGNob2ljZS52YWx1ZStcIlwiKT09PWJsb2NrLmFuc3dlcltpXSl7XG4gICAgICAgICAgICAgICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrZWRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgbGV0IGxhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBjaG9pY2UubGFiZWw7XG5cbiAgICAgICAgICAgIGxldCBfZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChmKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKF9kaXYpO1xuXG4gICAgICAgICAgICBmLm9uY2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tlZEJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1jaGVja2JveF1bbmFtZT1cIicrYmxvY2suaWQrJ1wiXTpjaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgbGV0IGlkcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNoZWNrZWRCb3hlcy5mb3JFYWNoKCAoZWxlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZHMucHVzaCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZWxlbSkudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGlkcztcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja0xvbmd0ZXh0LnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrTG9uZ3RleHR7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuICAgICAgICBsZXQgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJyb3dzXCI6IDUsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dGxvbmd0ZXh0X1wiK2Jsb2NrLmlkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZFwiXG4gICAgICAgIH0pOyBcbiAgICAgICAgLy8gZmllbGQuaW5uZXJIVE1MID0gYmxvY2suYW5zd2VyO1xuICAgICAgICBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxUZXh0QXJlYUVsZW1lbnQ+ZmllbGQpLnZhbHVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgfTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL0Jsb2NrVGFncy50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1RhZ3Mge1xuICAgIC8vIDxkaXYgaWQ9XCJob2xkZXJcIj5cbiAgICAvLyAgICAgPGRpdiBpZD1cInRhZ3NcIj5cbiAgICAvLyAgICAgICAgICA8c3Bhbj5cbiAgICAvLyAgICAgICAgICAgICAgdmFsdWVcbiAgICAvLyAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCI+LTwvYnV0dG9uPlxuICAgIC8vICAgICAgICAgIDwvc3Bhbj5cbiAgICAvLyAgICAgPC9kaXY+XG4gICAgLy8gICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiXCIgLz5cbiAgICAvLyA8L2Rpdj5cbiAgICBcbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgLy8gcGFyc2UgYmxvY2suYW5zd2VyIGZvciBhcnJheSB0byBzdHJpbmdzIFxuICAgICAgICBpZihibG9jay5hbnN3ZXIubGVuZ3RoPT0wKXtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6ZmxleFwiKTtcblxuICAgICAgICAvLyBkaXYgYW5zd2VyXG4gICAgICAgIGxldCB0YWdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGFnc1wiKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcblxuICAgICAgICBpZihibG9jay5hbnN3ZXIpe1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICB0YWcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YWctXCIrYmxvY2suaWQrXCItXCIrdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0YWcuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBUQUdcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXJcIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MucmVtb3ZlQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGJsb2NrLmFuc3dlci5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsK2RlbEJ0bi5vdXRlckhUTUwgIT0gdGFnLmlubmVySFRNTDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZGVsQnRuKTsgXG4gICAgICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIC8vIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZFwiXG4gICAgICAgIH0pOyBcblxuICAgICAgICBmaWVsZC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIFwiRW50ZXJcIiBrZXkgb24gdGhlIGtleWJvYXJkXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInIHx8IGV2ZW50LmtleSA9PT0gJywnIHx8IGV2ZW50LmtleUNvZGUgPT0gMTg4KSB7IC8vIHx8IGV2ZW50LmtleSA9PT0gJyAnIHx8IGV2ZW50LmNvZGUgPT09ICdTcGFjZScgfHwgZXZlbnQua2V5ID09PSAnU3BhY2ViYXInXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYodmFsdWUgJiYgdmFsdWUubGVuZ3RoPjApe1xuICAgICAgICAgICAgICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgdG8gYW5zd2VyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgdG8gZGlzcGxheVxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRhZy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFRBR1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlclwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lclRleHQgPSAnLSc7ICBcbiAgICAgICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5yZW1vdmVDaGlsZCh0YWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gYmxvY2suYW5zd2VyLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwrZGVsQnRuLm91dGVySFRNTCAhPSB0YWcuaW5uZXJIVE1MOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZy5hcHBlbmRDaGlsZChkZWxCdG4pOyBcbiAgICAgICAgICAgICAgICAgICAgdGFncy5hcHBlbmRDaGlsZCh0YWcpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFkZCBvbmJsdXIgc2F2ZVxuICAgICAgICAvLyBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgIC8vICAgICBibG9jay5hbnN3ZXIucHVzaCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlKTtcbiAgICAgICAgLy8gICAgICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUgPSBudWxsO1xuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgLy8gfTsgXG5cbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKHRhZ3MpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==