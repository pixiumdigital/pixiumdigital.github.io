!function(e){var t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=void 0;const n=i(/*! ./section */4),l=i(/*! ./builder */1),s=i(/*! ./data.json */23);function o(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]==t)return!0;return!1}function r(e,t){for(var i=document.querySelectorAll(t),n=e.parentNode;n&&!o(i,n);)n=n.parentNode;return n}t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container drop-targets"),e.data?this.json=e.data:this.json=s,e.singleSection?this.singleSection=e.singleSection:this.singleSection=!1,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,this.singleSection?null:e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}getIndexFromSectionId(e){for(let t=0;t<this.sections.length;t++)if(this.sections[t].id==e)return t;return null}swapSections(e,t){console.log(this.sections);let i=this.sections[e];this.sections[e]=this.sections[t],this.sections[t]=i,console.log(this.sections)}dragStart(e){e.dataTransfer.setData("text/plain",e.target.id),setTimeout(()=>{r(e.target,".drop-target")||alert("not found")},0)}dragEnter(e){e.preventDefault();let t=r(e.target,".drop-target");t&&t.classList.add("drag-over")}dragOver(e){e.preventDefault();let t=r(e.target,".drop-target");t&&t.classList.add("drag-over")}dragLeave(e){let t=r(e.target,".drop-target");t&&t.classList.remove("drag-over")}drop(e){e.target.classList.remove("drag-over");const t=e.dataTransfer.getData("text/plain");let i=document.getElementById(t),n=r(e.target,".drop-target");if(n.classList.remove("drag-over"),i.classList.remove("drag-over"),n){let e=this.getIndexFromSectionId(n.children[0].id),t=this.getIndexFromSectionId(i.id);e!=t&&(this.swapSections(e,t),l=n.children[0],s=i,o=l.parentNode,d=s.parentNode,a=document.createElement("div"),c=document.createElement("div"),o.replaceChild(a,l),d.replaceChild(c,s),o.replaceChild(s,a),d.replaceChild(l,c))}else alert("not parent found");var l,s,o,d,a,c}build(){if(this.clear(),this.sections.forEach(e=>{if(e.build(this.mainNode),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.mainNode.removeChild(e.contentWrapper),this.sections=this.sections.filter((function(t){return t.id!=e.id}))},e.contentWrapper.appendChild(t)}e.contentWrapper.ondragstart=e=>{this.dragStart(e)}}),document.querySelectorAll(".pixium-box").forEach(e=>{e.addEventListener("dragenter",this.dragEnter),e.addEventListener("dragover",this.dragOver),e.addEventListener("dragleave",this.dragLeave),e.addEventListener("drop",e=>this.drop(e))}),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});t.innerText="+",t.onclick=t=>{let i=t.target,s=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(s),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(e),s.build(this.mainNode);let o=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+s.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(s.node),this.sections=this.sections.filter((function(e){return e.id!=s.id}))},s.contentWrapper.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(e)},this.mainNode.appendChild(t)}let e=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});e.innerText="GO TO RUN",e.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(e)}run(){this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.saveBtn=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"submit",id:"form-builder-save-final-btn"}),this.saveBtn.innerText="Save",this.saveBtn.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Please complete the form"))},this.currentNode!=this.sections.length-1||this.singleSection||(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)),this.singleSection&&this.sections[this.currentNode].node.appendChild(this.saveBtn);let e=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){e?this.currentNode>=0&&this.currentNode<this.sections.length-1?(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="inline-block",this.currentNode==this.sections.length-1?(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)):document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block"):alert("You already are on the next slide"):this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),l=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e){this.contentWrapper=l.Builder.createElement("div",{class:"pixium-box-content",draggable:!0,id:this.id}),this.node=l.Builder.createElement("div",{class:"row pixium-box drop-target",id:"holder-"+this.id});let t=l.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});l.Builder.addBuilderInputText(t,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-4"),this.contentWrapper.appendChild(t),this.blocks.forEach(e=>{let t=l.Builder.createElement("button",{class:"form-builder-btn button-delete",type:"button",style:"display:block"});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',e.build(this.contentWrapper,t),t.onclick=t=>{this.contentWrapper.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))}});let i=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});i.innerHTML="+",i.onclick=e=>{let t,i=e.target,s=new n.Block(null);this.blocks.push(s),this.contentWrapper.removeChild(i),this.callback&&(t=document.getElementById("btn-delete-section-"+this.id),this.contentWrapper.removeChild(t)),s.build(this.contentWrapper,!1,"");let o=l.Builder.createElement("button",{class:"form-builder-btn button-delete float-right",type:"button",style:"display:block"});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.contentWrapper.removeChild(s.node),this.blocks=this.blocks.filter((function(e){return e.id!=s.id}))},s.header.insertBefore(o,s.header.firstChild),this.contentWrapper.appendChild(i),this.callback&&this.contentWrapper.appendChild(t)},this.contentWrapper.appendChild(i),this.node.appendChild(this.contentWrapper),e.appendChild(this.node)}run(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");t.innerHTML=this.title;let i=document.createElement("hr");if(this.node.appendChild(t),this.node.appendChild(i),this.blocks.forEach(e=>{e.run(this.node)}),console.log("node.singleSection"),console.log(this.callback),this.callback){let e=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-previous-section-"+this.id,type:"button"});e.innerText="Previous",e.style.display="none",e.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-next-section-"+this.id,type:"button"});t.innerText="Next",t.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Please complete the form...")},this.node.appendChild(t)}this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{console.log(t.answer),t&&0==t.answer.length&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),l=i(/*! ./choice */9),s=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),r=i(/*! ./blockRadio */15),d=i(/*! ./blockCheckbox */17),a=i(/*! ./blockLongtext */19),c=i(/*! ./BlockTags */21);var u;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER",e[e.TAGS=7]="TAGS"}(u=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==u.RADIO&&this.type!==u.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new l.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e,t=null,i="collapse"){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let s=n.Builder.createElement("div",{class:"col-md-12 "+i});this.header=n.Builder.addBoxHeader(this.node,this.id,s,t),n.Builder.addBuilderInputText(this.header,this.id,this.text,"Text",e=>{this.text=e},"col-md-6"),this.node.appendChild(s);let o=Object.keys(u).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:u[e]}));n.Builder.addBuilderInputDropdown(s,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},o,"col-md-4");let r="";this.type!==u.RADIO&&this.type!==u.CHECKBOX&&(r="display:none;");let d=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"row col-md-12",style:r}),a=n.Builder.createElement("label");a.innerHTML="Choices : ",d.appendChild(a),this.choices.length>0&&this.choices.forEach(e=>{e.build(d);let t=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});t.innerText="-",t.onclick=t=>{d.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let c=n.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});c.innerText="+",c.onclick=e=>{let t=e.target,i=new l.Choice(null);this.choices.push(i),d.removeChild(t),i.build(d);let s=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});s.innerText="-",s.onclick=e=>{d.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(s),d.appendChild(t)},d.appendChild(c),s.appendChild(d);let h="";this.type!==u.SLIDER&&(h="display:none;");let p=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"row col-md-12",style:h});n.Builder.addBuilderInputText(p,this.id,this.min,"Min",e=>{this.min=e},"col-md-4"),n.Builder.addBuilderInputText(p,this.id,this.max,"Max",e=>{this.max=e},"col-md-4"),n.Builder.addBuilderInputText(p,this.id,this.step,"Step",e=>{this.step=e},"col-md-4"),s.appendChild(p),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div"),this.node.appendChild(t),this.type){case u.RADIO:r.BlockRadio.run(this.node,this);break;case u.CHECKBOX:d.BlockCheckbox.run(this.node,this);break;case u.FREETEXT:o.BlockFreetext.run(this.node,this);break;case u.LONGTEXT:a.BlockLongtext.run(this.node,this);break;case u.NOANSWER:break;case u.SLIDER:s.BlockSlider.run(this.node,this);break;case u.TAGS:c.BlockTags.run(this.node,this)}let i=n.Builder.createElement("hr",{class:"pixium-hr"});this.node.appendChild(i),e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===u.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===u.RADIO||this.type===u.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var l=t[n];i.setAttribute(n,l)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,l,s,o="col-md-12"){let r=n.createElement("div",{class:"pixium-row-block "+o}),d=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:l+"_"+t,placeholder:l});d.onblur=e=>{console.log(e.target),s(e.target.value)},r.appendChild(d),e.appendChild(r)}static addBoxHeader(e,t,i,l){let s=n.createElement("div",{class:"col-md-12 block-header block-header-"+t});l&&(l.className+=" float-right",s.appendChild(l));let o=n.createElement("i",{class:"fa fa-eye float-right","aria-hidden":"true"});s.appendChild(o);let r=n.createElement("i",{class:"fa fa-eye-slash float-right hidden","aria-hidden":"true"});return s.appendChild(r),o.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},r.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},e.appendChild(s),s}static addBuilderInputDropdown(e,t,i,l,s,o,r="col-md-12"){let d=n.createElement("div",{class:"pixium-row-block "+r}),a=n.createElement("label");a.innerHTML=l+": ";let c=n.createElement("select",{class:"pixium-dropdown",value:i,name:l+"_"+t,style:"display:block"});c.onchange=e=>{s(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,c.appendChild(t)}),d.appendChild(a),d.appendChild(c),e.appendChild(d)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value?this.value:"",placeholder:"Value",id:"input_"+this.value+"_"+this.id});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let l=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});l.innerHTML="Label : ";let s=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label?this.label:"",placeholder:"Label",id:"input_"+this.label+"_"+this.id});s.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(l),this.node.appendChild(s),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=n.Builder.createElement("input"),s=n.Builder.createElement("span",{class:"_left"});s.innerHTML=t.min?t.min:"0";let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max?t.max:"100";let r=t.answer?t.answer:t.max&&t.min?Math.round((Number(t.max)+Number(t.min))/2):50;n.Builder.setAttributes(l,{class:"pixium-slider",type:"range",value:r,min:t.min?t.min:0,max:t.max?t.max:100,id:"inputrange_"+t.id}),t.step&&l.setAttribute("step",t.step),l.onchange=()=>{t.answer=parseFloat(l.value),console.log(t.answer),document.getElementById("output_"+t.id).innerHTML=t.answer};let d=n.Builder.createElement("div");d.setAttribute("class","pixium-block-slider");let a=n.Builder.createElement("output",{id:"output_"+t.id});a.innerHTML=r,t.answer=a.innerHTML,d.appendChild(a),d.appendChild(l),d.appendChild(s),d.appendChild(o),i.appendChild(d),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=n.Builder.createElement("input");n.Builder.setAttributes(l,{class:"pixium-textbox",type:"text",value:t.answer,id:"inputfreetext_"+t.id}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"radio",id:"inputradio_"+t.id,value:e.value+""}),s=n.Builder.createElement("label");s.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(l),o.appendChild(s),i.appendChild(o),l.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"checkbox",name:t.id,value:e.value+"",id:e.value+""});for(var s=0;s<t.answer.length;s++)e.value+""===t.answer[s]&&n.Builder.setAttributes(l,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let r=n.Builder.createElement("div");r.appendChild(l),r.appendChild(o),i.appendChild(r),l.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.id+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */20)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("textarea");n.Builder.setAttributes(l,{class:"pixium-textbox",rows:5,value:t.answer,id:"inputlongtext_"+t.id}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!****************************************!*\
  !*** ./src/block/BlockTags.ts-exposed ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./BlockTags.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/BlockTags.ts ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTags=void 0;const n=i(/*! ../builder */1);class l{static run(e,t){0==t.answer.length&&(t.answer=[]);let i=document.createElement("div");i.setAttribute("class","element-form-container"),i.setAttribute("style","display:flex");let s=document.createElement("div");i.setAttribute("class","tags"),t.answer&&t.answer.forEach(e=>{if(e&&e.length>0){let i=document.createElement("span");i.setAttribute("id","tag-"+t.id+"-"+e),i.innerHTML=e;let l=n.Builder.createElement("button",{class:"btn btn-danger",type:"button"});l.innerText="-",l.onclick=e=>{s.removeChild(i),t.answer=t.answer.filter((function(e){return e+l.outerHTML!=i.innerHTML}))},i.appendChild(l),s.appendChild(i)}});let o=n.Builder.createElement("input",{class:"fff"});o.addEventListener("keypress",(function(e){l.processNewKeyword(e,o,t,s)})),o.onblur=()=>{l.processNewKeyword(event,o,t,s,!0)},i.appendChild(s),i.appendChild(o),e.appendChild(i)}static processNewKeyword(e,t,i,l,s=!1){if(s||"Enter"===e.key||","===e.key||188==e.keyCode){e.preventDefault();let s=t.value.trim();if(console.log(s),s&&s.length>0){t.value=null,i.answer.push(s);let e=document.createElement("span");e.innerHTML=s;let o=n.Builder.createElement("button",{class:"btn",type:"button"});o.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>',o.onclick=t=>{l.removeChild(e),i.answer=i.answer.filter((function(t){return t+o.outerHTML!=e.innerHTML}))},e.appendChild(o),l.appendChild(e)}}}}t.BlockTags=l},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":7},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","label":"Delegation"}]},{"title":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL0Jsb2NrVGFncy50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9CbG9ja1RhZ3MudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJjb2xsZWN0aW9uSGFzIiwiYSIsImIiLCJsZW4iLCJsZW5ndGgiLCJmaW5kUGFyZW50QnlTZWxlY3RvciIsImVsbSIsInNlbGVjdG9yIiwiYWxsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VyIiwicGFyZW50Tm9kZSIsInBhcmFtcyIsInNlY3Rpb25zIiwiY3VycmVudE5vZGUiLCJkaXYiLCJtYWluTm9kZSIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJzaW5nbGVTZWN0aW9uIiwiZm9yRWFjaCIsInNlYyIsInNlY3Rpb25Nb2RlbCIsIlNlY3Rpb24iLCJuZXh0U2xpZGUiLCJtb3ZlU2VjdGlvbiIsInB1c2giLCJhbGVydCIsImRlYnVnIiwiYnVpbGQiLCJydW4iLCJfaWQiLCJpZCIsInMxX2lkIiwiczJfaWQiLCJ0ZW1wIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsInRhcmdldCIsInNldFRpbWVvdXQiLCJwcmV2ZW50RGVmYXVsdCIsInRoZV9wYXJlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJnZXREYXRhIiwiZHJhZ2dhYmxlIiwiaWQxIiwiZ2V0SW5kZXhGcm9tU2VjdGlvbklkIiwiY2hpbGRyZW4iLCJpZDIiLCJzd2FwU2VjdGlvbnMiLCJhUGFyZW50IiwiYlBhcmVudCIsImFIb2xkZXIiLCJjcmVhdGVFbGVtZW50IiwiYkhvbGRlciIsInJlcGxhY2VDaGlsZCIsImNsZWFyIiwiZGVsQnRuIiwiQnVpbGRlciIsImlubmVySFRNTCIsIm9uY2xpY2siLCJldiIsInJlbW92ZUNoaWxkIiwiY29udGVudFdyYXBwZXIiLCJmaWx0ZXIiLCJlbCIsImFwcGVuZENoaWxkIiwib25kcmFnc3RhcnQiLCJkcmFnU3RhcnQiLCJib3giLCJhZGRFdmVudExpc3RlbmVyIiwiZHJhZ0VudGVyIiwiZHJhZ092ZXIiLCJkcmFnTGVhdmUiLCJkcm9wIiwiYWRkQnV0dG9uIiwiaW5uZXJUZXh0IiwiYnRuU2VjQWRkIiwic3dpdGNoQnV0dG9uIiwiYnRuU2VjRGVsIiwibm9kZSIsInNhdmVCdG4iLCJpc0NvbXBsZXRlZCIsImNvbXBpbGVKc29uIiwic3R5bGUiLCJkaXNwbGF5IiwiYWZ0ZXIiLCJzYXZlQnV0dG9uIiwic2hvdyIsImFyciIsImZpbmFsT3V0cHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsImhpZGUiLCJfcGFyZW50IiwiX2pzb24iLCJfY2FsbGJhY2siLCJwYXJlbnQiLCJibG9ja3MiLCJjYWxsYmFjayIsInRpdGxlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiYmxvY2tNb2RlbCIsIkJsb2NrIiwibm9kZUhlYWRlciIsImFkZEJ1aWxkZXJJbnB1dFRleHQiLCJ2YWwiLCJibGsiLCJidG5CbGtBZGQiLCJidG5CbGtEZWwiLCJoZWFkZXIiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwibmFtZU5vZGUiLCJock5hbWUiLCJwcmV2QnV0dG9uIiwibmV4dEJ1dHRvbiIsImFuc3dlciIsInR5cGUiLCJCbG9ja1R5cGUiLCJOT0FOU1dFUiIsInRleHQiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY2hvaWNlcyIsIlJBRElPIiwiQ0hFQ0tCT1giLCJjaG9pY2VKc29uIiwiY2hvaWNlIiwiQ2hvaWNlIiwiY2xhc3NlcyIsIm5vZGVDb250ZW50IiwiYWRkQm94SGVhZGVyIiwiZW51bUFycmF5Iiwia2V5cyIsIm1hdGNoIiwibWFwIiwiYWRkQnVpbGRlcklucHV0RHJvcGRvd24iLCJOdW1iZXIiLCJ0cmlnZ2VyU3ViRWxlbWVudEJsb2NrIiwiYmxrQ2hvaWNlc1N0eWxlIiwibm9kZUNob2ljZXMiLCJsYWJUaXRsZSIsImNoIiwiYWRkQ2hvaWNlQnV0dG9uIiwiYnRuQ2hBZGQiLCJidG5DaERlbCIsImJsa1NsaWRlclN0eWxlIiwiU0xJREVSIiwibm9kZVNsaWRlciIsInRpdGxlTm9kZSIsIkJsb2NrUmFkaW8iLCJCbG9ja0NoZWNrYm94IiwiRlJFRVRFWFQiLCJCbG9ja0ZyZWV0ZXh0IiwiTE9OR1RFWFQiLCJCbG9ja0xvbmd0ZXh0IiwiQmxvY2tTbGlkZXIiLCJUQUdTIiwiQmxvY2tUYWdzIiwiaHIiLCJzbGlkZXJCbG9jayIsImNob2ljZUJsb2NrIiwiX3BhcmFtcyIsImVsZW0iLCJsYWJlbCIsImlucHV0Iiwib25ibHVyIiwic3ViRWxlbWVudCIsImNsYXNzTmFtZSIsImV5ZTEiLCJleWUyIiwidG9nZ2xlIiwib3B0aW9ucyIsImxhYiIsIm9uY2hhbmdlIiwiZWxlbWVudCIsIm9wdCIsInNldEF0dHJpYnV0ZXMiLCJsYWJWYWx1ZSIsImlucHV0VmFsdWUiLCJsYWJMYWJlbCIsImlucHV0TGFiZWwiLCJibG9jayIsImhvbGRlciIsImZpZWxkIiwiZGVmYXVsdFZhbHVlIiwicm91bmQiLCJwYXJzZUZsb2F0IiwiaW5wdXREaXYiLCJvdXRwdXQiLCJmIiwiX2RpdiIsImNoZWNrZWRCb3hlcyIsImlkcyIsInRhZ3MiLCJ0YWciLCJvdXRlckhUTUwiLCJldmVudCIsInByb2Nlc3NOZXdLZXl3b3JkIiwiZm9yY2VQcm9jZXNzIiwia2V5Q29kZSIsInRyaW0iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFBT0EsSUFDdEQsRUFBUEUsR0FBNEIsaUJBQVRGLEVBQW1CLElBQUksSUFBSU0sS0FBT04sRUFBT3JCLEVBQW9CVSxFQUFFZSxFQUFJRSxFQUFLLFNBQVNBLEdBQU8sT0FBT04sRUFBTU0sSUFBUUMsS0FBSyxLQUFNRCxJQUM5SSxPQUFPRixHQUlSekIsRUFBb0I2QixFQUFJLFNBQVMxQixHQUNoQyxJQUFJUyxFQUFTVCxHQUFVQSxFQUFPcUIsV0FDN0IsV0FBd0IsT0FBT3JCLEVBQWdCLFNBQy9DLFdBQThCLE9BQU9BLEdBRXRDLE9BREFILEVBQW9CVSxFQUFFRSxFQUFRLElBQUtBLEdBQzVCQSxHQUlSWixFQUFvQmEsRUFBSSxTQUFTaUIsRUFBUUMsR0FBWSxPQUFPakIsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdUIsRUFBUUMsSUFHekcvQixFQUFvQmtDLEVBQUksVUFJakJsQyxFQUFvQkEsRUFBb0JtQyxFQUFJLEc7Ozs7OztvRkNsRnJELElBQUlDLEVBR0pBLEVBQUksV0FDSCxPQUFPQyxLQURKLEdBSUosSUFFQ0QsRUFBSUEsR0FBSyxJQUFJRSxTQUFTLGNBQWIsR0FDUixNQUFPQyxHQUVjLGlCQUFYQyxTQUFxQkosRUFBSUksUUFPckNyQyxFQUFPRCxRQUFVa0M7Ozs7Ozt1RkNuQmpCLFlBQUFqQyxFQUFBLGtCQUFxQyxnREFBUSxLOzs7Ozs7dUZDQTdDLFlBQUFBLEVBQUEsa0JBQXFDLDZDQUFRLEs7Ozs7Ozt3S0NDN0MsNkJBQ0EsdUJBS01zQyxFQUFPLG9CQUFRLElBSXJCLFNBQVNDLEVBQWNDLEVBQUdDLEdBQ3RCLElBQUksSUFBSXhDLEVBQUksRUFBR3lDLEVBQU1GLEVBQUVHLE9BQVExQyxFQUFJeUMsRUFBS3pDLElBQ3BDLEdBQUd1QyxFQUFFdkMsSUFBTXdDLEVBQUcsT0FBTyxFQUV6QixPQUFPLEVBRVgsU0FBU0csRUFBcUJDLEVBQUtDLEdBRy9CLElBRkEsSUFBSUMsRUFBTUMsU0FBU0MsaUJBQWlCSCxHQUNoQ0ksRUFBTUwsRUFBSU0sV0FDUkQsSUFBUVgsRUFBY1EsRUFBS0csSUFDN0JBLEVBQU1BLEVBQUlDLFdBRWQsT0FBT0QsRUFvQlgsbUJBYUksWUFBWUUsR0FJUixHQUhBbEIsS0FBS21CLFNBQVcsR0FDaEJuQixLQUFLb0IsWUFBYyxFQUVmRixFQUFZLElBQWhCLENBdUJBLEdBbkJBbEIsS0FBS3FCLElBQU1ILEVBQVksSUFDdkJsQixLQUFLc0IsU0FBV1IsU0FBU1MsZUFBZXZCLEtBQUtxQixLQUM3Q0csUUFBUUMsSUFBSXpCLEtBQUtzQixVQUNqQnRCLEtBQUtzQixTQUFTSSxhQUFhLFFBQVMseUNBRWpDUixFQUFhLEtBQ1psQixLQUFLMkIsS0FBT1QsRUFBYSxLQUV6QmxCLEtBQUsyQixLQUFPdkIsRUFJYmMsRUFBc0IsY0FDckJsQixLQUFLNEIsY0FBZ0JWLEVBQXNCLGNBRTNDbEIsS0FBSzRCLGVBQWdCLEVBSXRCNUIsS0FBSzJCLE1BQVEzQixLQUFLMkIsS0FBZSxTQUFFLENBQ3ZCM0IsS0FBSzJCLEtBQWUsU0FDMUJFLFFBQVVDLElBQ1gsSUFBSUMsRUFBZSxJQUFJLEVBQUFDLFFBQVFoQyxLQUFLc0IsU0FBVVEsRUFBUTlCLEtBQUs0QixjQUFxRSxLQUFuREssR0FBcUJqQyxLQUFLa0MsWUFBWUQsSUFDbkhqQyxLQUFLbUIsU0FBU2dCLEtBQUtKLFVBVXZCSyxNQUFNLDhCQUNOWixRQUFRQyxJQUFJekIsS0FBSzJCLE1BTWpCVCxFQUFjLE1BQ2RsQixLQUFLcUMsTUFBUW5CLEVBQWMsTUFFM0JsQixLQUFLcUMsT0FBUSxFQUlkbkIsRUFBYSxLQUNabEIsS0FBS2QsS0FBT2dDLEVBQWEsS0FFekJsQixLQUFLZCxLQUFPLE1BRUMsVUFBZGMsS0FBS2QsS0FDSmMsS0FBS3NDLFFBRUx0QyxLQUFLdUMsV0ExRExILE1BQU0sMENBa0VkLHNCQUFzQkksR0FDbEIsSUFBSSxJQUFJekUsRUFBRSxFQUFJQSxFQUFFaUMsS0FBS21CLFNBQVNWLE9BQVMxQyxJQUNuQyxHQUFHaUMsS0FBS21CLFNBQVNwRCxHQUFHMEUsSUFBTUQsRUFBSyxPQUFPekUsRUFFMUMsT0FBTyxLQVFYLGFBQWEyRSxFQUFjQyxHQUN2Qm5CLFFBQVFDLElBQUl6QixLQUFLbUIsVUFDakIsSUFBSXlCLEVBQU81QyxLQUFLbUIsU0FBU3VCLEdBQ3pCMUMsS0FBS21CLFNBQVN1QixHQUFTMUMsS0FBS21CLFNBQVN3QixHQUNyQzNDLEtBQUttQixTQUFTd0IsR0FBU0MsRUFDdkJwQixRQUFRQyxJQUFJekIsS0FBS21CLFVBTXJCLFVBQVVqQixHQUNOQSxFQUFFMkMsYUFBYUMsUUFBUSxhQUFjNUMsRUFBRTZDLE9BQU9OLElBQzlDTyxXQUFXLEtBRVV0QyxFQUFxQlIsRUFBRTZDLE9BQVEsaUJBSTVDWCxNQUFNLGNBRVgsR0FFUCxVQUFVbEMsR0FDTkEsRUFBRStDLGlCQUNGLElBQUlDLEVBQWF4QyxFQUFxQlIsRUFBRTZDLE9BQVEsZ0JBQzdDRyxHQUNDQSxFQUFXQyxVQUFVQyxJQUFJLGFBSWpDLFNBQVNsRCxHQUNMQSxFQUFFK0MsaUJBQ0YsSUFBSUMsRUFBYXhDLEVBQXFCUixFQUFFNkMsT0FBUSxnQkFDN0NHLEdBQ0NBLEVBQVdDLFVBQVVDLElBQUksYUFJakMsVUFBVWxELEdBQ04sSUFBSWdELEVBQWF4QyxFQUFxQlIsRUFBRTZDLE9BQVEsZ0JBQzdDRyxHQUNDQSxFQUFXQyxVQUFVRSxPQUFPLGFBSXBDLEtBQUtuRCxHQUNEQSxFQUFFNkMsT0FBT0ksVUFBVUUsT0FBTyxhQUcxQixNQUFNWixFQUFLdkMsRUFBRTJDLGFBQWFTLFFBQVEsY0FDbEMsSUFBSUMsRUFBWXpDLFNBQVNTLGVBQWVrQixHQUVwQ1MsRUFBYXhDLEVBQXFCUixFQUFFNkMsT0FBUSxnQkFLaEQsR0FIQUcsRUFBV0MsVUFBVUUsT0FBTyxhQUM1QkUsRUFBVUosVUFBVUUsT0FBTyxhQUV2QkgsRUFFQyxDQUNELElBQUlNLEVBQU14RCxLQUFLeUQsc0JBQXNCUCxFQUFXUSxTQUFTLEdBQUdqQixJQUN4RGtCLEVBQU0zRCxLQUFLeUQsc0JBQXNCRixFQUFVZCxJQUU1Q2UsR0FBT0csSUFDTjNELEtBQUs0RCxhQUFhSixFQUFLRyxHQW5MdEJyRCxFQW9MTzRDLEVBQVdRLFNBQVMsR0FwTHpCbkQsRUFvTDZCZ0QsRUFsTHBDTSxFQUFVdkQsRUFBRVcsV0FDWjZDLEVBQVV2RCxFQUFFVSxXQUVaOEMsRUFBVWpELFNBQVNrRCxjQUFjLE9BQ2pDQyxFQUFVbkQsU0FBU2tELGNBQWMsT0FFckNILEVBQVFLLGFBQWFILEVBQVF6RCxHQUM3QndELEVBQVFJLGFBQWFELEVBQVExRCxHQUU3QnNELEVBQVFLLGFBQWEzRCxFQUFFd0QsR0FDdkJELEVBQVFJLGFBQWE1RCxFQUFFMkQsU0FpS25CN0IsTUFBTSxvQkE3S2xCLElBQWlCOUIsRUFBRUMsRUFFUHNELEVBQ0FDLEVBRUFDLEVBQ0FFLEVBdU1SLFFBa0NJLEdBakNBakUsS0FBS21FLFFBRUxuRSxLQUFLbUIsU0FBU1UsUUFBVUMsSUFFcEIsR0FEQUEsRUFBSVEsTUFBTXRDLEtBQUtzQixXQUNYdEIsS0FBSzRCLGNBQWMsQ0FFbkIsSUFBSXdDLEVBQVMsRUFBQUMsUUFBUUwsY0FBYyxTQUFVLENBQUMsTUFBUSxrQ0FBbUMsS0FBTyxTQUFVLEdBQUssc0JBQXNCbEMsRUFBSVcsS0FDekkyQixFQUFPRSxVQUFZLGlEQUNuQkYsRUFBT0csUUFBV0MsSUFDZHhFLEtBQUtzQixTQUFTbUQsWUFBWTNDLEVBQUk0QyxnQkFDOUIxRSxLQUFLbUIsU0FBV25CLEtBQUttQixTQUFTd0QsUUFBTyxTQUFTQyxHQUFNLE9BQU9BLEVBQUduQyxJQUFNWCxFQUFJVyxPQUU1RVgsRUFBSTRDLGVBQWVHLFlBQVlULEdBR3hCdEMsRUFBSTRDLGVBQ1ZJLFlBQWU1RSxJQUNoQkYsS0FBSytFLFVBQVU3RSxNQU1YWSxTQUFTQyxpQkFBaUIsZUFDaENjLFFBQVFtRCxJQUNWQSxFQUFJQyxpQkFBaUIsWUFBYWpGLEtBQUtrRixXQUN2Q0YsRUFBSUMsaUJBQWlCLFdBQVlqRixLQUFLbUYsVUFDdENILEVBQUlDLGlCQUFpQixZQUFhakYsS0FBS29GLFdBQ3ZDSixFQUFJQyxpQkFBaUIsT0FBUy9FLEdBQU1GLEtBQUtxRixLQUFLbkYsT0FLOUNGLEtBQUs0QixjQUFjLENBRW5CLElBQUkwRCxFQUFZLEVBQUFqQixRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLG1DQUFvQyxLQUFPLFdBQ3BHc0IsRUFBVUMsVUFBWSxJQUN0QkQsRUFBVWYsUUFBV0MsSUFFakIsSUFBSWdCLEVBQXlCaEIsRUFBR3pCLE9BQzVCakIsRUFBTSxJQUFJLEVBQUFFLFFBQVFoQyxLQUFLc0IsU0FBVSxLQUFTVyxHQUFxQmpDLEtBQUtrQyxZQUFZRCxJQUNwRmpDLEtBQUttQixTQUFTZ0IsS0FBS0wsR0FDbkI5QixLQUFLc0IsU0FBU21ELFlBQVllLEdBQ3ZCeEYsS0FBS3FDLE9BQ0pyQyxLQUFLc0IsU0FBU21ELFlBQVlnQixHQUU5QjNELEVBQUlRLE1BQU10QyxLQUFLc0IsVUFFZixJQUFJb0UsRUFBWSxFQUFBckIsUUFBUUwsY0FBYyxTQUFVLENBQUMsTUFBUSxrQ0FBbUMsS0FBTyxTQUFVLEdBQUssc0JBQXNCbEMsRUFBSVcsS0FDNUlpRCxFQUFVcEIsVUFBWSxpREFDdEJvQixFQUFVbkIsUUFBV0MsSUFDakJ4RSxLQUFLc0IsU0FBU21ELFlBQVkzQyxFQUFJNkQsTUFDOUIzRixLQUFLbUIsU0FBV25CLEtBQUttQixTQUFTd0QsUUFBTyxTQUFTQyxHQUFNLE9BQU9BLEVBQUduQyxJQUFNWCxFQUFJVyxPQUU1RVgsRUFBSTRDLGVBQWVHLFlBQVlhLEdBRS9CMUYsS0FBS3NCLFNBQVN1RCxZQUFZVyxHQUN2QnhGLEtBQUtxQyxPQUNKckMsS0FBS3NCLFNBQVN1RCxZQUFZWSxJQUdsQ3pGLEtBQUtzQixTQUFTdUQsWUFBWVMsR0FJOUIsSUFBSUcsRUFBZSxFQUFBcEIsUUFBUUwsY0FBYyxTQUFVLENBQUMsTUFBUSxtQ0FBb0MsS0FBTyxXQUN2R3lCLEVBQWFGLFVBQVksWUFDekJFLEVBQWFsQixRQUFVLEtBRW5CdkUsS0FBS3VDLE9BRU52QyxLQUFLcUMsT0FDSnJDLEtBQUtzQixTQUFTdUQsWUFBWVksR0FXbEMsTUFDSXpGLEtBQUttRSxRQUVMbkUsS0FBS21CLFNBQVNVLFFBQVVDLElBQ3BCQSxFQUFJUyxJQUFJdkMsS0FBS3NCLFlBSWpCdEIsS0FBSzRGLFFBQVUsRUFBQXZCLFFBQVFMLGNBQWMsU0FBVSxDQUFDLE1BQVEsbUNBQW9DLEtBQU8sU0FBVSxHQUFLLGdDQUNsSGhFLEtBQUs0RixRQUFRTCxVQUFZLE9BQ3pCdkYsS0FBSzRGLFFBQVFyQixRQUFXckUsSUFFakJGLEtBQUttQixTQUFTbkIsS0FBS29CLGFBQWF5RSxjQUMvQjdGLEtBQUs4RixlQUVMNUYsRUFBRStDLGlCQUNGYixNQUFNLDhCQUdWcEMsS0FBS29CLGFBQWVwQixLQUFLbUIsU0FBU1YsT0FBTyxHQUFPVCxLQUFLNEIsZ0JBRXJEZCxTQUFTUyxlQUFlLG9CQUFvQnZCLEtBQUttQixTQUFTbkIsS0FBS29CLGFBQWFxQixJQUFJc0QsTUFBTUMsUUFBVSxPQUNoR2xGLFNBQVNTLGVBQWUsb0JBQW9CdkIsS0FBS21CLFNBQVNuQixLQUFLb0IsYUFBYXFCLElBQUl3RCxNQUFNakcsS0FBSzRGLFVBRTVGNUYsS0FBSzRCLGVBRUo1QixLQUFLbUIsU0FBU25CLEtBQUtvQixhQUFhdUUsS0FBS2QsWUFBWTdFLEtBQUs0RixTQUkxRCxJQUFJTSxFQUFhLEVBQUE3QixRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLG1DQUFvQyxLQUFPLFNBQVUsR0FBSywwQkFDcEhrQyxFQUFXWCxVQUFZLE9BQ3ZCVyxFQUFXM0IsUUFBVSxLQUVqQnZFLEtBQUs4RixlQUVOOUYsS0FBS3FDLE9BQ0pyQyxLQUFLc0IsU0FBU3VELFlBQVlxQixHQUk5QixJQUFJVCxFQUFlLEVBQUFwQixRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLG1DQUFvQyxLQUFPLFdBQ3ZHeUIsRUFBYUYsVUFBWSxtQkFDekJFLEVBQWFsQixRQUFVLEtBRW5CdkUsS0FBS3NDLFNBRU50QyxLQUFLcUMsT0FDSnJDLEtBQUtzQixTQUFTdUQsWUFBWVksR0FrQjlCekYsS0FBS2dHLFVBR1QsVUFxQ0EsUUFDT2hHLEtBQUtzQixXQUNKdEIsS0FBS3NCLFNBQVNnRCxVQUFZLEdBQzFCdEUsS0FBS21CLFNBQVNVLFFBQVVDLElBQ3BCQSxFQUFJcUMsVUFFUm5FLEtBQUtvQixZQUFjLEdBTzNCLFVBTU9wQixLQUFLb0IsYUFBYSxHQUFLcEIsS0FBS29CLFlBQVlwQixLQUFLbUIsU0FBU1YsUUFDckRULEtBQUttQixTQUFTbkIsS0FBS29CLGFBQWErRSxPQUt4QyxjQUNJLElBQUlDLEVBQ0pBLEVBQU0sR0FDTnBHLEtBQUttQixTQUFTVSxRQUFVQyxJQUNwQnNFLEVBQUlqRSxLQUFLTCxFQUFJZ0UsaUJBRWpCLElBQUlPLEVBQWNDLEtBQUtDLFVBQVcsQ0FBQyxTQUFXSCxJQUc5QyxPQUZBNUUsUUFBUUMsSUFBSSxlQUNaRCxRQUFRQyxJQUFJNEUsR0FDTEEsRUFPWCxZQUFZcEUsR0FFTEEsRUFFSWpDLEtBQUtvQixhQUFhLEdBQUtwQixLQUFLb0IsWUFBWXBCLEtBQUttQixTQUFTVixPQUFPLEdBQzVEVCxLQUFLbUIsU0FBU25CLEtBQUtvQixhQUFhb0YsT0FDaEN4RyxLQUFLb0IsY0FDTHBCLEtBQUttQixTQUFTbkIsS0FBS29CLGFBQWErRSxPQUVoQ3JGLFNBQVNTLGVBQWUsd0JBQXdCdkIsS0FBS21CLFNBQVNuQixLQUFLb0IsYUFBYXFCLElBQUlzRCxNQUFNQyxRQUFVLGVBQ2pHaEcsS0FBS29CLGFBQWVwQixLQUFLbUIsU0FBU1YsT0FBTyxHQUV4Q0ssU0FBU1MsZUFBZSxvQkFBb0J2QixLQUFLbUIsU0FBU25CLEtBQUtvQixhQUFhcUIsSUFBSXNELE1BQU1DLFFBQVUsT0FFaEdsRixTQUFTUyxlQUFlLG9CQUFvQnZCLEtBQUttQixTQUFTbkIsS0FBS29CLGFBQWFxQixJQUFJd0QsTUFBTWpHLEtBQUs0RixVQUczRjlFLFNBQVNTLGVBQWUsb0JBQW9CdkIsS0FBS21CLFNBQVNuQixLQUFLb0IsYUFBYXFCLElBQUlzRCxNQUFNQyxRQUFVLGdCQUdwRzVELE1BQU0scUNBSVBwQyxLQUFLb0IsYUFBYSxHQUFLcEIsS0FBS29CLFlBQVlwQixLQUFLbUIsU0FBU1YsUUFDckRULEtBQUttQixTQUFTbkIsS0FBS29CLGFBQWFvRixPQUNoQ3hHLEtBQUtvQixjQUNMcEIsS0FBS21CLFNBQVNuQixLQUFLb0IsYUFBYStFLE9BRWhDckYsU0FBU1MsZUFBZSxvQkFBb0J2QixLQUFLbUIsU0FBU25CLEtBQUtvQixhQUFhcUIsSUFBSXNELE1BQU1DLFFBQVUsZUFDM0UsR0FBbEJoRyxLQUFLb0IsY0FFSk4sU0FBU1MsZUFBZSx3QkFBd0J2QixLQUFLbUIsU0FBU25CLEtBQUtvQixhQUFhcUIsSUFBSXNELE1BQU1DLFFBQVUsU0FHeEc1RCxNQUFNOzs7Ozs7dUZDaGZ0QixZQUFBdEUsRUFBQSxrQkFBcUMsZ0RBQVEsSzs7Ozs7O3FLQ0E3QyxpQ0FDQSx1QkFLQSxnQkFXSSxZQUFZMkksRUFBcUJDLEVBQWdCQyxHQUM3QzNHLEtBQUs0RyxPQUFTSCxFQUNkekcsS0FBSzZHLE9BQVMsR0FDZDdHLEtBQUs4RyxTQUFXSCxFQUNoQjNHLEtBQUsrRyxNQUFRLEdBRWIvRyxLQUFLeUMsR0FBS3VFLEtBQUtDLFNBQVNDLFNBQVMsSUFBSUMsVUFBVSxHQUU1Q1QsSUFDSUEsRUFBYSxRQUNaMUcsS0FBSytHLE1BQVFMLEVBQWEsT0FNM0JBLEVBQWMsUUFDYkEsRUFBYyxPQUFFN0UsUUFBVXRCLElBQ3RCLElBQUk2RyxFQUFhLElBQUksRUFBQUMsTUFBTTlHLEdBQzNCUCxLQUFLNkcsT0FBTzFFLEtBQUtpRixNQVlqQyxNQUFNekIsR0FDRjNGLEtBQUswRSxlQUFpQixFQUFBTCxRQUFRTCxjQUFjLE1BQU8sQ0FDL0MsTUFBUyxxQkFDVCxXQUFhLEVBQ2IsR0FBTWhFLEtBQUt5QyxLQUdmekMsS0FBSzJGLEtBQU8sRUFBQXRCLFFBQVFMLGNBQWMsTUFBTyxDQUNyQyxNQUFTLDZCQUNULEdBQUssVUFBVWhFLEtBQUt5QyxLQVN4QixJQUFJNkUsRUFBYSxFQUFBakQsUUFBUUwsY0FBYyxNQUFPLENBQUMsTUFBUyxxREFDeEQsRUFBQUssUUFBUWtELG9CQUFvQkQsRUFBWXRILEtBQUt5QyxHQUFJekMsS0FBSytHLE1BQU8sZ0JBQWtCUyxJQUFTeEgsS0FBSytHLE1BQU1TLEdBQU8sWUFDMUd4SCxLQUFLMEUsZUFBZUcsWUFBWXlDLEdBRWhDdEgsS0FBSzZHLE9BQU9oRixRQUFVNEYsSUFDbEIsSUFBSXJELEVBQVMsRUFBQUMsUUFBUUwsY0FBYyxTQUFVLENBQUMsTUFBUSxpQ0FBa0MsS0FBTyxTQUFVLE1BQVEsa0JBQ2pISSxFQUFPRSxVQUFZLGlEQUluQm1ELEVBQUluRixNQUFNdEMsS0FBSzBFLGVBQWdCTixHQUcvQkEsRUFBT0csUUFBV0MsSUFDZHhFLEtBQUswRSxlQUFlRCxZQUFZZ0QsRUFBSTlCLE1BQ3BDM0YsS0FBSzZHLE9BQVM3RyxLQUFLNkcsT0FBT2xDLFFBQU8sU0FBU0MsR0FBTSxPQUFPQSxFQUFHbkMsSUFBTWdGLEVBQUloRixTQU81RSxJQUFJNkMsRUFBWSxFQUFBakIsUUFBUUwsY0FBYyxTQUFVLENBQUMsTUFBUSxtQ0FBb0MsS0FBTyxXQUNwR3NCLEVBQVVoQixVQUFZLElBQ3RCZ0IsRUFBVWYsUUFBV0MsSUFFakIsSUFLSWtCLEVBTEFnQyxFQUF5QmxELEVBQUd6QixPQUU1QjBFLEVBQU0sSUFBSSxFQUFBSixNQUFNLE1BQ3BCckgsS0FBSzZHLE9BQU8xRSxLQUFLc0YsR0FDakJ6SCxLQUFLMEUsZUFBZUQsWUFBWWlELEdBRTdCMUgsS0FBSzhHLFdBQ0pwQixFQUFZNUUsU0FBU1MsZUFBZSxzQkFBc0J2QixLQUFLeUMsSUFDL0R6QyxLQUFLMEUsZUFBZUQsWUFBWWlCLElBRXBDK0IsRUFBSW5GLE1BQU10QyxLQUFLMEUsZ0JBQWdCLEVBQU8sSUFFdEMsSUFBSWlELEVBQVksRUFBQXRELFFBQVFMLGNBQWMsU0FBVSxDQUFDLE1BQVEsNkNBQThDLEtBQU8sU0FBVSxNQUFRLGtCQUNoSTJELEVBQVVyRCxVQUFZLGlEQUN0QnFELEVBQVVwRCxRQUFXQyxJQUNqQnhFLEtBQUswRSxlQUFlRCxZQUFZZ0QsRUFBSTlCLE1BQ3BDM0YsS0FBSzZHLE9BQVM3RyxLQUFLNkcsT0FBT2xDLFFBQU8sU0FBU0MsR0FBTSxPQUFPQSxFQUFHbkMsSUFBTWdGLEVBQUloRixPQUV4RWdGLEVBQUlHLE9BQU9DLGFBQWFGLEVBQVdGLEVBQUlHLE9BQU9FLFlBRTlDOUgsS0FBSzBFLGVBQWVHLFlBQVk2QyxHQUM3QjFILEtBQUs4RyxVQUNKOUcsS0FBSzBFLGVBQWVHLFlBQVlhLElBR3hDMUYsS0FBSzBFLGVBQWVHLFlBQVlTLEdBQ2hDdEYsS0FBSzJGLEtBQUtkLFlBQVk3RSxLQUFLMEUsZ0JBRTNCaUIsRUFBS2QsWUFBWTdFLEtBQUsyRixNQVMxQixJQUFJQSxHQUVBM0YsS0FBSzJGLEtBQU8sRUFBQXRCLFFBQVFMLGNBQWMsTUFBTyxDQUNyQyxNQUFTLG1CQUViLElBQUkrRCxFQUFXakgsU0FBU2tELGNBQWMsTUFDdEMrRCxFQUFTekQsVUFBWXRFLEtBQUsrRyxNQUMxQixJQUFJaUIsRUFBU2xILFNBQVNrRCxjQUFjLE1BVXBDLEdBVEFoRSxLQUFLMkYsS0FBS2QsWUFBWWtELEdBQ3RCL0gsS0FBSzJGLEtBQUtkLFlBQVltRCxHQUV0QmhJLEtBQUs2RyxPQUFPaEYsUUFBVXRCLElBQ2xCQSxFQUFFZ0MsSUFBSXZDLEtBQUsyRixRQUdmbkUsUUFBUUMsSUFBSSxzQkFDWkQsUUFBUUMsSUFBSXpCLEtBQUs4RyxVQUNkOUcsS0FBSzhHLFNBQVMsQ0FFYixJQUFJbUIsRUFBYSxFQUFBNUQsUUFBUUwsY0FBYyxTQUFVLENBQUMsTUFBUSxnQ0FBaUMsR0FBTSx3QkFBd0JoRSxLQUFLeUMsR0FBSSxLQUFPLFdBQ3pJd0YsRUFBVzFDLFVBQVksV0FDdkIwQyxFQUFXbEMsTUFBTUMsUUFBVSxPQUMzQmlDLEVBQVcxRCxRQUFVLEtBRWR2RSxLQUFLOEcsVUFHSjlHLEtBQUs4RyxVQUFTLElBR3RCOUcsS0FBSzJGLEtBQUtkLFlBQVlvRCxHQUd0QixJQUFJQyxFQUFhLEVBQUE3RCxRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLGdDQUFpQyxHQUFNLG9CQUFvQmhFLEtBQUt5QyxHQUFJLEtBQU8sV0FDckl5RixFQUFXM0MsVUFBWSxPQUN2QjJDLEVBQVczRCxRQUFVLEtBRWR2RSxLQUFLNkYsY0FDRDdGLEtBQUs4RyxVQUdKOUcsS0FBSzhHLFVBQVMsR0FHbEIxRSxNQUFNLGdDQUdkcEMsS0FBSzJGLEtBQUtkLFlBQVlxRCxHQUcxQmxJLEtBQUsyRixLQUFLSSxNQUFNQyxRQUFVLE9BRTFCTCxFQUFLZCxZQUFZN0UsS0FBSzJGLE1BSTFCLFFBQ08zRixLQUFLMkYsT0FDSjNGLEtBQUsyRixLQUFLckIsVUFBWSxJQUUxQnRFLEtBQUs2RyxPQUFPaEYsUUFBVTRGLElBQ2xCQSxFQUFJdEQsVUFJWixVQUVJLE9BREEvQixNQUFNcEMsS0FBSzJGLE1BQ0ozRixLQUFLMkYsS0FNaEIsT0FDSTNGLEtBQUsyRixLQUFLSSxNQUFNQyxRQUFVLFFBTTlCLE9BQ0loRyxLQUFLMkYsS0FBS0ksTUFBTUMsUUFBVSxPQU05QixjQUNJLElBQUlILEdBQWMsRUFPbEIsT0FOQTdGLEtBQUs2RyxPQUFPaEYsUUFBVTRGLElBQ2xCakcsUUFBUUMsSUFBSWdHLEVBQUlVLFFBQ2JWLEdBQTJCLEdBQW5CQSxFQUFJVSxPQUFPMUgsUUFBZWdILEVBQUlXLE9BQVMsRUFBQUMsVUFBVUMsV0FDeER6QyxHQUFjLEtBR2ZBLEVBSVgsY0FDSSxJQUFJTyxFQVNKLE9BUkFBLEVBQU0sR0FDTnBHLEtBQUs2RyxPQUFPaEYsUUFBVTRGLElBQ2xCckIsRUFBSWpFLEtBQUtzRixFQUFJM0IsaUJBRVAsQ0FDTixNQUFTOUYsS0FBSytHLE1BQ2QsT0FBU1g7Ozs7Ozt1RkM1T3JCLFlBQUF0SSxFQUFBLGtCQUFxQyw4Q0FBUSxLOzs7Ozs7K0tDQTdDLDhCQUNBLHNCQUVBLDRCQUNBLDhCQUNBLDJCQUNBLDhCQUNBLDhCQUNBLDBCQUdBLElBQVl1SyxHQUFaLFNBQVlBLEdBQ1IsMkJBQ0EscUJBQ0EsdUJBQ0EsMkJBQ0EsMkJBQ0EsMkJBQ0EsbUJBUEosQ0FBWUEsRUFBQSxFQUFBQSxZQUFBLEVBQUFBLFVBQVMsS0FjckIsY0F3QkksWUFBWTNCLEVBQWlCLE1BQ3pCMUcsS0FBSzJCLEtBQU8rRSxFQUNaMUcsS0FBS3VJLEtBQU8sR0FDWnZJLEtBQUtvSSxLQUFPLEVBQ1pwSSxLQUFLd0ksSUFBTSxHQUNYeEksS0FBS3lJLElBQU0sR0FDWHpJLEtBQUswSSxLQUFPLEdBQ1oxSSxLQUFLbUksT0FBUyxHQUNkbkksS0FBSzJJLFFBQVUsR0FFZjNJLEtBQUt5QyxHQUFLdUUsS0FBS0MsU0FBU0MsU0FBUyxJQUFJQyxVQUFVLEdBRTVDVCxJQUNJQSxFQUFZLE9BQ1gxRyxLQUFLdUksS0FBTzdCLEVBQVksTUFHekJBLEVBQVksT0FDWDFHLEtBQUtvSSxLQUFPMUIsRUFBWSxNQUc1QjFHLEtBQUttSSxPQUFTLEdBQ1h6QixFQUFjLFNBQ2IxRyxLQUFLbUksT0FBU3pCLEVBQWMsUUFHN0JBLEVBQVcsTUFDVjFHLEtBQUt3SSxJQUFNOUIsRUFBVyxLQUV2QkEsRUFBVyxNQUNWMUcsS0FBS3lJLElBQU0vQixFQUFXLEtBRXZCQSxFQUFZLE9BQ1gxRyxLQUFLMEksS0FBT2hDLEVBQVksTUFHekIxRyxLQUFLb0ksT0FBU0MsRUFBVU8sT0FBUzVJLEtBQUtvSSxPQUFTQyxFQUFVUSxVQUVyRG5DLEVBQWUsU0FDZEEsRUFBZSxRQUFFN0UsUUFBUWlILElBQ3JCLElBQUlDLEVBQVMsSUFBSSxFQUFBQyxPQUFPRixHQUN4QjlJLEtBQUsySSxRQUFReEcsS0FBSzRHLE1BWXRDLFFBQ08vSSxLQUFLMkYsT0FDSjNGLEtBQUsyRixLQUFLckIsVUFBWSxJQU85QixNQUFNcUIsRUFBTXZCLEVBQVMsS0FBTTZFLEVBQWlCLFlBQ3hDakosS0FBSzJGLEtBQU8sRUFBQXRCLFFBQVFMLGNBQWMsTUFBTyxDQUNyQyxNQUFVLDJCQVlkLElBQUlrRixFQUFjLEVBQUE3RSxRQUFRTCxjQUFjLE1BQU8sQ0FDM0MsTUFBUyxhQUFhaUYsSUFHMUJqSixLQUFLNEgsT0FBUyxFQUFBdkQsUUFBUThFLGFBQWFuSixLQUFLMkYsS0FBTTNGLEtBQUt5QyxHQUFJeUcsRUFBYTlFLEdBQ3BFLEVBQUFDLFFBQVFrRCxvQkFBb0J2SCxLQUFLNEgsT0FBUTVILEtBQUt5QyxHQUFJekMsS0FBS3VJLEtBQU0sT0FBU2YsSUFBU3hILEtBQUt1SSxLQUFLZixHQUFPLFlBRWhHeEgsS0FBSzJGLEtBQUtkLFlBQVlxRSxHQUd0QixJQUFJRSxFQUFZM0ssT0FBTzRLLEtBQUtoQixHQUFXMUQsT0FBT3JFLEdBQUdBLEVBQUVnSixNQUFNLFFBQVFDLElBQUlqTCxJQUFNLENBQUVBLE9BQU1VLE1BQU9xSixFQUFVL0osTUFDcEcsRUFBQStGLFFBQVFtRix3QkFBd0JOLEVBQWFsSixLQUFLeUMsR0FBSXpDLEtBQUtvSSxLQUFNLE9BQVNaLElBQ3RFeEgsS0FBS29JLEtBQUtxQixPQUFPakMsR0FDakJ4SCxLQUFLbUksT0FBTyxHQUNabkksS0FBSzBKLDBCQUVOTixFQUFXLFlBR2QsSUFBSU8sRUFBa0IsR0FDbEIzSixLQUFLb0ksT0FBU0MsRUFBVU8sT0FBVzVJLEtBQUtvSSxPQUFTQyxFQUFVUSxXQUMzRGMsRUFBa0IsaUJBRXRCLElBQUlDLEVBQWMsRUFBQXZGLFFBQVFMLGNBQWMsTUFBTyxDQUMzQyxHQUFNLGlCQUFpQmhFLEtBQUt5QyxHQUM1QixNQUFTLGdCQUNULE1BQVNrSCxJQUdURSxFQUFXLEVBQUF4RixRQUFRTCxjQUFjLFNBQ3JDNkYsRUFBU3ZGLFVBQVksYUFDckJzRixFQUFZL0UsWUFBWWdGLEdBQ3JCN0osS0FBSzJJLFFBQVFsSSxPQUFTLEdBQ3JCVCxLQUFLMkksUUFBUTlHLFFBQVVpSSxJQUNuQkEsRUFBR3hILE1BQU1zSCxHQUVULElBQUl4RixFQUFTLEVBQUFDLFFBQVFMLGNBQWMsU0FBVSxDQUFDLE1BQVEsa0NBQW1DLEtBQU8sV0FDaEdJLEVBQU9tQixVQUFZLElBQ25CbkIsRUFBT0csUUFBV0MsSUFDZG9GLEVBQVluRixZQUFZcUYsRUFBR25FLE1BQzNCM0YsS0FBSzJJLFFBQVUzSSxLQUFLMkksUUFBUWhFLFFBQU8sU0FBU0MsR0FBTSxPQUFPQSxFQUFHbkMsSUFBTXFILEVBQUdySCxPQUV6RXFILEVBQUduRSxLQUFLZCxZQUFZVCxLQUs1QixJQUFJMkYsRUFBa0IsRUFBQTFGLFFBQVFMLGNBQWMsU0FBVSxDQUFDLE1BQVEsbUNBQW9DLEtBQU8sV0FDMUcrRixFQUFnQnhFLFVBQVksSUFDNUJ3RSxFQUFnQnhGLFFBQVdDLElBRXZCLElBQUl3RixFQUF3QnhGLEVBQUd6QixPQUUzQitHLEVBQUssSUFBSSxFQUFBZCxPQUFPLE1BQ3BCaEosS0FBSzJJLFFBQVF4RyxLQUFLMkgsR0FDbEJGLEVBQVluRixZQUFZdUYsR0FDeEJGLEVBQUd4SCxNQUFNc0gsR0FFVCxJQUFJSyxFQUFXLEVBQUE1RixRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLGtDQUFtQyxLQUFPLFdBQ2xHaUcsRUFBUzFFLFVBQVksSUFDckIwRSxFQUFTMUYsUUFBV0MsSUFDaEJvRixFQUFZbkYsWUFBWXFGLEVBQUduRSxNQUMzQjNGLEtBQUsySSxRQUFVM0ksS0FBSzJJLFFBQVFoRSxRQUFPLFNBQVNDLEdBQU0sT0FBT0EsRUFBR25DLElBQU1xSCxFQUFHckgsT0FFekVxSCxFQUFHbkUsS0FBS2QsWUFBWW9GLEdBRXBCTCxFQUFZL0UsWUFBWW1GLElBRTVCSixFQUFZL0UsWUFBWWtGLEdBRXhCYixFQUFZckUsWUFBWStFLEdBSXhCLElBQUlNLEVBQWlCLEdBQ2xCbEssS0FBS29JLE9BQVNDLEVBQVU4QixTQUN2QkQsRUFBaUIsaUJBRXJCLElBQUlFLEVBQWEsRUFBQS9GLFFBQVFMLGNBQWMsTUFBTyxDQUMxQyxHQUFNLGdCQUFnQmhFLEtBQUt5QyxHQUMzQixNQUFTLGdCQUNULE1BQVN5SCxJQUViLEVBQUE3RixRQUFRa0Qsb0JBQW9CNkMsRUFBWXBLLEtBQUt5QyxHQUFJekMsS0FBS3dJLElBQUssTUFBUWhCLElBQVN4SCxLQUFLd0ksSUFBSWhCLEdBQU8sWUFDNUYsRUFBQW5ELFFBQVFrRCxvQkFBb0I2QyxFQUFZcEssS0FBS3lDLEdBQUl6QyxLQUFLeUksSUFBSyxNQUFRakIsSUFBU3hILEtBQUt5SSxJQUFJakIsR0FBTyxZQUM1RixFQUFBbkQsUUFBUWtELG9CQUFvQjZDLEVBQVlwSyxLQUFLeUMsR0FBSXpDLEtBQUswSSxLQUFNLE9BQVNsQixJQUFTeEgsS0FBSzBJLEtBQUtsQixHQUFPLFlBQy9GMEIsRUFBWXJFLFlBQVl1RixHQUl4QnpFLEVBQUtkLFlBQVk3RSxLQUFLMkYsTUFRMUIsSUFBSUEsR0FFQSxJQUFJMEUsRUFBWSxFQUFBaEcsUUFBUUwsY0FBYyxLQUt0QyxPQUpBcUcsRUFBVS9GLFVBQVl0RSxLQUFLdUksS0FDM0J2SSxLQUFLMkYsS0FBTyxFQUFBdEIsUUFBUUwsY0FBYyxPQUNsQ2hFLEtBQUsyRixLQUFLZCxZQUFZd0YsR0FFZnJLLEtBQUtvSSxNQUNSLEtBQUtDLEVBQVVPLE1BQ1gsRUFBQTBCLFdBQVcvSCxJQUFJdkMsS0FBSzJGLEtBQU0zRixNQUMxQixNQUVKLEtBQUtxSSxFQUFVUSxTQUNYLEVBQUEwQixjQUFjaEksSUFBSXZDLEtBQUsyRixLQUFNM0YsTUFDN0IsTUFFSixLQUFLcUksRUFBVW1DLFNBQ1gsRUFBQUMsY0FBY2xJLElBQUl2QyxLQUFLMkYsS0FBTTNGLE1BQzdCLE1BRUosS0FBS3FJLEVBQVVxQyxTQUNYLEVBQUFDLGNBQWNwSSxJQUFJdkMsS0FBSzJGLEtBQU0zRixNQUM3QixNQUVKLEtBQUtxSSxFQUFVQyxTQUVYLE1BRUosS0FBS0QsRUFBVThCLE9BQ1gsRUFBQVMsWUFBWXJJLElBQUl2QyxLQUFLMkYsS0FBTTNGLE1BQzNCLE1BRUosS0FBS3FJLEVBQVV3QyxLQUNYLEVBQUFDLFVBQVV2SSxJQUFJdkMsS0FBSzJGLEtBQU0zRixNQUtqQyxJQUFJK0ssRUFBSyxFQUFBMUcsUUFBUUwsY0FBYyxLQUFNLENBQ2pDLE1BQVMsY0FFYmhFLEtBQUsyRixLQUFLZCxZQUFZa0csR0FFdEJwRixFQUFLZCxZQUFZN0UsS0FBSzJGLE1BSTFCLFdBS0EseUJBQ0ksSUFBSXFGLEVBQWMsTUFDZkEsRUFBY2xLLFNBQVNTLGVBQWUsZ0JBQWdCdkIsS0FBS3lDLEtBQ3ZEekMsS0FBS29JLE9BQVNDLEVBQVU4QixPQUN2QmEsRUFBWWpGLE1BQU1DLFFBQVUsUUFFNUJnRixFQUFZakYsTUFBTUMsUUFBVSxPQUdoQzVELE1BQU0seUJBR1YsSUFBSTZJLEVBQWMsTUFDZkEsRUFBY25LLFNBQVNTLGVBQWUsaUJBQWlCdkIsS0FBS3lDLEtBQ3ZEekMsS0FBS29JLE9BQVNDLEVBQVVPLE9BQVc1SSxLQUFLb0ksT0FBU0MsRUFBVVEsU0FDM0RvQyxFQUFZbEYsTUFBTUMsUUFBVSxRQUU1QmlGLEVBQVlsRixNQUFNQyxRQUFVLE9BR2hDNUQsTUFBTSx5QkFLZCxjQUNJLElBQUlnRSxFQWVKLE9BZEFBLEVBQU0sR0FDTnBHLEtBQUsySSxRQUFROUcsUUFBVWlJLElBQ25CMUQsRUFBSWpFLEtBQUsySCxFQUFHaEUsaUJBRWhCOUYsS0FBSzJCLEtBQU8sQ0FDUixLQUFPM0IsS0FBS29JLEtBQ1osS0FBT3BJLEtBQUt1SSxLQUNaLE9BQVN2SSxLQUFLbUksT0FDZCxJQUFNbkksS0FBS3dJLElBQ1gsSUFBTXhJLEtBQUt5SSxJQUNYLEtBQU96SSxLQUFLMEksS0FDWixRQUFXdEMsR0FHUnBHLEtBQUsyQjs7Ozs7O3FLQzNUcEIsTUFBYTBDLEVBT1QscUJBQXFCK0QsRUFBYThDLEVBQWMsTUFDNUMsSUFBSTlDLEVBRUEsWUFEQWhHLE1BQU0sK0JBSVYsSUFBSStJLEVBQU9ySyxTQUFTa0QsY0FBY29FLEdBQ2xDLEdBQUc4QyxFQUNDLElBQUssSUFBSTVMLEtBQU80TCxFQUFTLENBQ3JCLElBQUlsTSxFQUFRa00sRUFBUTVMLEdBQ3BCNkwsRUFBS3pKLGFBQWFwQyxFQUFLTixHQUcvQixPQUFPbU0sRUFRWCxxQkFBcUJBLEVBQWtCRCxFQUFjLE1BQ2pELEdBQUdBLEVBQ0MsSUFBSyxJQUFJNUwsS0FBTzRMLEVBQVMsQ0FDckIsSUFBSWxNLEVBQVFrTSxFQUFRNUwsR0FDcEI2TCxFQUFLekosYUFBYXBDLEVBQUtOLElBTW5DLDJCQUEyQjJHLEVBQU1sRCxFQUFJekQsRUFBT29NLEVBQU90RSxFQUFVbUMsRUFBUSxhQUNqRSxJQUFJNUgsRUFBTWdELEVBQVFMLGNBQWMsTUFBTyxDQUNuQyxNQUFTLG9CQUFvQmlGLElBSTdCb0MsRUFBUWhILEVBQVFMLGNBQWMsUUFBUyxDQUN2QyxNQUFTLGlCQUNULEtBQVEsT0FDUixNQUFTaEYsRUFDVCxLQUFRb00sRUFBTSxJQUFJM0ksRUFDbEIsWUFBZTJJLElBRW5CQyxFQUFNQyxPQUFVOUcsSUFDWmhELFFBQVFDLElBQUkrQyxFQUFHekIsUUFDZitELEVBQTRCdEMsRUFBR3pCLE9BQVEvRCxRQUczQ3FDLEVBQUl3RCxZQUFZd0csR0FDaEIxRixFQUFLZCxZQUFZeEQsR0FJckIsb0JBQW9Cc0UsRUFBTWxELEVBQUk4SSxFQUFZbkgsR0FDdEMsSUFBSS9DLEVBQU1nRCxFQUFRTCxjQUFjLE1BQU8sQ0FDbkMsTUFBUyx1Q0FBdUN2QixJQUlqRDJCLElBQ0NBLEVBQU9vSCxXQUFhLGVBQ3BCbkssRUFBSXdELFlBQVlULElBR3BCLElBQUlxSCxFQUFPcEgsRUFBUUwsY0FBYyxJQUFLLENBQUMsTUFBUSx3QkFBeUIsY0FBYyxTQUN0RjNDLEVBQUl3RCxZQUFZNEcsR0FDaEIsSUFBSUMsRUFBT3JILEVBQVFMLGNBQWMsSUFBSyxDQUFDLE1BQVEscUNBQXNDLGNBQWMsU0F3Qm5HLE9BdkJBM0MsRUFBSXdELFlBQVk2RyxHQU1oQkQsRUFBS2xILFFBQVdDLElBQ1orRyxFQUFXcEksVUFBVXdJLE9BQU8sWUFDNUJGLEVBQUt0SSxVQUFVd0ksT0FBTyxVQUN0QkQsRUFBS3ZJLFVBQVV3SSxPQUFPLFdBRTFCRCxFQUFLbkgsUUFBV0MsSUFDWitHLEVBQVdwSSxVQUFVd0ksT0FBTyxZQUM1QkYsRUFBS3RJLFVBQVV3SSxPQUFPLFVBQ3RCRCxFQUFLdkksVUFBVXdJLE9BQU8sV0FRMUJoRyxFQUFLZCxZQUFZeEQsR0FDVkEsRUFXWCwrQkFBK0JzRSxFQUFNbEQsRUFBSXpELEVBQU9vTSxFQUFPdEUsRUFBVThFLEVBQVMzQyxFQUFRLGFBQzlFLElBQUk1SCxFQUFNZ0QsRUFBUUwsY0FBYyxNQUFPLENBQ25DLE1BQVMsb0JBQW9CaUYsSUFFN0I0QyxFQUFNeEgsRUFBUUwsY0FBYyxTQUNoQzZILEVBQUl2SCxVQUFZOEcsRUFBTSxLQUN0QixJQUFJQyxFQUFRaEgsRUFBUUwsY0FBYyxTQUFVLENBQ3hDLE1BQVMsa0JBQ1QsTUFBU2hGLEVBQ1QsS0FBUW9NLEVBQU0sSUFBSTNJLEVBQ2xCLE1BQVMsa0JBRWI0SSxFQUFNUyxTQUFZdEgsSUFDZHNDLEVBQTRCdEMsRUFBR3pCLE9BQVEvRCxRQUczQzRNLEVBQVEvSixRQUFRa0ssSUFDWixJQUFJQyxFQUFNM0gsRUFBUUwsY0FBYyxTQUFVLENBQ3RDLE1BQVMrSCxFQUFRL00sUUFFbEJBLElBQVErTSxFQUFRL00sT0FDZnFGLEVBQVE0SCxjQUFjRCxFQUFLLENBQ3ZCLFNBQVcsYUFHbkJBLEVBQUkxSCxVQUFZeUgsRUFBUXpOLEtBQ3hCK00sRUFBTXhHLFlBQVltSCxLQUd0QjNLLEVBQUl3RCxZQUFZZ0gsR0FDaEJ4SyxFQUFJd0QsWUFBWXdHLEdBQ2hCMUYsRUFBS2QsWUFBWXhELElBNUl6Qjs7Ozs7O3VGQ0RBLFlBQUF2RCxFQUFBLGtCQUFxQywrQ0FBUSxNOzs7Ozs7b0tDQzdDLDhCQUVBLGVBT0ksWUFBWTRJLEdBQ1IxRyxLQUFLeUMsR0FBS3VFLEtBQUtDLFNBQVNDLFNBQVMsSUFBSUMsVUFBVSxHQUU1Q1QsSUFDSUEsRUFBYSxRQUNaMUcsS0FBS29MLE1BQVExRSxFQUFhLE9BRzNCQSxFQUFhLFFBQ1oxRyxLQUFLaEIsTUFBUTBILEVBQWEsUUFRdEMsTUFBTWYsR0FDRjNGLEtBQUsyRixLQUFPLEVBQUF0QixRQUFRTCxjQUFjLE1BQU8sQ0FDckMsTUFBUyw2Q0FHYixJQUFJa0ksRUFBVyxFQUFBN0gsUUFBUUwsY0FBYyxRQUFTLENBQUMsSUFBTSxTQUFTaEUsS0FBS2hCLE1BQU0sSUFBSWdCLEtBQUt5QyxLQUNsRnlKLEVBQVM1SCxVQUFZLFdBQ3JCLElBQUk2SCxFQUFhLEVBQUE5SCxRQUFRTCxjQUFjLFFBQVMsQ0FDNUMsTUFBUyxpQkFDVCxLQUFRLE9BQ1IsTUFBVWhFLEtBQVUsTUFBSUEsS0FBS2hCLE1BQVEsR0FDckMsWUFBZSxRQUNmLEdBQU0sU0FBU2dCLEtBQUtoQixNQUFNLElBQUlnQixLQUFLeUMsS0FFdkMwSixFQUFXYixPQUFVOUcsSUFDakJoRCxRQUFRQyxJQUFJK0MsRUFBR3pCLFFBQ2YvQyxLQUFLaEIsTUFBeUJ3RixFQUFHekIsT0FBUS9ELE9BSTdDLElBQUlvTixFQUFXLEVBQUEvSCxRQUFRTCxjQUFjLFFBQVMsQ0FBQyxJQUFNLFNBQVNoRSxLQUFLb0wsTUFBTSxJQUFJcEwsS0FBS3lDLEdBQUksTUFBUSxxQkFDOUYySixFQUFTOUgsVUFBWSxXQUNyQixJQUFJK0gsRUFBYSxFQUFBaEksUUFBUUwsY0FBYyxRQUFTLENBQzVDLE1BQVMsaUJBQ1QsS0FBUSxPQUNSLE1BQVVoRSxLQUFVLE1BQUlBLEtBQUtvTCxNQUFRLEdBQ3JDLFlBQWUsUUFDZixHQUFLLFNBQVNwTCxLQUFLb0wsTUFBTSxJQUFJcEwsS0FBS3lDLEtBRXRDNEosRUFBV2YsT0FBVTlHLElBQ2pCaEQsUUFBUUMsSUFBSStDLEVBQUd6QixRQUNmL0MsS0FBS29MLE1BQXlCNUcsRUFBR3pCLE9BQVEvRCxPQUc3Q2dCLEtBQUsyRixLQUFLZCxZQUFZcUgsR0FDdEJsTSxLQUFLMkYsS0FBS2QsWUFBWXNILEdBQ3RCbk0sS0FBSzJGLEtBQUtkLFlBQVl1SCxHQUN0QnBNLEtBQUsyRixLQUFLZCxZQUFZd0gsR0FFdEIxRyxFQUFLZCxZQUFZN0UsS0FBSzJGLE1BRzFCLGNBS0ksT0FKQTNGLEtBQUsyQixLQUFPLENBQ1IsTUFBUTNCLEtBQUtvTCxNQUNiLE1BQVFwTCxLQUFLaEIsT0FFVmdCLEtBQUsyQjs7Ozs7O3VGQzFFcEIsWUFBQTdELEVBQUEsa0JBQXFDLG9EQUFRLE07Ozs7Ozt5S0NDN0MsOEJBRUEsb0JBRUksV0FBVzZILEVBQU0yRyxHQUNiLElBQUlDLEVBQVN6TCxTQUFTa0QsY0FBYyxPQUNwQ3VJLEVBQU83SyxhQUFhLFFBQVMsMEJBQzdCLElBQUk4SyxFQUFRLEVBQUFuSSxRQUFRTCxjQUFjLFNBRTlCd0UsRUFBTSxFQUFBbkUsUUFBUUwsY0FBYyxPQUFRLENBQ3BDLE1BQVEsVUFFWndFLEVBQUlsRSxVQUFhZ0ksRUFBUyxJQUFJQSxFQUFNOUQsSUFBTSxJQUMxQyxJQUFJQyxFQUFNLEVBQUFwRSxRQUFRTCxjQUFjLE9BQVEsQ0FDcEMsTUFBUSxXQUVaeUUsRUFBSW5FLFVBQWFnSSxFQUFTLElBQUlBLEVBQU03RCxJQUFNLE1BQzFDLElBQUlnRSxFQUFnQkgsRUFBWSxPQUFJQSxFQUFNbkUsT0FBV21FLEVBQU03RCxLQUFPNkQsRUFBTTlELElBQU94QixLQUFLMEYsT0FBT2pELE9BQU82QyxFQUFNN0QsS0FBTWdCLE9BQU82QyxFQUFNOUQsTUFBTSxHQUFLLEdBTXRJLEVBQUFuRSxRQUFRNEgsY0FBY08sRUFBTyxDQUN6QixNQUFTLGdCQUNULEtBQVEsUUFDUixNQUFTQyxFQUNULElBQVFILEVBQVMsSUFBSUEsRUFBTTlELElBQU0sRUFDakMsSUFBUThELEVBQVMsSUFBSUEsRUFBTTdELElBQU0sSUFDakMsR0FBTSxjQUFjNkQsRUFBTTdKLEtBRTNCNkosRUFBTTVELE1BQ0w4RCxFQUFNOUssYUFBYSxPQUFRNEssRUFBTTVELE1BRXJDOEQsRUFBTVYsU0FBVyxLQUNiUSxFQUFNbkUsT0FBU3dFLFdBQThCSCxFQUFPeE4sT0FDcER3QyxRQUFRQyxJQUFJNkssRUFBTW5FLFFBQ2xCckgsU0FBU1MsZUFBZSxVQUFVK0ssRUFBTTdKLElBQUk2QixVQUFZZ0ksRUFBTW5FLFFBR2xFLElBQUl5RSxFQUFXLEVBQUF2SSxRQUFRTCxjQUFjLE9BQ3JDNEksRUFBU2xMLGFBQWEsUUFBUyx1QkFDL0IsSUFBSW1MLEVBQVMsRUFBQXhJLFFBQVFMLGNBQWMsU0FBVSxDQUN6QyxHQUFNLFVBQVVzSSxFQUFNN0osS0FFMUJvSyxFQUFPdkksVUFBWW1JLEVBQ25CSCxFQUFNbkUsT0FBUzBFLEVBQU92SSxVQUV0QnNJLEVBQVMvSCxZQUFZZ0ksR0FDckJELEVBQVMvSCxZQUFZMkgsR0FDckJJLEVBQVMvSCxZQUFZMkQsR0FDckJvRSxFQUFTL0gsWUFBWTRELEdBQ3JCOEQsRUFBTzFILFlBQVkrSCxHQUVuQmpILEVBQUtkLFlBQVkwSDs7Ozs7O3VGQ3ZEekIsWUFBQXpPLEVBQUEsa0JBQXFDLHNEQUFRLE07Ozs7OzsyS0NBN0MsOEJBRUEsc0JBRUksV0FBVzZILEVBQU0yRyxHQUViLElBQUlDLEVBQVN6TCxTQUFTa0QsY0FBYyxPQUNwQ3VJLEVBQU83SyxhQUFhLFFBQVMsMEJBRTdCLElBQUk4SyxFQUFRLEVBQUFuSSxRQUFRTCxjQUFjLFNBR2xDLEVBQUFLLFFBQVE0SCxjQUFjTyxFQUFPLENBQ3pCLE1BQVMsaUJBQ1QsS0FBUSxPQUNSLE1BQVNGLEVBQU1uRSxPQUNmLEdBQU0saUJBQWlCbUUsRUFBTTdKLEtBRWpDK0osRUFBTWxCLE9BQVMsS0FDWGdCLEVBQU1uRSxPQUE0QnFFLEVBQU94TixNQUN6Q3dDLFFBQVFDLElBQUk2SyxFQUFNbkUsU0FHdEJvRSxFQUFPMUgsWUFBWTJILEdBQ25CN0csRUFBS2QsWUFBWTBIOzs7Ozs7dUZDeEJ6QixZQUFBek8sRUFBQSxrQkFBcUMsbURBQVEsTTs7Ozs7O3dLQ0E3Qyw4QkFFQSxtQkFFSSxXQUFXNkgsRUFBTTJHLEdBQ2IsSUFBSUMsRUFBU3pMLFNBQVNrRCxjQUFjLE9BQ3BDdUksRUFBTzdLLGFBQWEsUUFBUywwQkFFN0I0SyxFQUFNM0QsUUFBUTlHLFFBQVVrSCxJQUNwQixJQUFJK0QsRUFBSyxFQUFBekksUUFBUUwsY0FBYyxRQUFTLENBQ3BDLEtBQVEsUUFDUixHQUFNLGNBQWNzSSxFQUFNN0osR0FDMUIsTUFBVXNHLEVBQU8vSixNQUFNLEtBR3ZCb00sRUFBUSxFQUFBL0csUUFBUUwsY0FBYyxTQUNsQ29ILEVBQU05RyxVQUFZeUUsRUFBT3FDLE1BRXpCLElBQUkyQixFQUFPLEVBQUExSSxRQUFRTCxjQUFjLE9BQ2pDK0ksRUFBS2xJLFlBQVlpSSxHQUNqQkMsRUFBS2xJLFlBQVl1RyxHQUNqQm1CLEVBQU8xSCxZQUFZa0ksR0FFbkJELEVBQUV2SSxRQUFXQyxJQUNUaEQsUUFBUUMsSUFBSStDLEVBQUd6QixRQUNmdUosRUFBTW5FLE9BQTRCM0QsRUFBR3pCLE9BQVEvRCxNQUM3Q3dDLFFBQVFDLElBQUk2SyxFQUFNbkUsV0FHMUJ4QyxFQUFLZCxZQUFZMEg7Ozs7Ozt1RkM3QnpCLFlBQUF6TyxFQUFBLGtCQUFxQyxzREFBUSxNOzs7Ozs7MktDQTdDLDhCQUVBLHNCQUVJLFdBQVc2SCxFQUFNMkcsR0FDYixJQUFJQyxFQUFTekwsU0FBU2tELGNBQWMsT0FDcEN1SSxFQUFPN0ssYUFBYSxRQUFTLDBCQUU3QjRLLEVBQU0zRCxRQUFROUcsUUFBVWtILElBRXBCLElBQUkrRCxFQUFLLEVBQUF6SSxRQUFRTCxjQUFjLFFBQVMsQ0FDcEMsS0FBUSxXQUNSLEtBQVNzSSxFQUFNN0osR0FDZixNQUFVc0csRUFBTy9KLE1BQU0sR0FDdkIsR0FBTytKLEVBQU8vSixNQUFNLEtBSXhCLElBQUssSUFBSWpCLEVBQUksRUFBR0EsRUFBSXVPLEVBQU1uRSxPQUFPMUgsT0FBUTFDLElBQ2pDZ0wsRUFBTy9KLE1BQU0sS0FBTXNOLEVBQU1uRSxPQUFPcEssSUFDaEMsRUFBQXNHLFFBQVE0SCxjQUFjYSxFQUFHLENBQ3JCLFNBQVcsSUFLdkIsSUFBSTFCLEVBQVEsRUFBQS9HLFFBQVFMLGNBQWMsU0FDbENvSCxFQUFNOUcsVUFBWXlFLEVBQU9xQyxNQUV6QixJQUFJMkIsRUFBTyxFQUFBMUksUUFBUUwsY0FBYyxPQUNqQytJLEVBQUtsSSxZQUFZaUksR0FDakJDLEVBQUtsSSxZQUFZdUcsR0FDakJtQixFQUFPMUgsWUFBWWtJLEdBRW5CRCxFQUFFdkksUUFBV0MsSUFDVCxJQUFJd0ksRUFBZWxNLFNBQVNDLGlCQUFpQiw4QkFBOEJ1TCxFQUFNN0osR0FBRyxjQUNoRndLLEVBQU0sR0FDVkQsRUFBYW5MLFFBQVVzSixJQUNuQjhCLEVBQUk5SyxLQUF3QmdKLEVBQU1uTSxTQUV0Q3NOLEVBQU1uRSxPQUFTOEUsS0FHdkJ0SCxFQUFLZCxZQUFZMEg7Ozs7Ozt1RkMzQ3pCLFlBQUF6TyxFQUFBLGtCQUFxQyxzREFBUSxNOzs7Ozs7MktDQTdDLDhCQUVBLHNCQUVJLFdBQVc2SCxFQUFNMkcsR0FFYixJQUFJQyxFQUFTekwsU0FBU2tELGNBQWMsT0FDcEN1SSxFQUFPN0ssYUFBYSxRQUFTLDBCQUM3QixJQUFJOEssRUFBUTFMLFNBQVNrRCxjQUFjLFlBR25DLEVBQUFLLFFBQVE0SCxjQUFjTyxFQUFPLENBQ3pCLE1BQVMsaUJBQ1QsS0FBUSxFQUNSLE1BQVNGLEVBQU1uRSxPQUNmLEdBQU0saUJBQWlCbUUsRUFBTTdKLEtBR2pDK0osRUFBTWxCLE9BQVMsS0FDWGdCLEVBQU1uRSxPQUErQnFFLEVBQU94TixNQUM1Q3dDLFFBQVFDLElBQUk2SyxFQUFNbkUsU0FFdEJvRSxFQUFPMUgsWUFBWTJILEdBQ25CN0csRUFBS2QsWUFBWTBIOzs7Ozs7dUZDdkJ6QixZQUFBek8sRUFBQSxrQkFBcUMsa0RBQVEsTTs7Ozs7O3VLQ0E3Qyw4QkFHQSxNQUFhZ04sRUFXVCxXQUFXbkYsRUFBTTJHLEdBRVcsR0FBckJBLEVBQU1uRSxPQUFPMUgsU0FDWjZMLEVBQU1uRSxPQUFTLElBR25CLElBQUlvRSxFQUFTekwsU0FBU2tELGNBQWMsT0FDcEN1SSxFQUFPN0ssYUFBYSxRQUFTLDBCQUM3QjZLLEVBQU83SyxhQUFhLFFBQVMsZ0JBRzdCLElBQUl3TCxFQUFPcE0sU0FBU2tELGNBQWMsT0FDbEN1SSxFQUFPN0ssYUFBYSxRQUFTLFFBRzFCNEssRUFBTW5FLFFBQ0xtRSxFQUFNbkUsT0FBT3RHLFFBQVE3QyxJQUNqQixHQUFHQSxHQUFTQSxFQUFNeUIsT0FBTyxFQUFFLENBQ3ZCLElBQUkwTSxFQUFNck0sU0FBU2tELGNBQWMsUUFDakNtSixFQUFJekwsYUFBYSxLQUFNLE9BQU80SyxFQUFNN0osR0FBRyxJQUFJekQsR0FDM0NtTyxFQUFJN0ksVUFBWXRGLEVBRWhCLElBQUlvRixFQUFTLEVBQUFDLFFBQVFMLGNBQWMsU0FBVSxDQUFDLE1BQVEsaUJBQWtCLEtBQU8sV0FDL0VJLEVBQU9tQixVQUFZLElBQ25CbkIsRUFBT0csUUFBV0MsSUFDZDBJLEVBQUt6SSxZQUFZMEksR0FDakJiLEVBQU1uRSxPQUFTbUUsRUFBTW5FLE9BQU94RCxRQUFPLFNBQVNDLEdBQU0sT0FBT0EsRUFBR1IsRUFBT2dKLFdBQWFELEVBQUk3SSxjQUV4RjZJLEVBQUl0SSxZQUFZVCxHQUNoQjhJLEVBQUtySSxZQUFZc0ksTUFLN0IsSUFBSVgsRUFBUSxFQUFBbkksUUFBUUwsY0FBYyxRQUFTLENBQ3ZDLE1BQVMsUUFJYndJLEVBQU12SCxpQkFBaUIsWUFBWSxTQUFTb0ksR0FDeEN2QyxFQUFVd0Msa0JBQWtCRCxFQUFPYixFQUFPRixFQUFPWSxNQUdyRFYsRUFBTWxCLE9BQVMsS0FDWFIsRUFBVXdDLGtCQUFrQkQsTUFBT2IsRUFBT0YsRUFBT1ksR0FBTSxJQVUzRFgsRUFBTzFILFlBQVlxSSxHQUNuQlgsRUFBTzFILFlBQVkySCxHQUNuQjdHLEVBQUtkLFlBQVkwSCxHQUlyQix5QkFBeUJjLEVBQU9iLEVBQU9GLEVBQU9ZLEVBQU1LLEdBQXVCLEdBRXZFLEdBQUlBLEdBQThCLFVBQWRGLEVBQU0vTixLQUFpQyxNQUFkK04sRUFBTS9OLEtBQWdDLEtBQWpCK04sRUFBTUcsUUFBZ0IsQ0FDcEZILEVBQU1wSyxpQkFDTixJQUFJakUsRUFBMkJ3TixFQUFPeE4sTUFBTXlPLE9BRTVDLEdBREFqTSxRQUFRQyxJQUFJekMsR0FDVEEsR0FBU0EsRUFBTXlCLE9BQU8sRUFBRSxDQUNKK0wsRUFBT3hOLE1BQVEsS0FFbENzTixFQUFNbkUsT0FBT2hHLEtBQUtuRCxHQUVsQixJQUFJbU8sRUFBTXJNLFNBQVNrRCxjQUFjLFFBQ2pDbUosRUFBSTdJLFVBQVl0RixFQUVoQixJQUFJb0YsRUFBUyxFQUFBQyxRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLE1BQU8sS0FBTyxXQUNwRUksRUFBT0UsVUFBWSxpREFDbkJGLEVBQU9HLFFBQVdDLElBQ2QwSSxFQUFLekksWUFBWTBJLEdBQ2pCYixFQUFNbkUsT0FBU21FLEVBQU1uRSxPQUFPeEQsUUFBTyxTQUFTQyxHQUFNLE9BQU9BLEVBQUdSLEVBQU9nSixXQUFhRCxFQUFJN0ksY0FFeEY2SSxFQUFJdEksWUFBWVQsR0FDaEI4SSxFQUFLckksWUFBWXNJLE1BNUZqQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi4vZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYnVpbGRlci50c1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnRzXCIpOyIsIlxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuL3NlY3Rpb24nO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tICcuL2J1aWxkZXInO1xuLy8gaW1wb3J0ICogYXMgZGF0YSBmcm9tICcuL2RhdGEuanNvbic7XG4vLyBpbXBvcnQgQ2hhcnQgZnJvbSAnY2hhcnRqcyc7XG4vLyBpbXBvcnQgZm9udGF3ZXNvbWUgZnJvbSAnQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWUnO1xuXG5jb25zdCBkYXRhID0gcmVxdWlyZSgnLi9kYXRhLmpzb24nKTtcbi8vIGNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb25IYXMoYSwgYikgeyAvL2hlbHBlciBmdW5jdGlvbiAoc2VlIGJlbG93KVxuICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGEubGVuZ3RoOyBpIDwgbGVuOyBpICsrKSB7XG4gICAgICAgIGlmKGFbaV0gPT0gYikgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGZpbmRQYXJlbnRCeVNlbGVjdG9yKGVsbSwgc2VsZWN0b3IpIHtcbiAgICB2YXIgYWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgdmFyIGN1ciA9IGVsbS5wYXJlbnROb2RlO1xuICAgIHdoaWxlKGN1ciAmJiAhY29sbGVjdGlvbkhhcyhhbGwsIGN1cikpIHsgLy9rZWVwIGdvaW5nIHVwIHVudGlsIHlvdSBmaW5kIGEgbWF0Y2hcbiAgICAgICAgY3VyID0gY3VyLnBhcmVudE5vZGU7IC8vZ28gdXBcbiAgICB9XG4gICAgcmV0dXJuIGN1cjsgLy93aWxsIHJldHVybiBudWxsIGlmIG5vdCBmb3VuZFxufVxuZnVuY3Rpb24gc3dhcERvbShhLGIpIFxuICAgIHtcbiAgICAgICAgdmFyIGFQYXJlbnQgPSBhLnBhcmVudE5vZGU7XG4gICAgICAgIHZhciBiUGFyZW50ID0gYi5wYXJlbnROb2RlO1xuXG4gICAgICAgIHZhciBhSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIGJIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgIGFQYXJlbnQucmVwbGFjZUNoaWxkKGFIb2xkZXIsYSk7XG4gICAgICAgIGJQYXJlbnQucmVwbGFjZUNoaWxkKGJIb2xkZXIsYik7XG5cbiAgICAgICAgYVBhcmVudC5yZXBsYWNlQ2hpbGQoYixhSG9sZGVyKTtcbiAgICAgICAgYlBhcmVudC5yZXBsYWNlQ2hpbGQoYSxiSG9sZGVyKTsgICAgXG4gICAgfVxuXG5cblxuXG5leHBvcnQgY2xhc3MgUGl4aXVtRm9ybSB7XG4gICAganNvbjpGb3JtRGF0YTtcbiAgICBkaXY6c3RyaW5nO1xuICAgIHNlY3Rpb25zOlNlY3Rpb25bXTtcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgICBtYWluTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgdGl0bGVOb2RlOiBIVE1MRWxlbWVudDtcbiAgICBjdXJyZW50Tm9kZTogbnVtYmVyO1xuICAgIG1vZGU6c3RyaW5nO1xuICAgIGRlYnVnOmJvb2xlYW47XG4gICAgc2luZ2xlU2VjdGlvbjpib29sZWFuO1xuICAgIHNhdmVCdG46IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IocGFyYW1zOkZvcm1EYXRhKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG5cbiAgICAgICAgaWYoIXBhcmFtc1tcImRpdlwiXSl7XG4gICAgICAgICAgICBhbGVydCgnRGl2IG5vdCBmb3VuZC4gQ2Fubm90IGRpc3BsYXkgdGhlIGZvcm0nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpdiA9IHBhcmFtc1tcImRpdlwiXTtcbiAgICAgICAgdGhpcy5tYWluTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2KTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5tYWluTm9kZSk7XG4gICAgICAgIHRoaXMubWFpbk5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb250YWluZXIgZm9ybS1jb250YWluZXIgZHJvcC10YXJnZXRzXCIpO1xuXG4gICAgICAgIGlmKHBhcmFtc1tcImRhdGFcIl0pe1xuICAgICAgICAgICAgdGhpcy5qc29uID0gcGFyYW1zW1wiZGF0YVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuanNvbiA9IGRhdGE7Ly9KU09OLnBhcnNlKCBkYXRhICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIE9OTFkgQUxMT1cgT05FIFNFQ1RJT04gRk9STVxuICAgICAgICBpZihwYXJhbXNbXCJzaW5nbGVTZWN0aW9uXCJdKXtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VjdGlvbiA9IHBhcmFtc1tcInNpbmdsZVNlY3Rpb25cIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLyBCVUlMRCB0aGUgc2VjdGlvbiBzdWIgZWxlbWVudCAobm8gZ2VuZXJhdGVkIEhUTUwgYXQgdGhpcyBzdGFnZSB5ZXQpXG4gICAgICAgIGlmKHRoaXMuanNvbiAmJiB0aGlzLmpzb25bXCJzZWN0aW9uc1wiXSl7XG4gICAgICAgICAgICBsZXQgc2VjcyA9IHRoaXMuanNvbltcInNlY3Rpb25zXCJdO1xuICAgICAgICAgICAgc2Vjcy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlY3Rpb25Nb2RlbCA9IG5ldyBTZWN0aW9uKHRoaXMubWFpbk5vZGUsIHNlYywgKCghdGhpcy5zaW5nbGVTZWN0aW9uKSA/IChuZXh0U2xpZGU6Ym9vbGVhbikgPT50aGlzLm1vdmVTZWN0aW9uKG5leHRTbGlkZSkgOiBudWxsICkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWN0aW9uTW9kZWwpO1xuXG4gICAgICAgICAgICAgICAgLy8gbGV0IGl0ZW0gPSBzZWN0aW9uTW9kZWwubm9kZTtcbiAgICAgICAgICAgICAgICAvLyBpdGVtLm9uZHJhZ3N0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5kcmFnU3RhcnQoZSk7XG4gICAgICAgICAgICAgICAgLy8gfTtcbiAgICAgICAgICAgICAgICAvL2l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBpbml0IHRoZSBtb2R1bGUuXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5qc29uKTtcbiAgICAgICAgfSAgICAgXG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIFNUQVJUIFRIRSBBUFBMSUNBVElPTiBJTiBkZWJ1Z1xuICAgICAgICAgaWYocGFyYW1zW1wiZGVidWdcIl0pe1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IHBhcmFtc1tcImRlYnVnXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB9ICAgICAgIFxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgU1RBUlQgVEhFIEFQUExJQ0FUSU9OIElOIGJ1aWxkIE9SIHJ1biBNT0RFXG4gICAgICAgIGlmKHBhcmFtc1tcIm1vZGVcIl0pe1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gcGFyYW1zW1wibW9kZVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdydW4nO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMubW9kZSA9PT0gJ2J1aWxkJyl7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0IEluZGV4IGZyb20gSUQgXG4gICAgICovXG4gICAgZ2V0SW5kZXhGcm9tU2VjdGlvbklkKF9pZDpzdHJpbmcpe1xuICAgICAgICBmb3IobGV0IGk9MCA7IGk8dGhpcy5zZWN0aW9ucy5sZW5ndGggOyBpKyspe1xuICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1tpXS5pZCA9PSBfaWQpIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN3YXAgdG8gc2VjdGlvbiBlbGVtZW50IGZyb20gdGhlIHRhYmxlXG4gICAgICogQHBhcmFtIHMxIFxuICAgICAqIEBwYXJhbSBzMiBcbiAgICAgKi9cbiAgICBzd2FwU2VjdGlvbnMoczFfaWQ6bnVtYmVyLCBzMl9pZDpudW1iZXIpe1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25zKTtcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnNlY3Rpb25zW3MxX2lkXTtcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzMV9pZF0gPSB0aGlzLnNlY3Rpb25zW3MyX2lkXTtcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzMl9pZF0gPSB0ZW1wO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25zKTtcbiAgICB9XG5cbiAgICBcblxuXG4gICAgZHJhZ1N0YXJ0KGUpe1xuICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZS50YXJnZXQuaWQpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIC8vIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgICAgICBpZih0aGVfcGFyZW50KXsgXG4gICAgICAgICAgICAgICAgLy8gdGhlX3BhcmVudC5jaGlsZHJlblswXS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwibm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9XG4gICAgZHJhZ0VudGVyKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgdGhlX3BhcmVudCA9IGZpbmRQYXJlbnRCeVNlbGVjdG9yKGUudGFyZ2V0LCBcIi5kcm9wLXRhcmdldFwiKTtcbiAgICAgICAgaWYodGhlX3BhcmVudCkge1xuICAgICAgICAgICAgdGhlX3BhcmVudC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkcmFnT3ZlcihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIGlmKHRoZV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZHJhZ0xlYXZlKGUpIHtcbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIGlmKHRoZV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZHJvcChlKSB7XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpO1xuXG4gICAgICAgIC8vIGdldCB0aGUgZHJhZ2dhYmxlIGVsZW1lbnRcbiAgICAgICAgY29uc3QgaWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgIGxldCBkcmFnZ2FibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG5cbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIFxuICAgICAgICB0aGVfcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpO1xuICAgICAgICBkcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG5cbiAgICAgICAgaWYoIXRoZV9wYXJlbnQpe1xuICAgICAgICAgICAgYWxlcnQoXCJub3QgcGFyZW50IGZvdW5kXCIpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGxldCBpZDEgPSB0aGlzLmdldEluZGV4RnJvbVNlY3Rpb25JZCh0aGVfcGFyZW50LmNoaWxkcmVuWzBdLmlkKTtcbiAgICAgICAgICAgIGxldCBpZDIgPSB0aGlzLmdldEluZGV4RnJvbVNlY3Rpb25JZChkcmFnZ2FibGUuaWQpO1xuICAgIFxuICAgICAgICAgICAgaWYoaWQxICE9IGlkMil7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2FwU2VjdGlvbnMoaWQxLCBpZDIpO1xuICAgICAgICAgICAgICAgIHN3YXBEb20odGhlX3BhcmVudC5jaGlsZHJlblswXSwgZHJhZ2dhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgXG5cbiAgICAgICAgLy8gc3dpdGNoIHRoZSAyIGVsZW1lbnQgaW4gdGhlIFNFQ1RJT04gTElTVFxuICAgICAgICAvLyB0aGlzLnNlY3Rpb25zXG4gICAgXG4gICAgICAgIC8vIGxldCB0YXJnZXRFbGVtID0gZS50YXJnZXQuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAvLyBsZXQgZGVzdEVsZW0gPSBkcmFnZ2FibGUuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgIC8vIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZGVzdEVsZW0sIGUudGFyZ2V0LnBhcmVudE5vZGUpOyAgLy8gcmVtb3ZlIGNoaWxkcmVuXG4gICAgICAgIC8vIGRyYWdnYWJsZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRhcmdldEVsZW0sIGRyYWdnYWJsZS5wYXJlbnROb2RlKTtcbiAgICBcbiAgICAgICAgLy8gLy8gZGlzcGxheSB0aGUgZHJhZ2dhYmxlIGVsZW1lbnRcbiAgICAgICAgLy8gZHJhZ2dhYmxlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBcblxuXG4gICAgLyoqXG4gICAgICogRW50ZXIgQlVJTEQgTU9ERSBmb3IgdXNlciB0byBlZGl0IHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQoKXtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgc2VjLmJ1aWxkKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICAgICAgaWYoIXRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFNFQ1RJT04gQlROXG4gICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICAgICAgZGVsQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc2VjLmNvbnRlbnRXcmFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBzZWMuaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNlYy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChkZWxCdG4pO1xuICAgICAgICAgICAgfSAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgaXRlbSA9IHNlYy5jb250ZW50V3JhcHBlcjtcbiAgICAgICAgICAgIGl0ZW0ub25kcmFnc3RhcnQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0KGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyBnZXQgYWxsIHRoZSBESVYgdGFnZ2VzIHBpeGl1bS1ib3ggYW5kIGNvbm5lY3QgbGlzdGVuZXIgZm9yIGRyYWcgLyBkcm9wIGV2ZW50c1xuICAgICAgICBsZXQgYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBpeGl1bS1ib3hcIik7XG4gICAgICAgIGJveGVzLmZvckVhY2goYm94ID0+IHtcbiAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmRyYWdFbnRlcilcbiAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXIpO1xuICAgICAgICAgICAgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlKTtcbiAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGUpID0+IHRoaXMuZHJvcChlKSk7XG4gICAgICAgIH0pO1xuXG5cblxuICAgICAgICBpZighdGhpcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgIC8vIEJVSUxEIEFERCBTRUNUSU9OIEJUTlxuICAgICAgICAgICAgbGV0IGFkZEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICAgICAgYWRkQnV0dG9uLmlubmVyVGV4dCA9ICcrJzsgIFxuICAgICAgICAgICAgYWRkQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICAgICAgeyAgIFxuICAgICAgICAgICAgICAgIGxldCBidG5TZWNBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGxldCBzZWMgPSBuZXcgU2VjdGlvbih0aGlzLm1haW5Ob2RlLCBudWxsLCAoIChuZXh0U2xpZGU6Ym9vbGVhbikgPT50aGlzLm1vdmVTZWN0aW9uKG5leHRTbGlkZSkgKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucy5wdXNoKHNlYyk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChidG5TZWNBZGQpO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLnJlbW92ZUNoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlYy5idWlsZCh0aGlzLm1haW5Ob2RlKTtcbiAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgU0VDVElPTiBCVE5cbiAgICAgICAgICAgICAgICBsZXQgYnRuU2VjRGVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwiaWRcIjpcImJ0bi1kZWxldGUtc2VjdGlvbi1cIitzZWMuaWR9KTtcbiAgICAgICAgICAgICAgICBidG5TZWNEZWwuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+YDsgIFxuICAgICAgICAgICAgICAgIGJ0blNlY0RlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzZWMubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gc2VjLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZWMuY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQoYnRuU2VjRGVsKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoYnRuU2VjQWRkKTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07ICBcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJVSUxEIFRIRSBTV0lUQ0ggVUkgQlVUVE9OIFRPIERPIFRPIFJVTiBNT0RFIElGIERFQlVHLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHN3aXRjaEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tcHJpbWFyeSBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24uaW5uZXJUZXh0ID0gXCJHTyBUTyBSVU5cIjsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIGZvciB1c2VyIHRvIGFuc3dlciB0aGUgcXVlc3Rpb25zXG4gICAgICovXG4gICAgcnVuKCl7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgIHNlYy5ydW4odGhpcy5tYWluTm9kZSk7XG4gICAgICAgIH0pOyBcblxuICAgICAgICAvL0NyZWF0ZSBTYXZlIGJ0blxuICAgICAgICB0aGlzLnNhdmVCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcInN1Ym1pdFwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1maW5hbC1idG5cIn0pOyAgXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5pbm5lclRleHQgPSBcIlNhdmVcIjsgIFxuICAgICAgICB0aGlzLnNhdmVCdG4ub25jbGljayA9IChlKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVKc29uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZm9ybVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsgIFxuICAgICAgICBpZigodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKSAmJiAhdGhpcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgIC8vUmVtb3ZlIE5leHQgYnRuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLmFmdGVyKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgIC8vRGlzcGxheSBzYXZlQnRuXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLm5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zYXZlQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLSBERUJVRyBTQVZFIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBsZXQgc2F2ZUJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwiaWRcIjpcImZvcm0tYnVpbGRlci1zYXZlLWJ0blwifSk7ICBcbiAgICAgICAgc2F2ZUJ1dHRvbi5pbm5lclRleHQgPSBcIlNBVkVcIjsgIFxuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5jb21waWxlSnNvbigpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzYXZlQnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQlVJTEQgVEhFIFNXSVRDSCBVSSBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHN3aXRjaEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tcHJpbWFyeSBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24uaW5uZXJUZXh0ID0gXCJHTyBUTyBCVUlMRCBNT0RFXCI7ICAgXG4gICAgICAgIHN3aXRjaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIHRoaXMuYnVpbGQoKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICAgICB0aGlzLm1haW5Ob2RlLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwibGlzdFwiPjwhLS0gU29ydGFibGUgLS0+XG4gICAgICAgIC8vICAgICA8ZGl2IGNsYXNzPVwiaXRlbVwiPiBJdGVtIDFcbiAgICAgICAgLy8gICAgICAgPGRpdiBjbGFzcz1cInN1Ymxpc3RcIj48IS0tIE5lc3RlZCBTb3J0YWJsZTsgV3JhcHBpbmcgY29udGFpbmVyIG5lZWRlZCAtLT5cbiAgICAgICAgLy8gICAgICAgICA8ZGl2IGNsYXNzPVwic3ViaXRlbVwiPlN1Yml0ZW0gMTwvZGl2PlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJpdGVtXCI+U3ViaXRlbSAyPC9kaXY+XG4gICAgICAgIC8vICAgICAgIDwvZGl2PlxuICAgICAgICAvLyAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICA8ZGl2IGNsYXNzPVwiaXRlbVwiPiBJdGVtIDIgPC9kaXY+XG4gICAgICAgIC8vICAgPC9kaXY+YDtcblxuICAgICAgICAvLyBsZXQgdGVtcCA9IHNvcnRhYmxlKHRoaXMubWFpbk5vZGUsIHtcbiAgICAgICAgLy8gICAgIGNvcHk6dHJ1ZSAvLyBkZWZhdWx0IHRvIGZhbHNlXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHRlbXApO1xuXG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgIH1cblxuICAgIHJlc3VsdCgpe1xuICAgICAgICAvLyA8Y2FudmFzIGlkPVwibXlDaGFydFwiIHdpZHRoPVwiNDAwXCIgaGVpZ2h0PVwiNDAwXCI+PC9jYW52YVxuICAgICAgICAvLyBsZXQgY2hhcnRIb2xkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiwge1xuICAgICAgICAvLyAgICAgXCJpZFwiOlwiY2hhcnRkaXZcIixcbiAgICAgICAgLy8gICAgIFwid2lkdGhcIjogNDAwLFxuICAgICAgICAvLyAgICAgXCJoZWlnaHRcIjogNDAwXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIC8vIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuICAgICAgICAvLyA7XG5cbiAgICAgICAgLy8gdmFyIG15TGluZUNoYXJ0ID0gbmV3IENoYXJ0KGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIHtcbiAgICAgICAgLy8gICAgIHR5cGU6ICdsaW5lJyxcbiAgICAgICAgLy8gICAgIGRhdGE6IHtcbiAgICAgICAgLy8gICAgICAgICBkYXRhc2V0czogW3tcbiAgICAgICAgLy8gICAgICAgICAgICAgbGFiZWw6ICdUZXN0IERhdGFzZXQnLFxuICAgICAgICAvLyAgICAgICAgICAgICBkYXRhOiBbe1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeDogLTEwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeTogMFxuICAgICAgICAvLyAgICAgICAgICAgICB9LCB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeTogMTBcbiAgICAgICAgLy8gICAgICAgICAgICAgfSwge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeDogMTAsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB5OiA1XG4gICAgICAgIC8vICAgICAgICAgICAgIH1dXG4gICAgICAgIC8vICAgICAgICAgfV1cbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICAvL29wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgLy8gfSk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBBTEwgdGhlIG5vZGVzXG4gICAgICovXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5tYWluTm9kZSl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmlubmVySFRNTCA9ICcnOyAgLy8gY2xlYXIgYWxsIHRoZSBzdWIgbm9kZXNcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgICAgIHNlYy5jbGVhcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cblxuXG4gICAgZGlzcGxheSgpe1xuICAgICAgICAvLyB0aGlzLm91dHB1dCA9IFwiXCI7XG4gICAgICAgIC8vIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlY3Rpb24pID0+IHtcbiAgICAgICAgLy8gICAgIHRoaXMub3V0cHV0ICs9IHNlY3Rpb24uZGlzcGxheSgpO1xuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdGhpcy5tYWluTm9kZS5pbm5lckhUTUwgPSB0aGlzLm91dHB1dDtcbiAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MCAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6IGFueVtdO1xuICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjOlNlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGFyci5wdXNoKHNlYy5jb21waWxlSnNvbigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KCB7XCJzZWN0aW9uc1wiOmFycn0gKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2ZpbmFsT3V0cHV0Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGZpbmFsT3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIGZpbmFsT3V0cHV0O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogTW92ZSB0aGUgc2xpZGVyIG9yIGRpc3BsYXkgdG8gdGhlIG5leHQgc2VjdGlvblxuICAgICAqL1xuICAgIG1vdmVTZWN0aW9uKG5leHRTbGlkZTpib29sZWFuKXtcbiAgICAgICAgLy8gaWYgbW92ZSBmb3J3YXJkXG4gICAgICAgIGlmKG5leHRTbGlkZSl7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSBJIGFtIGFsbG93ZWQgdG8gbW92ZSB0byB0aGUgbmV4dCBzbGlkZSBpZiB0aGVyZSBpcyBvbmVcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTAgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlKys7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLy9EaXNwbGF5IFByZXZpb3VzIGJ0blxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcHJldmlvdXMtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlID09IHRoaXMuc2VjdGlvbnMubGVuZ3RoLTEpe1xuICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5hZnRlcih0aGlzLnNhdmVCdG4pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRGlzcGxheSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgYWxyZWFkeSBhcmUgb24gdGhlIG5leHQgc2xpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgSSBhbSBhbGxvd2VkIHRvIG1vdmUgdG8gdGhlIHByZXZpb3VzIHNsaWRlIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MSAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLS07XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLy9EaXNwbGF5IE5leHQgYnRuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT09MCkge1xuICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSBQcmV2aW91cyBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2aW91cy1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgYWxyZWFkeSBhcmUgb24gdGhlIGZpcnN0IHNsaWRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9zZWN0aW9uLnRzXCIpOyIsImltcG9ydCB7QmxvY2ssIEJsb2NrVHlwZX0gZnJvbSBcIi4vYmxvY2svYmxvY2tcIjtcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4vYnVpbGRlclwiO1xuXG4vKipcbiAqIFNFQ1RJT04gY2xhc3MgY29udGFpbnMgYSBwb3RlbnRpYWwgbGlzdCBvZiBxdWVzdGlvbiB0aGF0IGlzIGRpc3BsYXllZCBvbiB0aGUgc2FtZSBwYWdlIFxuICovXG5leHBvcnQgY2xhc3MgU2VjdGlvbntcbiAgICBibG9ja3M6QmxvY2tbXTsgXG4gICAgdGl0bGU6IHN0cmluZzsgICBcbiAgICAvLyBuYW1lOiBzdHJpbmc7XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIHBhcmVudDogSFRNTEVsZW1lbnQ7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY2FsbGJhY2s6IEZ1bmN0aW9uO1xuICAgIGNvbnRlbnRXcmFwcGVyOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKF9wYXJlbnQ6SFRNTEVsZW1lbnQsIF9qc29uOkZvcm1EYXRhLCBfY2FsbGJhY2s6RnVuY3Rpb24pe1xuICAgICAgICB0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gW107XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBfY2FsbGJhY2s7XG4gICAgICAgIHRoaXMudGl0bGUgPSAnJztcbiAgICAgICAgLy8gdGhpcy5uYW1lID0gXCJkZWZhdWx0X25hbWVcIjtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcInRpdGxlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gX2pzb25bXCJ0aXRsZVwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmKF9qc29uW1wibmFtZVwiXSl7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5uYW1lID0gX2pzb25bXCJuYW1lXCJdO1xuICAgICAgICAgICAgLy8gfVxuICAgIFxuICAgICAgICAgICAgaWYoX2pzb25bXCJibG9ja3NcIl0pe1xuICAgICAgICAgICAgICAgIF9qc29uW1wiYmxvY2tzXCJdLmZvckVhY2goIChiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja01vZGVsID0gbmV3IEJsb2NrKGIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsb2NrTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAvL2Jsb2NrTW9kZWwucnVuKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGZvcm0gaW4gQlVJTERFUiBNT0RFIGZvciB0aGUgdXNlciB0byBlZGl0IHRoZSBmb3JtIGl0c2VsZlxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tYm94LWNvbnRlbnRcIixcbiAgICAgICAgICAgIFwiZHJhZ2dhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICBcImlkXCI6IHRoaXMuaWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJveCBkcm9wLXRhcmdldFwiLFxuICAgICAgICAgICAgXCJpZFwiOlwiaG9sZGVyLVwiK3RoaXMuaWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gdGhpcy5ub2RlLm9uZHJhZ3N0YXJ0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcImRyYWcgc3RhcnRcIik7XG4gICAgICAgIC8vICAgICAoSFRNTEVsZW1lbnQoZXZlbnQudGFyZ2V0KSkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIC8vIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIHNlY3Rpb24gaGVhZGVyIGRpdiB3aXRoIHRpdGxlIGFuZCBuYW1lIGlucHV0XG4gICAgICAgIGxldCBub2RlSGVhZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ibG9jay1idWlsZCBwaXhpdW0tYmxvY2stYnVpbGQtaGVhZGVyXCJ9KTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVIZWFkZXIsIHRoaXMuaWQsIHRoaXMudGl0bGUsIFwiVGl0bGUgU2VjdGlvblwiLCAodmFsKSA9PiB7dGhpcy50aXRsZT12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZUhlYWRlcik7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiZm9ybS1idWlsZGVyLWJ0biBidXR0b24tZGVsZXRlXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwic3R5bGVcIjpcImRpc3BsYXk6YmxvY2tcIn0pO1xuICAgICAgICAgICAgZGVsQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7IFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBibGsubm9kZS5hcHBlbmRDaGlsZChkZWxCdG4pO1xuXG4gICAgICAgICAgICBibGsuYnVpbGQodGhpcy5jb250ZW50V3JhcHBlciwgZGVsQnRuKTtcblxuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTiBBQ1RJT05cbiAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLnJlbW92ZUNoaWxkKGJsay5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHRoaXMuYmxvY2tzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gYmxrLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gQlVJTEQgQUREIEJPTENLIEJUTlxuICAgICAgICBsZXQgYWRkQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIGFkZEJ1dHRvbi5pbm5lckhUTUwgPSAnKyc7ICBcbiAgICAgICAgYWRkQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBsZXQgYnRuQmxrQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgIC8vIEFERCBORVcgQk9MQ0tcbiAgICAgICAgICAgIGxldCBibGsgPSBuZXcgQmxvY2sobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsayk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLnJlbW92ZUNoaWxkKGJ0bkJsa0FkZCk7XG4gICAgICAgICAgICBsZXQgYnRuU2VjRGVsO1xuICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgYnRuU2VjRGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrdGhpcy5pZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5yZW1vdmVDaGlsZChidG5TZWNEZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxrLmJ1aWxkKHRoaXMuY29udGVudFdyYXBwZXIsIGZhbHNlLCBcIlwiKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgIGxldCBidG5CbGtEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImZvcm0tYnVpbGRlci1idG4gYnV0dG9uLWRlbGV0ZSBmbG9hdC1yaWdodFwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcInN0eWxlXCI6XCJkaXNwbGF5OmJsb2NrXCJ9KTtcbiAgICAgICAgICAgIGJ0bkJsa0RlbC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG4gICAgICAgICAgICBidG5CbGtEZWwub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5yZW1vdmVDaGlsZChibGsubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MgPSB0aGlzLmJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGJsay5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJsay5oZWFkZXIuaW5zZXJ0QmVmb3JlKGJ0bkJsa0RlbCwgYmxrLmhlYWRlci5maXJzdENoaWxkKTtcblxuICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChidG5CbGtBZGQpO1xuICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChidG5TZWNEZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgXG4gICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKHRoaXMuY29udGVudFdyYXBwZXIpO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIHRoZSBmb3JtIGZvciB1c2VyIHRvIGFuc3dlclxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIHJ1bihub2RlKXtcblxuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYm94XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBuYW1lTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgbmFtZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50aXRsZTtcbiAgICAgICAgbGV0IGhyTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoclwiKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5hbWVOb2RlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyTmFtZSk7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGIpID0+IHtcbiAgICAgICAgICAgIGIucnVuKHRoaXMubm9kZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdub2RlLnNpbmdsZVNlY3Rpb24nKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5jYWxsYmFjayk7XG4gICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgLy8gQlVJTEQgVEhFIEJVVFRPTi4gUFJFVklPVVMgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBsZXQgcHJldkJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwiaWRcIjogXCJidG4tcHJldmlvdXMtc2VjdGlvbi1cIit0aGlzLmlkLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIHByZXZCdXR0b24uaW5uZXJUZXh0ID0gXCJQcmV2aW91c1wiO1xuICAgICAgICAgICAgcHJldkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAgXG4gICAgICAgICAgICBwcmV2QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gVFJVRSBGT1IgTkVYVCBTTElERVxuICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQocHJldkJ1dHRvbik7XG5cbiAgICAgICAgICAgIC8vIEJVSUxEIFRIRSBCVVRUT04uIE5FWFQgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBsZXQgbmV4dEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwiaWRcIjogXCJidG4tbmV4dC1zZWN0aW9uLVwiK3RoaXMuaWQsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICAgICAgbmV4dEJ1dHRvbi5pbm5lclRleHQgPSBcIk5leHRcIjsgIFxuICAgICAgICAgICAgbmV4dEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUUlVFIEZPUiBORVhUIFNMSURFXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZm9ybS4uLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobmV4dEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubm9kZSl7XG4gICAgICAgICAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsaykgPT4ge1xuICAgICAgICAgICAgYmxrLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldE5vZGUoKXtcbiAgICAgICAgYWxlcnQodGhpcy5ub2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBjdXJyZW50IHNlY3Rpb25cbiAgICAgKi9cbiAgICBzaG93KCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGN1cnJlbnQgc2VjdGlvbiBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICBoaWRlKCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgRk9STSBoYXMgYmVlbiBmdWxseSBjb21wbGV0ZWQgLSBBbGwgYmxvY2tzIGhhdmUgYSB2YWxpZCBhbnN3ZXJcbiAgICAgKi9cbiAgICBpc0NvbXBsZXRlZCgpe1xuICAgICAgICBsZXQgaXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxrLmFuc3dlcik7XG4gICAgICAgICAgICBpZihibGsgJiYgKGJsay5hbnN3ZXIubGVuZ3RoPT0wKSAmJiAoYmxrLnR5cGUgIT09IEJsb2NrVHlwZS5OT0FOU1dFUikpe1xuICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNDb21wbGV0ZWQ7XG4gICAgfVxuXG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICBsZXQgYXJyOmFueVtdO1xuICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goYmxrLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHNlYyA9IHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogdGhpcy50aXRsZSxcbiAgICAgICAgICAgIFwiYmxvY2tzXCI6YXJyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlYztcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2sudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuaW1wb3J0IHtDaG9pY2V9IGZyb20gXCIuL2Nob2ljZVwiO1xuXG5pbXBvcnQge0Jsb2NrU2xpZGVyfSBmcm9tIFwiLi9ibG9ja1NsaWRlclwiO1xuaW1wb3J0IHtCbG9ja0ZyZWV0ZXh0fSBmcm9tIFwiLi9ibG9ja0ZyZWV0ZXh0XCI7XG5pbXBvcnQge0Jsb2NrUmFkaW99IGZyb20gXCIuL2Jsb2NrUmFkaW9cIjtcbmltcG9ydCB7IEJsb2NrQ2hlY2tib3ggfSBmcm9tIFwiLi9ibG9ja0NoZWNrYm94XCI7XG5pbXBvcnQge0Jsb2NrTG9uZ3RleHR9IGZyb20gXCIuL2Jsb2NrTG9uZ3RleHRcIjtcbmltcG9ydCB7QmxvY2tUYWdzfSBmcm9tIFwiLi9CbG9ja1RhZ3NcIjtcbi8vIGltcG9ydCB7QmxvY2tOb2Fuc3dlcn0gZnJvbSBcIi4vYmxvY2tOb2Fuc3dlclwiO1xuXG5leHBvcnQgZW51bSBCbG9ja1R5cGUge1xuICAgIEZSRUVURVhUID0gMSxcbiAgICBSQURJTyA9IDIsXG4gICAgU0xJREVSID0gMyxcbiAgICBDSEVDS0JPWCA9IDQsXG4gICAgTE9OR1RFWFQgPSA1LFxuICAgIE5PQU5TV0VSID0gNixcbiAgICBUQUdTID0gN1xufVxuXG5cbi8qKlxuICogQSBCbG9jayBpcyBhIGxpc3QgXG4gKi9cbmV4cG9ydCBjbGFzcyBCbG9ja3tcbiAgICB0eXBlOm51bWJlcjtcbiAgICB0ZXh0OnN0cmluZztcbiAgICBhbnN3ZXI6YW55O1xuICAgIG1pbjpzdHJpbmc7XG4gICAgbWF4OnN0cmluZztcbiAgICBzdGVwOnN0cmluZztcbiAgICBjaG9pY2VzOkNob2ljZVtdO1xuXG4gICAgaGVhZGVyOkhUTUxFbGVtZW50O1xuXG4gICAgb3V0cHV0OnN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAganNvbjphbnk7XG5cbiAgICBub2RlOiBIVE1MRWxlbWVudDtcblxuICAgIC8qXG4gICAgXCJ0aXRsZVwiOiBcIkRFTEVHQVRJT046IDxicj4gPGJyPiBIb3cgc2tpbGxlZCBkbyB5b3UgZmVlbCB0b2RheSBhYm91dCB5b3VyIGFiaWxpdHkgdG8gZGVsZWdhdGU/XCIsXG4gICAgXCJ0eXBlXCI6IDQsXG4gICAgXCJncm91cFwiOiAxLFxuICAgIFwibGFiZWxcIjogXG4gICAgKi9cblxuICAgIGNvbnN0cnVjdG9yKF9qc29uOkZvcm1EYXRhID0gbnVsbCl7XG4gICAgICAgIHRoaXMuanNvbiA9IF9qc29uO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLm1pbiA9IFwiXCI7XG4gICAgICAgIHRoaXMubWF4ID0gXCJcIjtcbiAgICAgICAgdGhpcy5zdGVwID0gXCJcIjtcbiAgICAgICAgdGhpcy5hbnN3ZXIgPSBcIlwiO1xuICAgICAgICB0aGlzLmNob2ljZXMgPSBbXTtcblxuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gICAgICAgIGlmKF9qc29uKXtcbiAgICAgICAgICAgIGlmKF9qc29uW1widGV4dFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gX2pzb25bXCJ0ZXh0XCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfanNvbltcInR5cGVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IF9qc29uW1widHlwZVwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSBcIlwiO1xuICAgICAgICAgICAgaWYoX2pzb25bXCJhbnN3ZXJcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMuYW5zd2VyID0gX2pzb25bXCJhbnN3ZXJcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1wibWluXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbiA9IF9qc29uW1wibWluXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX2pzb25bXCJtYXhcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubWF4ID0gX2pzb25bXCJtYXhcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfanNvbltcInN0ZXBcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMuc3RlcCA9IF9qc29uW1wic3RlcFwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodGhpcy50eXBlID09PSBCbG9ja1R5cGUuUkFESU8gfHwgdGhpcy50eXBlID09PSBCbG9ja1R5cGUuQ0hFQ0tCT1gpe1xuICAgICAgICAgICAgICAgIC8vIGxvYWQgYWRkaXRpb25hbCBkYXRhXG4gICAgICAgICAgICAgICAgaWYoX2pzb25bXCJjaG9pY2VzXCJdKXtcbiAgICAgICAgICAgICAgICAgICAgX2pzb25bXCJjaG9pY2VzXCJdLmZvckVhY2goY2hvaWNlSnNvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hvaWNlID0gbmV3IENob2ljZShjaG9pY2VKc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5wdXNoKGNob2ljZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL3RoaXMuY2hvaWNlcyA9IF9qc29uW1wiY2hvaWNlc1wiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYW5kIHJlbW92ZSBhbGwgdGhlIEhUTUwgTm9kZVxuICAgICAqL1xuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubm9kZSl7XG4gICAgICAgICAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB1c2VkIHRvIGJ1aWxkIHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQobm9kZSwgZGVsQnRuID0gbnVsbCwgY2xhc3NlczpzdHJpbmcgPSBcImNvbGxhcHNlXCIpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiIDogXCJyb3cgcGl4aXVtLWJsb2NrLWJ1aWxkXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gbGV0IGhyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaHJcIiwge1xuICAgICAgICAvLyAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1ociBjb2wtbWQtMTJcIlxuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyBsZXQgaGVhZGVyQm94ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgLy8gICAgIFwiaWRcIjogXCJoZWFkZXJfYm94XCIrdGhpcy5pZCxcbiAgICAgICAgLy8gICAgIFwiY2xhc3NcIjogXCJjb2xsYXBzZVwiXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGxldCBub2RlQ29udGVudCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICAnY2xhc3MnOiAnY29sLW1kLTEyICcrY2xhc3Nlc1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmhlYWRlciA9IEJ1aWxkZXIuYWRkQm94SGVhZGVyKHRoaXMubm9kZSwgdGhpcy5pZCwgbm9kZUNvbnRlbnQsIGRlbEJ0bik7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dCh0aGlzLmhlYWRlciwgdGhpcy5pZCwgdGhpcy50ZXh0LCBcIlRleHRcIiwgKHZhbCkgPT4ge3RoaXMudGV4dD12YWw7fSwgXCJjb2wtbWQtNlwiICk7XG5cbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5vZGVDb250ZW50KTtcblxuICAgIFxuICAgICAgICBsZXQgZW51bUFycmF5ID0gT2JqZWN0LmtleXMoQmxvY2tUeXBlKS5maWx0ZXIoYT0+YS5tYXRjaCgvXlxcRC8pKS5tYXAobmFtZT0+KHtuYW1lLCB2YWx1ZTogQmxvY2tUeXBlW25hbWVdIGFzIG51bWJlcn0pKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXREcm9wZG93bihub2RlQ29udGVudCwgdGhpcy5pZCwgdGhpcy50eXBlLCBcIlR5cGVcIiwgKHZhbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50eXBlPU51bWJlcih2YWwpO1xuICAgICAgICAgICAgdGhpcy5hbnN3ZXI9Jyc7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWJFbGVtZW50QmxvY2soKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LCBlbnVtQXJyYXksIFwiY29sLW1kLTRcIiApO1xuXG4gICAgICAgIC8vIC0tLS0gRmllbGQgZm9yIENob2ljZXMgYmxvY2tcbiAgICAgICAgbGV0IGJsa0Nob2ljZXNTdHlsZSA9IFwiXCI7XG4gICAgICAgIGlmKCh0aGlzLnR5cGUgIT09IEJsb2NrVHlwZS5SQURJTykgJiYgKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLkNIRUNLQk9YKSl7XG4gICAgICAgICAgICBibGtDaG9pY2VzU3R5bGUgPSBcImRpc3BsYXk6bm9uZTtcIlxuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlQ2hvaWNlcyA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBjb2wtbWQtMTJcIixcbiAgICAgICAgICAgIFwic3R5bGVcIjogYmxrQ2hvaWNlc1N0eWxlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsYWJUaXRsZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWJUaXRsZS5pbm5lckhUTUwgPSBcIkNob2ljZXMgOiBcIjtcbiAgICAgICAgbm9kZUNob2ljZXMuYXBwZW5kQ2hpbGQobGFiVGl0bGUpO1xuICAgICAgICBpZih0aGlzLmNob2ljZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCggKGNoOkNob2ljZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNoLmJ1aWxkKG5vZGVDaG9pY2VzKTtcbiAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICAgICAgZGVsQnRuLmlubmVyVGV4dCA9ICctJzsgIFxuICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUNob2ljZXMucmVtb3ZlQ2hpbGQoY2gubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMuY2hvaWNlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGNoLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjaC5ub2RlLmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJVSUxEIEFERCBCT0xDSyBCVE5cbiAgICAgICAgbGV0IGFkZENob2ljZUJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBhZGRDaG9pY2VCdXR0b24uaW5uZXJUZXh0ID0gJysnOyAgXG4gICAgICAgIGFkZENob2ljZUJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgbGV0IGJ0bkNoQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgIC8vIEFERCBORVcgQk9MQ0tcbiAgICAgICAgICAgIGxldCBjaCA9IG5ldyBDaG9pY2UobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNob2ljZXMucHVzaChjaCk7XG4gICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChidG5DaEFkZCk7XG4gICAgICAgICAgICBjaC5idWlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICBsZXQgYnRuQ2hEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgYnRuQ2hEZWwuaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICBidG5DaERlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChjaC5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNob2ljZXMgPSB0aGlzLmNob2ljZXMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBjaC5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNoLm5vZGUuYXBwZW5kQ2hpbGQoYnRuQ2hEZWwpO1xuXG4gICAgICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChidG5DaEFkZCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgbm9kZUNob2ljZXMuYXBwZW5kQ2hpbGQoYWRkQ2hvaWNlQnV0dG9uKTtcblxuICAgICAgICBub2RlQ29udGVudC5hcHBlbmRDaGlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgIC8vIC0tLS0gXG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgU2xpZGVyIGJsb2NrXG4gICAgICAgIGxldCBibGtTbGlkZXJTdHlsZSA9IFwiXCI7XG4gICAgICAgIGlmKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlNMSURFUil7XG4gICAgICAgICAgICBibGtTbGlkZXJTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVTbGlkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBjb2wtbWQtMTJcIixcbiAgICAgICAgICAgIFwic3R5bGVcIjogYmxrU2xpZGVyU3R5bGVcbiAgICAgICAgfSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLm1pbiwgXCJNaW5cIiwgKHZhbCkgPT4ge3RoaXMubWluPXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMubWF4LCBcIk1heFwiLCAodmFsKSA9PiB7dGhpcy5tYXg9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5zdGVwLCBcIlN0ZXBcIiwgKHZhbCkgPT4ge3RoaXMuc3RlcD12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIG5vZGVDb250ZW50LmFwcGVuZENoaWxkKG5vZGVTbGlkZXIpO1xuICAgICAgICAvLyAtLS0tXG5cbiAgICAgICAgLy8gdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyKTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuICAgIFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBSdW4gdGhlIGZvcm1cbiAgICAgKi9cbiAgICBydW4obm9kZSl7XG4gICAgICAgIC8vIGFsZXJ0KFwiQ1wiKTtcbiAgICAgICAgbGV0IHRpdGxlTm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInBcIik7IC8vZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIHRpdGxlTm9kZS5pbm5lckhUTUwgPSB0aGlzLnRleHQ7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKHRpdGxlTm9kZSk7XG5cbiAgICAgICAgc3dpdGNoKHRoaXMudHlwZSl7XG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5SQURJTzpcbiAgICAgICAgICAgICAgICBCbG9ja1JhZGlvLnJ1bih0aGlzLm5vZGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5DSEVDS0JPWDpcbiAgICAgICAgICAgICAgICBCbG9ja0NoZWNrYm94LnJ1bih0aGlzLm5vZGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5GUkVFVEVYVDpcbiAgICAgICAgICAgICAgICBCbG9ja0ZyZWV0ZXh0LnJ1bih0aGlzLm5vZGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuTE9OR1RFWFQ6XG4gICAgICAgICAgICAgICAgQmxvY2tMb25ndGV4dC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuTk9BTlNXRVI6XG4gICAgICAgICAgICAgICAgLy8gQmxvY2tOb2Fuc3dlci5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuU0xJREVSOlxuICAgICAgICAgICAgICAgIEJsb2NrU2xpZGVyLnJ1bih0aGlzLm5vZGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5UQUdTOlxuICAgICAgICAgICAgICAgIEJsb2NrVGFncy5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IGhyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaHJcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1oclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaHIpO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuICAgIGRpc3BsYXkoKXtcbiAgICB9XG5cblxuXG4gICAgdHJpZ2dlclN1YkVsZW1lbnRCbG9jaygpe1xuICAgICAgICBsZXQgc2xpZGVyQmxvY2sgPSBudWxsO1xuICAgICAgICBpZihzbGlkZXJCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpZGVyX2Jsb2NrX1wiK3RoaXMuaWQpKXtcbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLlNMSURFUil7XG4gICAgICAgICAgICAgICAgc2xpZGVyQmxvY2suc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNsaWRlckJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBhbGVydChcIk5vZGUgU2lsZGVyIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjaG9pY2VCbG9jayA9IG51bGw7XG4gICAgICAgIGlmKGNob2ljZUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaG9pY2VzX2Jsb2NrX1wiK3RoaXMuaWQpKXtcbiAgICAgICAgICAgIGlmKCh0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5SQURJTykgfHwgKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLkNIRUNLQk9YKSl7XG4gICAgICAgICAgICAgICAgY2hvaWNlQmxvY2suc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNob2ljZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBhbGVydChcIk5vZGUgQ2hvaWNlIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjphbnlbXTtcbiAgICAgICAgYXJyID0gW107XG4gICAgICAgIHRoaXMuY2hvaWNlcy5mb3JFYWNoKCAoY2g6Q2hvaWNlKSA9PiB7XG4gICAgICAgICAgICBhcnIucHVzaChjaC5jb21waWxlSnNvbigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuanNvbiA9IHtcbiAgICAgICAgICAgIFwidHlwZVwiOnRoaXMudHlwZSxcbiAgICAgICAgICAgIFwidGV4dFwiOnRoaXMudGV4dCxcbiAgICAgICAgICAgIFwiYW5zd2VyXCI6dGhpcy5hbnN3ZXIsXG4gICAgICAgICAgICBcIm1pblwiOnRoaXMubWluLFxuICAgICAgICAgICAgXCJtYXhcIjp0aGlzLm1heCxcbiAgICAgICAgICAgIFwic3RlcFwiOnRoaXMuc3RlcCxcbiAgICAgICAgICAgIFwiY2hvaWNlc1wiOiBhcnJcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5qc29uO1xuICAgIH1cbn0iLCJcbmV4cG9ydCBjbGFzcyBCdWlsZGVye1xuXG4gICAgLyoqXG4gICAgICogQnVpbGQgYW5kIHNldCBhbGwgdGhlIGF0dHJpYnV0ZSBvZiBhIEhUTUwgRWxlbWVudCBub2RlXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGlucHV0IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBfcGFyYW1zIFRoZSBhdHRyaWJ1dGVzIGxpc3QgdG8gc2V0XG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUVsZW1lbnQodHlwZTpzdHJpbmcsIF9wYXJhbXM6YW55ID0gbnVsbCl7XG4gICAgICAgIGlmKCF0eXBlKXtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ291bGQgbm90IGJ1aWxkIHRoZSBlbGVtZW50XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgICAgICBpZihfcGFyYW1zKXtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3BhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHdpbGwgc2V0IGFsbCBhdHRyaWJ1dGUgaW50byBhIHNwZWNpZmljIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbSBFbGVtZW50IHRvIHNldCB0ZSBhdHRyaWJ1dGUgb2ZcbiAgICAgKiBAcGFyYW0gX3BhcmFtcyBUaGUgYXR0cmlidXRlcyBsaXN0IHRvIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRBdHRyaWJ1dGVzKGVsZW06SFRNTEVsZW1lbnQsIF9wYXJhbXM6YW55ID0gbnVsbCl7XG4gICAgICAgIGlmKF9wYXJhbXMpe1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF9wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfcGFyYW1zW2tleV07XG4gICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHN0YXRpYyBhZGRCdWlsZGVySW5wdXRUZXh0KG5vZGUsIGlkLCB2YWx1ZSwgbGFiZWwsIGNhbGxiYWNrLCBjbGFzc2VzPVwiY29sLW1kLTEyXCIpe1xuICAgICAgICBsZXQgZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tcm93LWJsb2NrIFwiK2NsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGxldCBsYWIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgLy8gbGFiLmlubmVySFRNTCA9IGxhYmVsK1wiOiBcIjtcbiAgICAgICAgbGV0IGlucHV0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHZhbHVlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IGxhYmVsK1wiX1wiK2lkLFxuICAgICAgICAgICAgXCJwbGFjZWhvbGRlclwiOiBsYWJlbFxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXQub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgY2FsbGJhY2soKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWUpO1xuICAgICAgICB9OyBcbiAgICAgICAgLy9kaXYuYXBwZW5kQ2hpbGQobGFiKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH1cblxuXG4gICAgc3RhdGljIGFkZEJveEhlYWRlcihub2RlLCBpZCwgc3ViRWxlbWVudCwgZGVsQnRuKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiY29sLW1kLTEyIGJsb2NrLWhlYWRlciBibG9jay1oZWFkZXItXCIraWQgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFkZCB0aGUgZGVsZXRlIGJ1dHRvbiBpbiB0aGUgaGVhZGVyIGRpcmVjdGx5XG4gICAgICAgIGlmKGRlbEJ0bil7XG4gICAgICAgICAgICBkZWxCdG4uY2xhc3NOYW1lICs9IFwiIGZsb2F0LXJpZ2h0XCI7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBleWUxID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaVwiLCB7XCJjbGFzc1wiOlwiZmEgZmEtZXllIGZsb2F0LXJpZ2h0XCIsIFwiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0pO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZXllMSk7XG4gICAgICAgIGxldCBleWUyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaVwiLCB7XCJjbGFzc1wiOlwiZmEgZmEtZXllLXNsYXNoIGZsb2F0LXJpZ2h0IGhpZGRlblwiLCBcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCJ9KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGV5ZTIpO1xuXG4gICAgICAgIFxuICAgICAgICBcblxuXG4gICAgICAgIGV5ZTEub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgc3ViRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY29sbGFwc2VcIik7XG4gICAgICAgICAgICBleWUxLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICBleWUyLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgIH07XG4gICAgICAgIGV5ZTIub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgc3ViRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY29sbGFwc2VcIik7XG4gICAgICAgICAgICBleWUxLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICBleWUyLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgXG5cbiAgICAgICAgLy8gbGV0IGxhYiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAvLyBsYWIuaW5uZXJIVE1MID0gbGFiZWw7XG4gICAgICAgIC8vIGRpdi5hcHBlbmRDaGlsZChsYWIpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIHJldHVybiBkaXY7XG4gICAgfVxuXG4gICAgLypcbjxzZWxlY3QgbmFtZT1cImNhcnNcIiBpZD1cImNhcnNcIj5cbiAgPG9wdGlvbiB2YWx1ZT1cInZvbHZvXCI+Vm9sdm88L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cInNhYWJcIj5TYWFiPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJtZXJjZWRlc1wiPk1lcmNlZGVzPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJhdWRpXCI+QXVkaTwvb3B0aW9uPlxuPC9zZWxlY3Q+XG4gICAgKi9cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0RHJvcGRvd24obm9kZSwgaWQsIHZhbHVlLCBsYWJlbCwgY2FsbGJhY2ssIG9wdGlvbnMsIGNsYXNzZXM9XCJjb2wtbWQtMTJcIil7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgXCIrY2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhYiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWIuaW5uZXJIVE1MID0gbGFiZWwrXCI6IFwiO1xuICAgICAgICBsZXQgaW5wdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1kcm9wZG93blwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJkaXNwbGF5OmJsb2NrXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uY2hhbmdlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjaygoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZSk7XG4gICAgICAgIH07IFxuXG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGxldCBvcHQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiwge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZWxlbWVudC52YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYodmFsdWU9PT1lbGVtZW50LnZhbHVlKXtcbiAgICAgICAgICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMob3B0LCB7XG4gICAgICAgICAgICAgICAgICAgIFwic2VsZWN0ZWRcIjpcInNlbGVjdGVkXCJcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0LmlubmVySFRNTCA9IGVsZW1lbnQubmFtZTtcbiAgICAgICAgICAgIGlucHV0LmFwcGVuZENoaWxkKG9wdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChsYWIpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Nob2ljZS50c1wiKTsiLCJcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIENob2ljZXtcbiAgICBsYWJlbDpzdHJpbmc7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAganNvbjphbnk7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihfanNvbil7XG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJsYWJlbFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbCA9IF9qc29uW1wibGFiZWxcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widmFsdWVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBfanNvbltcInZhbHVlXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBidWlsZCB0aGUgZm9ybVxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgYmxvY2stY2hvaWNlcyBjb2wtbWQtMTJcIixcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENSRUFURSBWQUxVRSBJTlBVVFxuICAgICAgICBsZXQgbGFiVmFsdWUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XCJmb3JcIjpcImlucHV0X1wiK3RoaXMudmFsdWUrXCJfXCIrdGhpcy5pZH0pO1xuICAgICAgICBsYWJWYWx1ZS5pbm5lckhUTUwgPSBcIlZhbHVlIDogXCI7XG4gICAgICAgIGxldCBpbnB1dFZhbHVlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6ICh0aGlzLnZhbHVlKSA/IHRoaXMudmFsdWUgOiAnJyxcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogJ1ZhbHVlJyxcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dF9cIit0aGlzLnZhbHVlK1wiX1wiK3RoaXMuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0VmFsdWUub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZT0oPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgLy8gQ1JFQVRFIExBQkVMIElOUFVUXG4gICAgICAgIGxldCBsYWJMYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcImZvclwiOlwiaW5wdXRfXCIrdGhpcy5sYWJlbCtcIl9cIit0aGlzLmlkLCBcInN0eWxlXCI6XCJtaW4td2lkdGg6IGF1dG87XCJ9KTtcbiAgICAgICAgbGFiTGFiZWwuaW5uZXJIVE1MID0gXCJMYWJlbCA6IFwiO1xuICAgICAgICBsZXQgaW5wdXRMYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiAodGhpcy5sYWJlbCkgPyB0aGlzLmxhYmVsIDogJycsXG4gICAgICAgICAgICBcInBsYWNlaG9sZGVyXCI6ICdMYWJlbCcsXG4gICAgICAgICAgICBcImlkXCI6XCJpbnB1dF9cIit0aGlzLmxhYmVsK1wiX1wiK3RoaXMuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0TGFiZWwub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5sYWJlbD0oPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGxhYlZhbHVlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGlucHV0VmFsdWUpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobGFiTGFiZWwpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbCk7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIHRoaXMuanNvbiA9IHtcbiAgICAgICAgICAgIFwibGFiZWxcIjp0aGlzLmxhYmVsLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOnRoaXMudmFsdWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5qc29uO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja1NsaWRlci50c1wiKTsiLCJpbXBvcnQge0Jsb2NrfSBmcm9tIFwiLi9ibG9ja1wiO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tTbGlkZXJ7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrOkJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICAgIGxldCBtaW4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjpcIl9sZWZ0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIG1pbi5pbm5lckhUTUwgPSAoYmxvY2subWluKSA/IGJsb2NrLm1pbiA6ICcwJztcbiAgICAgICAgbGV0IG1heCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOlwiX3JpZ2h0XCJcbiAgICAgICAgfSk7O1xuICAgICAgICBtYXguaW5uZXJIVE1MID0gKGJsb2NrLm1heCkgPyBibG9jay5tYXggOiAnMTAwJztcbiAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IChibG9jay5hbnN3ZXIpID8gYmxvY2suYW5zd2VyIDogKChibG9jay5tYXggJiYgYmxvY2subWluKSA/IE1hdGgucm91bmQoKE51bWJlcihibG9jay5tYXgpKyBOdW1iZXIoYmxvY2subWluKSkvMikgOiA1MCk7XG4gICAgICAgIC8vIDxvdXRwdXQgZm9yPVwiZm9vXCIgb25mb3JtaW5wdXQ9XCJ2YWx1ZSA9IGZvby52YWx1ZUFzTnVtYmVyO1wiPjwvb3V0cHV0PlxuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2Jsb2NrLmFuc3dlcicpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tc2xpZGVyXCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJyYW5nZVwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICBcIm1pblwiOiAoYmxvY2subWluKSA/IGJsb2NrLm1pbiA6IDAsXG4gICAgICAgICAgICBcIm1heFwiOiAoYmxvY2subWF4KSA/IGJsb2NrLm1heCA6IDEwMCxcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dHJhbmdlX1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pO1xuICAgICAgICBpZihibG9jay5zdGVwKXtcbiAgICAgICAgICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgYmxvY2suc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgZmllbGQub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0X1wiK2Jsb2NrLmlkKS5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5wdXREaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGlucHV0RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGl4aXVtLWJsb2NrLXNsaWRlclwiKTtcbiAgICAgICAgbGV0IG91dHB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcIm91dHB1dFwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwib3V0cHV0X1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pO1xuICAgICAgICBvdXRwdXQuaW5uZXJIVE1MID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICBibG9jay5hbnN3ZXIgPSBvdXRwdXQuaW5uZXJIVE1MO1xuICAgICAgICBcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQob3V0cHV0KTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoZmllbGQpO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtaW4pO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtYXgpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGlucHV0RGl2KTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrRnJlZXRleHQudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tGcmVldGV4dHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgbGV0IGZpZWxkID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBibG9jay5hbnN3ZXIsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRmcmVldGV4dF9cIitibG9jay5pZFxuICAgICAgICB9KTsgXG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICB9OyBcbiAgICAgICAgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrUmFkaW8udHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tSYWRpbyB7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgYmxvY2suY2hvaWNlcy5mb3JFYWNoKCAoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZiAgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwicmFkaW9cIixcbiAgICAgICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRyYWRpb19cIitibG9jay5pZCxcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6ICBjaG9pY2UudmFsdWUrXCJcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBsYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gY2hvaWNlLmxhYmVsO1xuXG4gICAgICAgICAgICBsZXQgX2RpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQoZik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChfZGl2KTtcblxuICAgICAgICAgICAgZi5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICAgICAgfTsgXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrQ2hlY2tib3gudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tDaGVja2JveCB7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgYmxvY2suY2hvaWNlcy5mb3JFYWNoKCAoY2hvaWNlKSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBmICA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiAgYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9QcmVzZWxlY3QgYW5zd2VycyBpZiBzZXRcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxvY2suYW5zd2VyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZigoY2hvaWNlLnZhbHVlK1wiXCIpPT09YmxvY2suYW5zd2VyW2ldKXtcbiAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tlZFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNob2ljZS5sYWJlbDtcblxuICAgICAgICAgICAgbGV0IF9kaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoX2Rpdik7XG5cbiAgICAgICAgICAgIGYub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjaGVja2VkQm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XVtuYW1lPVwiJytibG9jay5pZCsnXCJdOmNoZWNrZWQnKTtcbiAgICAgICAgICAgICAgICBsZXQgaWRzID0gW107XG4gICAgICAgICAgICAgICAgY2hlY2tlZEJveGVzLmZvckVhY2goIChlbGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKCg8SFRNTElucHV0RWxlbWVudD5lbGVtKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gaWRzO1xuICAgICAgICAgICAgfTsgXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrTG9uZ3RleHQudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tMb25ndGV4dHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInJvd3NcIjogNSxcbiAgICAgICAgICAgIFwidmFsdWVcIjogYmxvY2suYW5zd2VyLFxuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0bG9uZ3RleHRfXCIrYmxvY2suaWRcbiAgICAgICAgfSk7IFxuICAgICAgICAvLyBmaWVsZC5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTFRleHRBcmVhRWxlbWVudD5maWVsZCkudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICB9OyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vQmxvY2tUYWdzLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcbmltcG9ydCB7IEJsb2NrVHlwZSB9IGZyb20gXCIuL2Jsb2NrXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1RhZ3Mge1xuICAgIC8vIDxkaXYgaWQ9XCJob2xkZXJcIj5cbiAgICAvLyAgICAgPGRpdiBpZD1cInRhZ3NcIj5cbiAgICAvLyAgICAgICAgICA8c3Bhbj5cbiAgICAvLyAgICAgICAgICAgICAgdmFsdWVcbiAgICAvLyAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCI+LTwvYnV0dG9uPlxuICAgIC8vICAgICAgICAgIDwvc3Bhbj5cbiAgICAvLyAgICAgPC9kaXY+XG4gICAgLy8gICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiXCIgLz5cbiAgICAvLyA8L2Rpdj5cbiAgICBcbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgLy8gcGFyc2UgYmxvY2suYW5zd2VyIGZvciBhcnJheSB0byBzdHJpbmdzIFxuICAgICAgICBpZihibG9jay5hbnN3ZXIubGVuZ3RoPT0wKXtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6ZmxleFwiKTtcblxuICAgICAgICAvLyBkaXYgYW5zd2VyXG4gICAgICAgIGxldCB0YWdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGFnc1wiKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcblxuICAgICAgICBpZihibG9jay5hbnN3ZXIpe1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICB0YWcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YWctXCIrYmxvY2suaWQrXCItXCIrdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0YWcuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBUQUdcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXJcIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MucmVtb3ZlQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGJsb2NrLmFuc3dlci5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsK2RlbEJ0bi5vdXRlckhUTUwgIT0gdGFnLmlubmVySFRNTDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZGVsQnRuKTsgXG4gICAgICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWVsZCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICdjbGFzcyc6IFwiZmZmXCJcbiAgICAgICAgfSk7XG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcblxuICAgICAgICBmaWVsZC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIEJsb2NrVGFncy5wcm9jZXNzTmV3S2V5d29yZChldmVudCwgZmllbGQsIGJsb2NrLCB0YWdzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgQmxvY2tUYWdzLnByb2Nlc3NOZXdLZXl3b3JkKGV2ZW50LCBmaWVsZCwgYmxvY2ssIHRhZ3MsIHRydWUpO1xuICAgICAgICB9OyBcblxuICAgICAgICAvLyBhZGQgb25ibHVyIHNhdmVcbiAgICAgICAgLy8gZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgYmxvY2suYW5zd2VyLnB1c2goKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZSk7XG4gICAgICAgIC8vICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIC8vIH07IFxuXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZCh0YWdzKTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgcHJvY2Vzc05ld0tleXdvcmQoZXZlbnQsIGZpZWxkLCBibG9jaywgdGFncywgZm9yY2VQcm9jZXNzOmJvb2xlYW4gPSBmYWxzZSl7XG4gICAgICAgIC8vIFwiRW50ZXJcIiBrZXkgb24gdGhlIGtleWJvYXJkXG4gICAgICAgIGlmIChmb3JjZVByb2Nlc3MgfHwgZXZlbnQua2V5ID09PSAnRW50ZXInIHx8IGV2ZW50LmtleSA9PT0gJywnIHx8IGV2ZW50LmtleUNvZGUgPT0gMTg4KSB7IC8vIHx8IGV2ZW50LmtleSA9PT0gJyAnIHx8IGV2ZW50LmNvZGUgPT09ICdTcGFjZScgfHwgZXZlbnQua2V5ID09PSAnU3BhY2ViYXInXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICBpZih2YWx1ZSAmJiB2YWx1ZS5sZW5ndGg+MCl7XG4gICAgICAgICAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy9hZGQgdG8gYW5zd2VyXG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIC8vYWRkIHRvIGRpc3BsYXlcbiAgICAgICAgICAgICAgICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgdGFnLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBUQUdcbiAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG4gICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0YWdzLnJlbW92ZUNoaWxkKHRhZyk7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGJsb2NrLmFuc3dlci5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsK2RlbEJ0bi5vdXRlckhUTUwgIT0gdGFnLmlubmVySFRNTDsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGFnLmFwcGVuZENoaWxkKGRlbEJ0bik7IFxuICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQodGFnKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==