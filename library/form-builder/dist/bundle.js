!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=t.Params=void 0;const n=i(/*! ./section */4),s=i(/*! ./builder */1),l=i(/*! ./data.json */23);function o(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]==t)return!0;return!1}function r(e,t){for(var i=document.querySelectorAll(t),n=e.parentNode;n&&!o(i,n);)n=n.parentNode;return n}class a{}t.Params=a;t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,this.params=new a,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container drop-targets"),e.data?this.json=e.data:this.json=l,e.singleSection?this.params.singleSection=e.singleSection:this.params.singleSection=!1,e.hideEditQuestion?this.params.hideEditQuestion=e.hideEditQuestion:this.params.hideEditQuestion=!1,this.params.hideQuestionType=JSON.parse(e.hideQuestionType),this.params.hideQuestionTypeSelection=e.hideQuestionTypeSelection,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,this.params.singleSection?null:e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}getIndexFromSectionId(e){for(let t=0;t<this.sections.length;t++)if(this.sections[t].id==e)return t;return null}swapSections(e,t){console.log(this.sections);let i=this.sections[e];this.sections[e]=this.sections[t],this.sections[t]=i,console.log(this.sections)}dragStart(e){let t=r(e.target,".drop-target");e.dataTransfer.setData("text/plain",t.id),setTimeout(()=>{t||console.log(t)},0)}dragEnter(e){e.preventDefault();let t=r(e.target,".drop-target");t&&t.classList.add("drag-over")}dragOver(e){e.preventDefault();let t=r(e.target,".drop-target");t&&t.classList.add("drag-over")}dragLeave(e){let t=r(e.target,".drop-target");t&&t.classList.remove("drag-over")}dragEnd(e){let t=r(e.target,".drop-target");t&&t.children[0].classList.remove("hidden")}drop(e){e.target.classList.remove("drag-over");const t=e.dataTransfer.getData("text/plain");let i=document.getElementById(t),n=r(e.target,".drop-target");if(i&&i.classList.remove("hidden"),n.classList.remove("drag-over"),i.classList.remove("drag-over"),n){let e=this.getIndexFromSectionId(n.id),t=this.getIndexFromSectionId(i.id);e!=t&&(this.swapSections(e,t),l=i,o=(s=n).parentNode,a=l.parentNode,d=document.createElement("div"),c=document.createElement("div"),o.replaceChild(d,s),a.replaceChild(c,l),o.replaceChild(l,d),a.replaceChild(s,c))}else alert("not parent found");var s,l,o,a,d,c}build(){if(this.clear(),this.sections.forEach(e=>{if(e.build(this.mainNode,this.params),!this.params.singleSection&&!this.params.hideEditQuestion){let t=s.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',e.contentWrapper.appendChild(t),t.onclick=t=>{this.mainNode.removeChild(e.node),this.sections=this.sections.filter((function(t){return t.id!=e.id}))}}e.dragNode.ondragstart=e=>{this.dragStart(e)}}),document.querySelectorAll(".pixium-box").forEach(e=>{e.addEventListener("dragenter",this.dragEnter),e.addEventListener("dragover",this.dragOver),e.addEventListener("dragleave",this.dragLeave),e.addEventListener("dragend",this.dragEnd),e.addEventListener("drop",e=>this.drop(e))}),!this.params.singleSection){let t=s.Builder.createElement("button",{class:"btn btn-success form-builder-btn fullwidth",type:"button"});t.innerText="ADD SECTION",t.onclick=t=>{let i=t.target,l=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(l),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(e),l.build(this.mainNode,this.params);let o=s.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+l.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(l.node),this.sections=this.sections.filter((function(e){return e.id!=l.id}))},l.contentWrapper.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(e)},this.mainNode.appendChild(t)}let e=s.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});e.innerText="GO TO RUN",e.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(e)}run(){this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.saveBtn=s.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"submit",id:"form-builder-save-final-btn"}),this.saveBtn.innerText="Save",this.saveBtn.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Please complete the form"))},this.currentNode!=this.sections.length-1||this.params.singleSection||(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)),this.params.singleSection&&this.sections[this.currentNode].node.appendChild(this.saveBtn);let e=s.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=s.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e&&e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){e?this.currentNode>=0&&this.currentNode<this.sections.length-1?(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="inline-block",this.currentNode==this.sections.length-1?(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)):document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block"):alert("You already are on the next slide"):this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),s=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e,t){this.contentWrapper=s.Builder.createElement("div",{class:"pixium-box-content drop-target",id:this.id}),this.node=s.Builder.createElement("div",{class:"row pixium-box",id:"holder-"+this.id}),this.dragNode=s.Builder.createElement("i",{class:"fa fa-th drag-cursor",draggable:!0,id:"dragNod-"+this.id});let i=s.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});if(s.Builder.addBuilderInputText(i,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-12"),this.contentWrapper.appendChild(i),i.children[0].appendChild(this.dragNode),this.blocks.forEach(e=>{let i=s.Builder.createElement("button",{class:"form-builder-btn button-delete",type:"button",style:"display:block"});i.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.hideEditQuestion?i=s.Builder.createElement("span"):i.onclick=t=>{this.contentWrapper.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))},e.build(this.contentWrapper,t,i)}),!t.hideEditQuestion){let e=s.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});e.innerHTML="+",e.onclick=e=>{let i,l=e.target,o=new n.Block(null);this.blocks.push(o),this.contentWrapper.removeChild(l),this.callback&&(i=document.getElementById("btn-delete-section-"+this.id),this.contentWrapper.removeChild(i)),o.build(this.contentWrapper,t,!1,"");let r=s.Builder.createElement("button",{class:"form-builder-btn button-delete float-right",type:"button",style:"display:block"});r.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',r.onclick=e=>{this.contentWrapper.removeChild(o.node),this.blocks=this.blocks.filter((function(e){return e.id!=o.id}))},o.header.insertBefore(r,o.header.firstChild),this.contentWrapper.appendChild(l),this.callback&&this.contentWrapper.appendChild(i)},this.contentWrapper.appendChild(e)}this.node.appendChild(this.contentWrapper),e.appendChild(this.node)}run(e){this.node=s.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");if(t.innerHTML=this.title,this.node.appendChild(t),this.blocks.forEach(e=>{e.run(this.node)}),console.log("node.singleSection"),console.log(this.callback),this.callback){let e=s.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",id:"btn-previous-section-"+this.id,type:"button"});e.innerText="Previous",e.style.display="none",e.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(e);let t=s.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",id:"btn-next-section-"+this.id,type:"button"});t.innerText="Next",t.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Please complete the form...")},this.node.appendChild(t)}this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{console.log(t.answer),t&&0==t.answer.length&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),s=i(/*! ./choice */9),l=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),r=i(/*! ./blockRadio */15),a=i(/*! ./blockCheckbox */17),d=i(/*! ./blockLongtext */19),c=i(/*! ./BlockTags */21);var u;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER",e[e.TAGS=7]="TAGS"}(u=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==u.RADIO&&this.type!==u.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new s.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e,t,i=null,l="collapse"){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let o=n.Builder.createElement("div",{class:"col-md-12 "+l});this.header=n.Builder.addBoxHeader(this.node,this.id,o,i),n.Builder.addBuilderInputText(this.header,this.id,this.text,"Text",e=>{this.text=e},"col-md-10"),this.node.appendChild(o);let r=Object.keys(u).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:u[e]})),a=[];if(t.hideQuestionType)for(var d=0;d<r.length;d++){let e=r[d].name;e&&(t.hideQuestionType[e]||a.push(r[d]))}else a=r;let c="";t.hideQuestionTypeSelection&&(c="hidden"),n.Builder.addBuilderInputDropdown(o,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},a,"col-md-4 "+c);let h="";this.type!==u.RADIO&&this.type!==u.CHECKBOX&&(h="display:none;");let p=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"col-md-12 custom_block_type",style:h}),m=n.Builder.createElement("label");m.innerHTML="Choices : ",p.appendChild(m),this.choices.length>0&&this.choices.forEach(e=>{e.build(p);let t=n.Builder.createElement("button",{class:"form-builder-btn button-delete form-builder-btn",type:"button"});t.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>',t.onclick=t=>{p.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let b=n.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});b.innerHTML="+",b.onclick=e=>{let t=e.target,i=new s.Choice(null);this.choices.push(i),p.removeChild(t),i.build(p);let l=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});l.innerText="-",l.onclick=e=>{p.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(l),p.appendChild(t)},p.appendChild(b),o.appendChild(p);let f="";this.type!==u.SLIDER&&(f="display:none;");let g=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"col-md-12 custom_block_type",style:f});n.Builder.addBuilderInputText(g,this.id,this.min,"Min",e=>{this.min=e},"col-md-4",!0),n.Builder.addBuilderInputText(g,this.id,this.max,"Max",e=>{this.max=e},"col-md-4",!0),n.Builder.addBuilderInputText(g,this.id,this.step,"Step",e=>{this.step=e},"col-md-4",!0),o.appendChild(g),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div",{class:"pixium-block-run-question"}),this.node.appendChild(t),this.type){case u.RADIO:r.BlockRadio.run(this.node,this);break;case u.CHECKBOX:a.BlockCheckbox.run(this.node,this);break;case u.FREETEXT:o.BlockFreetext.run(this.node,this);break;case u.LONGTEXT:d.BlockLongtext.run(this.node,this);break;case u.NOANSWER:break;case u.SLIDER:l.BlockSlider.run(this.node,this);break;case u.TAGS:c.BlockTags.run(this.node,this)}e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===u.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===u.RADIO||this.type===u.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var s=t[n];i.setAttribute(n,s)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,s,l,o="col-md-12",r=!1){let a=n.createElement("div",{class:"pixium-row-block "+o}),d=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:s+"_"+t,placeholder:s});if(d.onblur=e=>{console.log(e.target),l(e.target.value)},r){let e=n.createElement("label",{style:"float:left"});e.innerHTML=s+": ",a.appendChild(e)}a.appendChild(d),e.appendChild(a)}static addBoxHeader(e,t,i,s){let l=n.createElement("div",{class:"col-md-12 block-header block-header-"+t});s&&(s.className+=" float-right",l.appendChild(s));let o=n.createElement("i",{class:"fa fa-caret-left float-right","aria-hidden":"true"});l.appendChild(o);let r=n.createElement("i",{class:"fa fa-caret-down float-right hidden","aria-hidden":"true"});return l.appendChild(r),o.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},r.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},e.appendChild(l),l}static addBuilderInputDropdown(e,t,i,s,l,o,r="col-md-12"){let a=n.createElement("div",{class:"pixium-row-block "+r}),d=n.createElement("label");d.innerHTML=s+": ";let c=n.createElement("select",{class:"pixium-dropdown",value:i,name:s+"_"+t,style:"display:block"});c.onchange=e=>{l(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,c.appendChild(t)}),a.appendChild(d),a.appendChild(c),e.appendChild(a)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value?this.value:"",placeholder:"Value",id:"input_"+this.value+"_"+this.id});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let s=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});s.innerHTML="Label : ";let l=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label?this.label:"",placeholder:"Label",id:"input_"+this.label+"_"+this.id});l.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(s),this.node.appendChild(l),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let s=n.Builder.createElement("input"),l=n.Builder.createElement("span",{class:"_left"});l.innerHTML=t.min?t.min:"0";let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max?t.max:"100";let r=t.answer?t.answer:t.max&&t.min?Math.round((Number(t.max)+Number(t.min))/2):50;n.Builder.setAttributes(s,{class:"pixium-slider",type:"range",value:r,min:t.min?t.min:0,max:t.max?t.max:100,id:"inputrange_"+t.id}),t.step&&s.setAttribute("step",t.step),s.onchange=()=>{t.answer=parseFloat(s.value),console.log(t.answer),document.getElementById("output_"+t.id).innerHTML=t.answer};let a=n.Builder.createElement("div");a.setAttribute("class","pixium-block-slider");let d=n.Builder.createElement("output",{id:"output_"+t.id});d.innerHTML=r,t.answer=d.innerHTML,a.appendChild(d),a.appendChild(s),a.appendChild(l),a.appendChild(o),i.appendChild(a),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let s=n.Builder.createElement("input");n.Builder.setAttributes(s,{class:"pixium-textbox",type:"text",value:t.answer,id:"inputfreetext_"+t.id}),s.onblur=()=>{t.answer=s.value,console.log(t.answer)},i.appendChild(s),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let s=n.Builder.createElement("input",{type:"radio",id:"inputradio_"+t.id,value:e.value+"",name:"name_"+t.id}),l=n.Builder.createElement("label");l.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(s),o.appendChild(l),i.appendChild(o),s.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let s=n.Builder.createElement("input",{type:"checkbox",name:t.id,value:e.value+"",id:e.value+""});for(var l=0;l<t.answer.length;l++)e.value+""===t.answer[l]&&n.Builder.setAttributes(s,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let r=n.Builder.createElement("div");r.appendChild(s),r.appendChild(o),i.appendChild(r),s.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.id+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */20)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let s=document.createElement("textarea");n.Builder.setAttributes(s,{class:"pixium-textbox",rows:5,value:t.answer,id:"inputlongtext_"+t.id}),s.onblur=()=>{t.answer=s.value,console.log(t.answer)},i.appendChild(s),e.appendChild(i)}}},
/*!****************************************!*\
  !*** ./src/block/BlockTags.ts-exposed ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./BlockTags.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/BlockTags.ts ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTags=void 0;const n=i(/*! ../builder */1);class s{static run(e,t){0==t.answer.length&&(t.answer=[]);let i=document.createElement("div");i.setAttribute("class","element-form-container"),i.setAttribute("style","display:flex");let l=document.createElement("div");i.setAttribute("class","tags"),t.answer&&t.answer.forEach(e=>{if(e&&e.length>0){let i=document.createElement("span");i.setAttribute("id","tag-"+t.id+"-"+e),i.innerHTML=e;let s=n.Builder.createElement("button",{class:"btn btn-danger",type:"button"});s.innerText="-",s.onclick=e=>{l.removeChild(i),t.answer=t.answer.filter((function(e){return e+s.outerHTML!=i.innerHTML}))},i.appendChild(s),l.appendChild(i)}});let o=n.Builder.createElement("input",{class:"fff"});o.addEventListener("keypress",(function(e){s.processNewKeyword(e,o,t,l)})),o.onblur=()=>{s.processNewKeyword(event,o,t,l,!0)},i.appendChild(l),i.appendChild(o),e.appendChild(i)}static processNewKeyword(e,t,i,s,l=!1){if(l||"Enter"===e.key||","===e.key||188==e.keyCode){e.preventDefault();let l=t.value.trim();if(console.log(l),l&&l.length>0){t.value=null,i.answer.push(l);let e=document.createElement("span");e.innerHTML=l;let o=n.Builder.createElement("button",{class:"btn",type:"button"});o.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>',o.onclick=t=>{s.removeChild(e),i.answer=i.answer.filter((function(t){return t+o.outerHTML!=e.innerHTML}))},e.appendChild(o),s.appendChild(e)}}}}t.BlockTags=s},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":7},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","label":"Delegation"}]},{"title":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL0Jsb2NrVGFncy50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9CbG9ja1RhZ3MudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJjb2xsZWN0aW9uSGFzIiwiYSIsImIiLCJsZW4iLCJsZW5ndGgiLCJmaW5kUGFyZW50QnlTZWxlY3RvciIsImVsbSIsInNlbGVjdG9yIiwiYWxsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VyIiwicGFyZW50Tm9kZSIsIlBhcmFtcyIsInBhcmFtcyIsInNlY3Rpb25zIiwiY3VycmVudE5vZGUiLCJkaXYiLCJtYWluTm9kZSIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJzaW5nbGVTZWN0aW9uIiwiaGlkZUVkaXRRdWVzdGlvbiIsImhpZGVRdWVzdGlvblR5cGUiLCJKU09OIiwicGFyc2UiLCJoaWRlUXVlc3Rpb25UeXBlU2VsZWN0aW9uIiwiZm9yRWFjaCIsInNlYyIsInNlY3Rpb25Nb2RlbCIsIlNlY3Rpb24iLCJuZXh0U2xpZGUiLCJtb3ZlU2VjdGlvbiIsInB1c2giLCJhbGVydCIsImRlYnVnIiwiYnVpbGQiLCJydW4iLCJfaWQiLCJpZCIsInMxX2lkIiwiczJfaWQiLCJ0ZW1wIiwidGhlX3BhcmVudCIsInRhcmdldCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJzZXRUaW1lb3V0IiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjaGlsZHJlbiIsImdldERhdGEiLCJkcmFnZ2FibGUiLCJpZDEiLCJnZXRJbmRleEZyb21TZWN0aW9uSWQiLCJpZDIiLCJzd2FwU2VjdGlvbnMiLCJhUGFyZW50IiwiYlBhcmVudCIsImFIb2xkZXIiLCJjcmVhdGVFbGVtZW50IiwiYkhvbGRlciIsInJlcGxhY2VDaGlsZCIsImNsZWFyIiwiZGVsQnRuIiwiQnVpbGRlciIsImlubmVySFRNTCIsImNvbnRlbnRXcmFwcGVyIiwiYXBwZW5kQ2hpbGQiLCJvbmNsaWNrIiwiZXYiLCJyZW1vdmVDaGlsZCIsIm5vZGUiLCJmaWx0ZXIiLCJlbCIsImRyYWdOb2RlIiwib25kcmFnc3RhcnQiLCJkcmFnU3RhcnQiLCJib3giLCJhZGRFdmVudExpc3RlbmVyIiwiZHJhZ0VudGVyIiwiZHJhZ092ZXIiLCJkcmFnTGVhdmUiLCJkcmFnRW5kIiwiZHJvcCIsImFkZEJ1dHRvbiIsImlubmVyVGV4dCIsImJ0blNlY0FkZCIsInN3aXRjaEJ1dHRvbiIsImJ0blNlY0RlbCIsInNhdmVCdG4iLCJpc0NvbXBsZXRlZCIsImNvbXBpbGVKc29uIiwic3R5bGUiLCJkaXNwbGF5IiwiYWZ0ZXIiLCJzYXZlQnV0dG9uIiwic2hvdyIsImFyciIsImZpbmFsT3V0cHV0Iiwic3RyaW5naWZ5IiwiaGlkZSIsIl9wYXJlbnQiLCJfanNvbiIsIl9jYWxsYmFjayIsInBhcmVudCIsImJsb2NrcyIsImNhbGxiYWNrIiwidGl0bGUiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJibG9ja01vZGVsIiwiQmxvY2siLCJfbm9kZSIsIl9wYXJhbXMiLCJub2RlSGVhZGVyIiwiYWRkQnVpbGRlcklucHV0VGV4dCIsInZhbCIsImJsayIsImJ0bkJsa0FkZCIsImJ0bkJsa0RlbCIsImhlYWRlciIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJuYW1lTm9kZSIsInByZXZCdXR0b24iLCJuZXh0QnV0dG9uIiwiYW5zd2VyIiwidHlwZSIsIkJsb2NrVHlwZSIsIk5PQU5TV0VSIiwidGV4dCIsIm1pbiIsIm1heCIsInN0ZXAiLCJjaG9pY2VzIiwiUkFESU8iLCJDSEVDS0JPWCIsImNob2ljZUpzb24iLCJjaG9pY2UiLCJDaG9pY2UiLCJjbGFzc2VzIiwibm9kZUNvbnRlbnQiLCJhZGRCb3hIZWFkZXIiLCJlbnVtQXJyYXkiLCJrZXlzIiwibWF0Y2giLCJtYXAiLCJuZXdBcnJheSIsImsiLCJjc3NDbGFzcyIsImFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duIiwiTnVtYmVyIiwidHJpZ2dlclN1YkVsZW1lbnRCbG9jayIsImJsa0Nob2ljZXNTdHlsZSIsIm5vZGVDaG9pY2VzIiwibGFiVGl0bGUiLCJjaCIsImFkZENob2ljZUJ1dHRvbiIsImJ0bkNoQWRkIiwiYnRuQ2hEZWwiLCJibGtTbGlkZXJTdHlsZSIsIlNMSURFUiIsIm5vZGVTbGlkZXIiLCJ0aXRsZU5vZGUiLCJCbG9ja1JhZGlvIiwiQmxvY2tDaGVja2JveCIsIkZSRUVURVhUIiwiQmxvY2tGcmVldGV4dCIsIkxPTkdURVhUIiwiQmxvY2tMb25ndGV4dCIsIkJsb2NrU2xpZGVyIiwiVEFHUyIsIkJsb2NrVGFncyIsInNsaWRlckJsb2NrIiwiY2hvaWNlQmxvY2siLCJlbGVtIiwibGFiZWwiLCJzaG93TGFiZWwiLCJpbnB1dCIsIm9uYmx1ciIsImxhYiIsInN1YkVsZW1lbnQiLCJjbGFzc05hbWUiLCJleWUxIiwiZXllMiIsInRvZ2dsZSIsIm9wdGlvbnMiLCJvbmNoYW5nZSIsImVsZW1lbnQiLCJvcHQiLCJzZXRBdHRyaWJ1dGVzIiwibGFiVmFsdWUiLCJpbnB1dFZhbHVlIiwibGFiTGFiZWwiLCJpbnB1dExhYmVsIiwiYmxvY2siLCJob2xkZXIiLCJmaWVsZCIsImRlZmF1bHRWYWx1ZSIsInJvdW5kIiwicGFyc2VGbG9hdCIsImlucHV0RGl2Iiwib3V0cHV0IiwiZiIsIl9kaXYiLCJjaGVja2VkQm94ZXMiLCJpZHMiLCJ0YWdzIiwidGFnIiwib3V0ZXJIVE1MIiwiZXZlbnQiLCJwcm9jZXNzTmV3S2V5d29yZCIsImZvcmNlUHJvY2VzcyIsImtleUNvZGUiLCJ0cmltIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFH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QUFJMEYsRUFBUyxFQUFBQyxRQUFRTCxjQUFjLFNBQVUsQ0FBQyxNQUFRLE1BQU8sS0FBTyxXQUNwRUksRUFBT0UsVUFBWSxpREFDbkJGLEVBQU9LLFFBQVdDLElBQ2Q0SSxFQUFLM0ksWUFBWTRJLEdBQ2pCYixFQUFNckUsT0FBU3FFLEVBQU1yRSxPQUFPeEQsUUFBTyxTQUFTQyxHQUFNLE9BQU9BLEVBQUdWLEVBQU9vSixXQUFhRCxFQUFJakosY0FFeEZpSixFQUFJL0ksWUFBWUosR0FDaEJrSixFQUFLOUksWUFBWStJLE1BNUZqQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi4vZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9idWlsZGVyLnRzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi50c1wiKTsiLCJcbmltcG9ydCB7U2VjdGlvbn0gZnJvbSAnLi9zZWN0aW9uJztcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSAnLi9idWlsZGVyJztcbi8vIGltcG9ydCAqIGFzIGRhdGEgZnJvbSAnLi9kYXRhLmpzb24nO1xuLy8gaW1wb3J0IENoYXJ0IGZyb20gJ2NoYXJ0anMnO1xuLy8gaW1wb3J0IGZvbnRhd2Vzb21lIGZyb20gJ0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlJztcblxuY29uc3QgZGF0YSA9IHJlcXVpcmUoJy4vZGF0YS5qc29uJyk7XG4vLyBjb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuXG5mdW5jdGlvbiBjb2xsZWN0aW9uSGFzKGEsIGIpIHsgLy9oZWxwZXIgZnVuY3Rpb24gKHNlZSBiZWxvdylcbiAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSArKykge1xuICAgICAgICBpZihhW2ldID09IGIpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBmaW5kUGFyZW50QnlTZWxlY3RvcihlbG0sIHNlbGVjdG9yKSB7XG4gICAgdmFyIGFsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgIHZhciBjdXIgPSBlbG0ucGFyZW50Tm9kZTtcbiAgICB3aGlsZShjdXIgJiYgIWNvbGxlY3Rpb25IYXMoYWxsLCBjdXIpKSB7IC8va2VlcCBnb2luZyB1cCB1bnRpbCB5b3UgZmluZCBhIG1hdGNoXG4gICAgICAgIGN1ciA9IGN1ci5wYXJlbnROb2RlOyAvL2dvIHVwXG4gICAgfVxuICAgIHJldHVybiBjdXI7IC8vd2lsbCByZXR1cm4gbnVsbCBpZiBub3QgZm91bmRcbn1cbmZ1bmN0aW9uIHN3YXBEb20oYSxiKSBcbntcbiAgICB2YXIgYVBhcmVudCA9IGEucGFyZW50Tm9kZTtcbiAgICB2YXIgYlBhcmVudCA9IGIucGFyZW50Tm9kZTtcblxuICAgIHZhciBhSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB2YXIgYkhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBhUGFyZW50LnJlcGxhY2VDaGlsZChhSG9sZGVyLGEpO1xuICAgIGJQYXJlbnQucmVwbGFjZUNoaWxkKGJIb2xkZXIsYik7XG5cbiAgICBhUGFyZW50LnJlcGxhY2VDaGlsZChiLGFIb2xkZXIpO1xuICAgIGJQYXJlbnQucmVwbGFjZUNoaWxkKGEsYkhvbGRlcik7ICAgIFxufVxuXG5cbmV4cG9ydCBjbGFzcyBQYXJhbXN7XG4gICAgc2luZ2xlU2VjdGlvbjpib29sZWFuO1xuICAgIGhpZGVFZGl0UXVlc3Rpb246Ym9vbGVhbjtcbiAgICBoaWRlUXVlc3Rpb25UeXBlOnt9O1xuICAgIGhpZGVRdWVzdGlvblR5cGVTZWxlY3Rpb246Ym9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFBpeGl1bUZvcm0ge1xuICAgIGpzb246Rm9ybURhdGE7XG4gICAgZGl2OnN0cmluZztcbiAgICBzZWN0aW9uczpTZWN0aW9uW107XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgbWFpbk5vZGU6IEhUTUxFbGVtZW50O1xuICAgIHRpdGxlTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY3VycmVudE5vZGU6IG51bWJlcjtcbiAgICBtb2RlOnN0cmluZztcbiAgICBkZWJ1Zzpib29sZWFuO1xuICAgIHBhcmFtczogUGFyYW1zO1xuICAgIHNhdmVCdG46IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IocGFyYW1zOkZvcm1EYXRhKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG4gICAgICAgIHRoaXMucGFyYW1zID0gbmV3IFBhcmFtcygpO1xuXG4gICAgICAgIGlmKCFwYXJhbXNbXCJkaXZcIl0pe1xuICAgICAgICAgICAgYWxlcnQoJ0RpdiBub3QgZm91bmQuIENhbm5vdCBkaXNwbGF5IHRoZSBmb3JtJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXYgPSBwYXJhbXNbXCJkaXZcIl07XG4gICAgICAgIHRoaXMubWFpbk5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpdik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICB0aGlzLm1haW5Ob2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29udGFpbmVyIGZvcm0tY29udGFpbmVyIGRyb3AtdGFyZ2V0c1wiKTtcblxuICAgICAgICBpZihwYXJhbXNbXCJkYXRhXCJdKXtcbiAgICAgICAgICAgIHRoaXMuanNvbiA9IHBhcmFtc1tcImRhdGFcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmpzb24gPSBkYXRhOy8vSlNPTi5wYXJzZSggZGF0YSApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gIC0tLS0tLS0tLS0tLSAgICBPTkxZIEFMTE9XIE9ORSBTRUNUSU9OIEZPUk1cbiAgICAgICAgaWYocGFyYW1zW1wic2luZ2xlU2VjdGlvblwiXSl7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5zaW5nbGVTZWN0aW9uID0gcGFyYW1zW1wic2luZ2xlU2VjdGlvblwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLnNpbmdsZVNlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgfSBcblxuICAgICAgICBpZihwYXJhbXNbXCJoaWRlRWRpdFF1ZXN0aW9uXCJdKXtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLmhpZGVFZGl0UXVlc3Rpb24gPSBwYXJhbXNbXCJoaWRlRWRpdFF1ZXN0aW9uXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMuaGlkZUVkaXRRdWVzdGlvbiA9IGZhbHNlO1xuICAgICAgICB9IFxuXG4gICAgICAgIHRoaXMucGFyYW1zLmhpZGVRdWVzdGlvblR5cGUgPSBKU09OLnBhcnNlKHBhcmFtc1snaGlkZVF1ZXN0aW9uVHlwZSddKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wYXJhbXMuaGlkZVF1ZXN0aW9uVHlwZSk7XG4gICAgICAgIHRoaXMucGFyYW1zLmhpZGVRdWVzdGlvblR5cGVTZWxlY3Rpb24gPSBwYXJhbXNbJ2hpZGVRdWVzdGlvblR5cGVTZWxlY3Rpb24nXTtcblxuICAgICAgICAvLyBCVUlMRCB0aGUgc2VjdGlvbiBzdWIgZWxlbWVudCAobm8gZ2VuZXJhdGVkIEhUTUwgYXQgdGhpcyBzdGFnZSB5ZXQpXG4gICAgICAgIGlmKHRoaXMuanNvbiAmJiB0aGlzLmpzb25bXCJzZWN0aW9uc1wiXSl7XG4gICAgICAgICAgICBsZXQgc2VjcyA9IHRoaXMuanNvbltcInNlY3Rpb25zXCJdO1xuICAgICAgICAgICAgc2Vjcy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlY3Rpb25Nb2RlbCA9IG5ldyBTZWN0aW9uKHRoaXMubWFpbk5vZGUsIHNlYywgKCghdGhpcy5wYXJhbXMuc2luZ2xlU2VjdGlvbikgPyAobmV4dFNsaWRlOmJvb2xlYW4pID0+dGhpcy5tb3ZlU2VjdGlvbihuZXh0U2xpZGUpIDogbnVsbCApKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VjdGlvbk1vZGVsKTtcblxuICAgICAgICAgICAgICAgIC8vIGxldCBpdGVtID0gc2VjdGlvbk1vZGVsLm5vZGU7XG4gICAgICAgICAgICAgICAgLy8gaXRlbS5vbmRyYWdzdGFydCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuZHJhZ1N0YXJ0KGUpO1xuICAgICAgICAgICAgICAgIC8vIH07XG4gICAgICAgICAgICAgICAgLy9pdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICAgICAgICAgIH0pOyBcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJDb3VsZCBub3QgaW5pdCB0aGUgbW9kdWxlLlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuanNvbik7XG4gICAgICAgIH0gICAgIFxuICAgICAgICBcbiAgICBcblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIFNUQVJUIFRIRSBBUFBMSUNBVElPTiBJTiBkZWJ1Z1xuICAgICAgICAgaWYocGFyYW1zW1wiZGVidWdcIl0pe1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IHBhcmFtc1tcImRlYnVnXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB9ICAgICAgIFxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgU1RBUlQgVEhFIEFQUExJQ0FUSU9OIElOIGJ1aWxkIE9SIHJ1biBNT0RFXG4gICAgICAgIGlmKHBhcmFtc1tcIm1vZGVcIl0pe1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gcGFyYW1zW1wibW9kZVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdydW4nO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMubW9kZSA9PT0gJ2J1aWxkJyl7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0IEluZGV4IGZyb20gSUQgXG4gICAgICovXG4gICAgZ2V0SW5kZXhGcm9tU2VjdGlvbklkKF9pZDpzdHJpbmcpe1xuICAgICAgICBmb3IobGV0IGk9MCA7IGk8dGhpcy5zZWN0aW9ucy5sZW5ndGggOyBpKyspe1xuICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1tpXS5pZCA9PSBfaWQpIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN3YXAgdG8gc2VjdGlvbiBlbGVtZW50IGZyb20gdGhlIHRhYmxlXG4gICAgICogQHBhcmFtIHMxIFxuICAgICAqIEBwYXJhbSBzMiBcbiAgICAgKi9cbiAgICBzd2FwU2VjdGlvbnMoczFfaWQ6bnVtYmVyLCBzMl9pZDpudW1iZXIpe1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25zKTtcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnNlY3Rpb25zW3MxX2lkXTtcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzMV9pZF0gPSB0aGlzLnNlY3Rpb25zW3MyX2lkXTtcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzMl9pZF0gPSB0ZW1wO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25zKTtcbiAgICB9XG5cbiAgICBcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqIFdoZW4gYSBlbGVtZW50IGlzIHNlbGVjdGVkIHRvIGJlIGRyYWdnZWRcbiAgICAgKi9cbiAgICBkcmFnU3RhcnQoZSl7XG4gICAgICAgIGxldCB0aGVfcGFyZW50ID0gZmluZFBhcmVudEJ5U2VsZWN0b3IoZS50YXJnZXQsIFwiLmRyb3AtdGFyZ2V0XCIpO1xuICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGhlX3BhcmVudC5pZCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBpZih0aGVfcGFyZW50KXsgXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJwYXJlbnQgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgLy8gdGhlX3BhcmVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KFwibm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoZV9wYXJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9XG4gICAgZHJhZ0VudGVyKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgdGhlX3BhcmVudCA9IGZpbmRQYXJlbnRCeVNlbGVjdG9yKGUudGFyZ2V0LCBcIi5kcm9wLXRhcmdldFwiKTtcbiAgICAgICAgaWYodGhlX3BhcmVudCkge1xuICAgICAgICAgICAgdGhlX3BhcmVudC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkcmFnT3ZlcihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIGlmKHRoZV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZHJhZ0xlYXZlKGUpIHtcbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIGlmKHRoZV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG4gICAgICAgICAgICAvLyB0aGVfcGFyZW50LmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhZ0VuZChlKSB7XG4gICAgICAgIGxldCB0aGVfcGFyZW50ID0gZmluZFBhcmVudEJ5U2VsZWN0b3IoZS50YXJnZXQsIFwiLmRyb3AtdGFyZ2V0XCIpO1xuICAgICAgICBpZih0aGVfcGFyZW50KSB7XG4gICAgICAgICAgICB0aGVfcGFyZW50LmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFdoZW4gYW4gZWxlbWVudCBpcyBkcmFnZ2VkIG92ZXJcbiAgICAgKi9cbiAgICBkcm9wKGUpIHtcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBkcmFnZ2FibGUgZWxlbWVudFxuICAgICAgICBjb25zdCBpZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgICAgbGV0IGRyYWdnYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgICAgICBsZXQgdGhlX3BhcmVudCA9IGZpbmRQYXJlbnRCeVNlbGVjdG9yKGUudGFyZ2V0LCBcIi5kcm9wLXRhcmdldFwiKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGRyYWdnYWJsZSl7XG4gICAgICAgICAgICBkcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG4gICAgICAgIGRyYWdnYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTtcblxuICAgICAgICBpZighdGhlX3BhcmVudCl7XG4gICAgICAgICAgICBhbGVydChcIm5vdCBwYXJlbnQgZm91bmRcIik7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbGV0IGlkMSA9IHRoaXMuZ2V0SW5kZXhGcm9tU2VjdGlvbklkKHRoZV9wYXJlbnQuaWQpO1xuICAgICAgICAgICAgbGV0IGlkMiA9IHRoaXMuZ2V0SW5kZXhGcm9tU2VjdGlvbklkKGRyYWdnYWJsZS5pZCk7XG4gICAgXG4gICAgICAgICAgICBpZihpZDEgIT0gaWQyKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN3YXBTZWN0aW9ucyhpZDEsIGlkMik7XG4gICAgICAgICAgICAgICAgc3dhcERvbSh0aGVfcGFyZW50LCBkcmFnZ2FibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBcblxuICAgICAgICAvLyBzd2l0Y2ggdGhlIDIgZWxlbWVudCBpbiB0aGUgU0VDVElPTiBMSVNUXG4gICAgICAgIC8vIHRoaXMuc2VjdGlvbnNcbiAgICBcbiAgICAgICAgLy8gbGV0IHRhcmdldEVsZW0gPSBlLnRhcmdldC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIC8vIGxldCBkZXN0RWxlbSA9IGRyYWdnYWJsZS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgLy8gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkZXN0RWxlbSwgZS50YXJnZXQucGFyZW50Tm9kZSk7ICAvLyByZW1vdmUgY2hpbGRyZW5cbiAgICAgICAgLy8gZHJhZ2dhYmxlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGFyZ2V0RWxlbSwgZHJhZ2dhYmxlLnBhcmVudE5vZGUpO1xuICAgIFxuICAgICAgICAvLyAvLyBkaXNwbGF5IHRoZSBkcmFnZ2FibGUgZWxlbWVudFxuICAgICAgICAvLyBkcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIFxuXG5cbiAgICAvKipcbiAgICAgKiBFbnRlciBCVUlMRCBNT0RFIGZvciB1c2VyIHRvIGVkaXQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZCgpe1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjOlNlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIHNlYy5idWlsZCh0aGlzLm1haW5Ob2RlLCB0aGlzLnBhcmFtcyk7XG4gICAgICAgICAgICBpZighdGhpcy5wYXJhbXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAgICAgaWYoIXRoaXMucGFyYW1zLmhpZGVFZGl0UXVlc3Rpb24pe1xuICAgICAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgU0VDVElPTiBCVE5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG5cbiAgICAgICAgICAgICAgICAgICAgc2VjLmNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGRlbEJ0bik7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzZWMubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IHNlYy5pZDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGl0ZW0gPSBzZWMuZHJhZ05vZGU7XG4gICAgICAgICAgICBpdGVtLm9uZHJhZ3N0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGFydChlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gZ2V0IGFsbCB0aGUgRElWIHRhZ2dlcyBwaXhpdW0tYm94IGFuZCBjb25uZWN0IGxpc3RlbmVyIGZvciBkcmFnIC8gZHJvcCBldmVudHNcbiAgICAgICAgbGV0IGJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5waXhpdW0tYm94XCIpO1xuICAgICAgICBib3hlcy5mb3JFYWNoKGJveCA9PiB7XG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5kcmFnRW50ZXIpXG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVyKTtcbiAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZSk7XG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB0aGlzLmRyb3AoZSkpO1xuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgaWYoIXRoaXMucGFyYW1zLnNpbmdsZVNlY3Rpb24pe1xuICAgICAgICAgICAgLy8gQlVJTEQgQUREIFNFQ1RJT04gQlROXG4gICAgICAgICAgICBsZXQgYWRkQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG4gZnVsbHdpZHRoXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICAgICAgYWRkQnV0dG9uLmlubmVyVGV4dCA9ICdBREQgU0VDVElPTic7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBsZXQgYnRuU2VjQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgICAgICBsZXQgc2VjID0gbmV3IFNlY3Rpb24odGhpcy5tYWluTm9kZSwgbnVsbCwgKCAobmV4dFNsaWRlOmJvb2xlYW4pID0+dGhpcy5tb3ZlU2VjdGlvbihuZXh0U2xpZGUpICkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWMpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoYnRuU2VjQWRkKTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWMuYnVpbGQodGhpcy5tYWluTm9kZSwgdGhpcy5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBTRUNUSU9OIEJUTlxuICAgICAgICAgICAgICAgIGxldCBidG5TZWNEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIiwgXCJpZFwiOlwiYnRuLWRlbGV0ZS1zZWN0aW9uLVwiK3NlYy5pZH0pO1xuICAgICAgICAgICAgICAgIGJ0blNlY0RlbC5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5gOyAgXG4gICAgICAgICAgICAgICAgYnRuU2VjRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLnJlbW92ZUNoaWxkKHNlYy5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBzZWMuaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNlYy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChidG5TZWNEZWwpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChidG5TZWNBZGQpO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTsgIFxuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQlVJTEQgVEhFIFNXSVRDSCBVSSBCVVRUT04gVE8gRE8gVE8gUlVOIE1PREUgSUYgREVCVUctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBsZXQgc3dpdGNoQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1wcmltYXJ5IGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIHN3aXRjaEJ1dHRvbi5pbm5lclRleHQgPSBcIkdPIFRPIFJVTlwiOyAgXG4gICAgICAgIHN3aXRjaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIHRoaXMucnVuKCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBSdW4gZm9yIHVzZXIgdG8gYW5zd2VyIHRoZSBxdWVzdGlvbnNcbiAgICAgKi9cbiAgICBydW4oKXtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgc2VjLnJ1bih0aGlzLm1haW5Ob2RlKTtcbiAgICAgICAgfSk7IFxuXG4gICAgICAgIC8vQ3JlYXRlIFNhdmUgYnRuXG4gICAgICAgIHRoaXMuc2F2ZUJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwic3VibWl0XCIsIFwiaWRcIjpcImZvcm0tYnVpbGRlci1zYXZlLWZpbmFsLWJ0blwifSk7ICBcbiAgICAgICAgdGhpcy5zYXZlQnRuLmlubmVyVGV4dCA9IFwiU2F2ZVwiOyAgXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5vbmNsaWNrID0gKGUpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBpZih0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlzQ29tcGxldGVkKCkpe1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZUpzb24oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGNvbXBsZXRlIHRoZSBmb3JtXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgXG4gICAgICAgIGlmKCh0aGlzLmN1cnJlbnROb2RlID09IHRoaXMuc2VjdGlvbnMubGVuZ3RoLTEpICYmICF0aGlzLnBhcmFtcy5zaW5nbGVTZWN0aW9uKXtcbiAgICAgICAgICAgIC8vUmVtb3ZlIE5leHQgYnRuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLmFmdGVyKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5wYXJhbXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvL0Rpc3BsYXkgc2F2ZUJ0blxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5ub2RlLmFwcGVuZENoaWxkKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gREVCVUcgU0FWRSBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHNhdmVCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1idG5cIn0pOyAgXG4gICAgICAgIHNhdmVCdXR0b24uaW5uZXJUZXh0ID0gXCJTQVZFXCI7ICBcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIHRoaXMuY29tcGlsZUpzb24oKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJVSUxEIFRIRSBTV0lUQ0ggVUkgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzd2l0Y2hCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXByaW1hcnkgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLmlubmVyVGV4dCA9IFwiR08gVE8gQlVJTEQgTU9ERVwiOyAgIFxuICAgICAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9XG5cbiAgICByZXN1bHQoKXtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENsZWFyIEFMTCB0aGUgbm9kZXNcbiAgICAgKi9cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm1haW5Ob2RlKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gJyc7ICAvLyBjbGVhciBhbGwgdGhlIHN1YiBub2Rlc1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoc2VjKXtcbiAgICAgICAgICAgICAgICAgICAgc2VjLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogZGlzcGxheSBhbGwgdGhlIHF1ZXN0aW9uXG4gICAgICovXG4gICAgZGlzcGxheSgpe1xuICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTAgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aCl7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21waWxlIGEgQklHIEpTT04gdG8gc2VyaWFsaXplIHRoZSB3aG9sZSBmb3JtXG4gICAgICovXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjogYW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWM6U2VjdGlvbikgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goc2VjLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoIHtcInNlY3Rpb25zXCI6YXJyfSApO1xuICAgICAgICBjb25zb2xlLmxvZygnZmluYWxPdXRwdXQnKTtcbiAgICAgICAgY29uc29sZS5sb2coZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gZmluYWxPdXRwdXQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIHRoZSBzbGlkZXIgb3IgZGlzcGxheSB0byB0aGUgbmV4dCBzZWN0aW9uXG4gICAgICovXG4gICAgbW92ZVNlY3Rpb24obmV4dFNsaWRlOmJvb2xlYW4pe1xuICAgICAgICAvLyBpZiBtb3ZlIGZvcndhcmRcbiAgICAgICAgaWYobmV4dFNsaWRlKXtcbiAgICAgICAgICAgIC8vIG1ha2luZyBzdXJlIEkgYW0gYWxsb3dlZCB0byBtb3ZlIHRvIHRoZSBuZXh0IHNsaWRlIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MCAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoLTEpe1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUrKztcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgUHJldmlvdXMgYnRuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2aW91cy1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGUgPT0gdGhpcy5zZWN0aW9ucy5sZW5ndGgtMSl7XG4gICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIE5leHQgYnRuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLmFmdGVyKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9EaXNwbGF5IE5leHQgYnRuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICBhbGVydChcIllvdSBhbHJlYWR5IGFyZSBvbiB0aGUgbmV4dCBzbGlkZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSBJIGFtIGFsbG93ZWQgdG8gbW92ZSB0byB0aGUgcHJldmlvdXMgc2xpZGUgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPj0xICYmIHRoaXMuY3VycmVudE5vZGU8dGhpcy5zZWN0aW9ucy5sZW5ndGgpe1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUtLTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgTmV4dCBidG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPT0wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIFByZXZpb3VzIGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXByZXZpb3VzLXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICBhbGVydChcIllvdSBhbHJlYWR5IGFyZSBvbiB0aGUgZmlyc3Qgc2xpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vc2VjdGlvbi50c1wiKTsiLCJpbXBvcnQge0Jsb2NrLCBCbG9ja1R5cGV9IGZyb20gXCIuL2Jsb2NrL2Jsb2NrXCI7XG5pbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuL2J1aWxkZXJcIjtcblxuaW1wb3J0IHtQYXJhbXN9IGZyb20gJy4vbWFpbic7XG5cbi8qKlxuICogU0VDVElPTiBjbGFzcyBjb250YWlucyBhIHBvdGVudGlhbCBsaXN0IG9mIHF1ZXN0aW9uIHRoYXQgaXMgZGlzcGxheWVkIG9uIHRoZSBzYW1lIHBhZ2UgXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWN0aW9ue1xuICAgIGJsb2NrczpCbG9ja1tdOyBcbiAgICB0aXRsZTogc3RyaW5nOyAgIFxuICAgIC8vIG5hbWU6IHN0cmluZztcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAgcGFyZW50OiBIVE1MRWxlbWVudDtcbiAgICBub2RlOiBIVE1MRWxlbWVudDtcbiAgICBjYWxsYmFjazogRnVuY3Rpb247XG4gICAgY29udGVudFdyYXBwZXI6IEhUTUxFbGVtZW50O1xuICAgIGRyYWdOb2RlOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKF9wYXJlbnQ6SFRNTEVsZW1lbnQsIF9qc29uOkZvcm1EYXRhLCBfY2FsbGJhY2s6RnVuY3Rpb24pe1xuICAgICAgICB0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gW107XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBfY2FsbGJhY2s7XG4gICAgICAgIHRoaXMudGl0bGUgPSAnJztcbiAgICAgICAgLy8gdGhpcy5uYW1lID0gXCJkZWZhdWx0X25hbWVcIjtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcInRpdGxlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gX2pzb25bXCJ0aXRsZVwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmKF9qc29uW1wibmFtZVwiXSl7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5uYW1lID0gX2pzb25bXCJuYW1lXCJdO1xuICAgICAgICAgICAgLy8gfVxuICAgIFxuICAgICAgICAgICAgaWYoX2pzb25bXCJibG9ja3NcIl0pe1xuICAgICAgICAgICAgICAgIF9qc29uW1wiYmxvY2tzXCJdLmZvckVhY2goIChiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja01vZGVsID0gbmV3IEJsb2NrKGIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsb2NrTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAvL2Jsb2NrTW9kZWwucnVuKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGZvcm0gaW4gQlVJTERFUiBNT0RFIGZvciB0aGUgdXNlciB0byBlZGl0IHRoZSBmb3JtIGl0c2VsZlxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIGJ1aWxkKF9ub2RlLCBfcGFyYW1zOlBhcmFtcyl7XG4gICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1ib3gtY29udGVudCBkcm9wLXRhcmdldFwiLFxuICAgICAgICAgICAgLy8gXCJkcmFnZ2FibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiaWRcIjogdGhpcy5pZFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gX25vZGUuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50V3JhcHBlcik7XG5cbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJveFwiLFxuICAgICAgICAgICAgXCJpZFwiOlwiaG9sZGVyLVwiK3RoaXMuaWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gdGhpcy5ub2RlLm9uZHJhZ3N0YXJ0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcImRyYWcgc3RhcnRcIik7XG4gICAgICAgIC8vICAgICAoSFRNTEVsZW1lbnQoZXZlbnQudGFyZ2V0KSkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIC8vIH07XG5cbiAgICAgICAgdGhpcy5kcmFnTm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImZhIGZhLXRoIGRyYWctY3Vyc29yXCIsXG4gICAgICAgICAgICBcImRyYWdnYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJpZFwiOlwiZHJhZ05vZC1cIit0aGlzLmlkXG4gICAgICAgIH0pO1xuICAgICAgICAvLyB0aGlzLmRyYWdOb2RlLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLWJhcnNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcbiAgICAgICAgLy8gdGhpcy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmRyYWdOb2RlKTtcblxuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHNlY3Rpb24gaGVhZGVyIGRpdiB3aXRoIHRpdGxlIGFuZCBuYW1lIGlucHV0XG4gICAgICAgIGxldCBub2RlSGVhZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ibG9jay1idWlsZCBwaXhpdW0tYmxvY2stYnVpbGQtaGVhZGVyXCJ9KTtcbiAgICAgICAgXG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlSGVhZGVyLCB0aGlzLmlkLCB0aGlzLnRpdGxlLCBcIlRpdGxlIFNlY3Rpb25cIiwgKHZhbCkgPT4ge3RoaXMudGl0bGU9dmFsO30sIFwiY29sLW1kLTEyXCIgKTtcbiAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChub2RlSGVhZGVyKTtcbiAgICAgICAgbm9kZUhlYWRlci5jaGlsZHJlblswXS5hcHBlbmRDaGlsZCh0aGlzLmRyYWdOb2RlKTtcbiAgICAgICAgLy9ub2RlSGVhZGVyLmluc2VydEJlZm9yZSh0aGlzLmRyYWdOb2RlLCBub2RlSGVhZGVyLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgXG5cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gR08gVEhST1VHSCBFQUNIIEJMT0NLIFdJVEhJTiBUSEUgU0VDVElPTlxuICAgICAgICAvLyBXZSBhcmUgZ29pbmcgdG8gYnVpbGQgdGhlIHZhcmlvdXMgYmxvY2tzICFcbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJmb3JtLWJ1aWxkZXItYnRuIGJ1dHRvbi1kZWxldGVcIiwgXCJ0eXBlXCI6XCJidXR0b25cIiwgXCJzdHlsZVwiOlwiZGlzcGxheTpibG9ja1wifSk7XG4gICAgICAgICAgICBkZWxCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGJsay5ub2RlLmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgICAgICBpZihfcGFyYW1zLmhpZGVFZGl0UXVlc3Rpb24pe1xuICAgICAgICAgICAgICAgIGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTiBBQ1RJT05cbiAgICAgICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIucmVtb3ZlQ2hpbGQoYmxrLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHRoaXMuYmxvY2tzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gYmxrLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsay5idWlsZCh0aGlzLmNvbnRlbnRXcmFwcGVyLCBfcGFyYW1zLCBkZWxCdG4pOyAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8gQlVJTEQgQUREIEJPTENLIEJUTlxuICAgICAgICBpZighX3BhcmFtcy5oaWRlRWRpdFF1ZXN0aW9uKXtcbiAgICAgICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5pbm5lckhUTUwgPSAnKyc7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBsZXQgYnRuQmxrQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgICAgICAvLyBBREQgTkVXIEJPTENLXG4gICAgICAgICAgICAgICAgbGV0IGJsayA9IG5ldyBCbG9jayhudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsayk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5yZW1vdmVDaGlsZChidG5CbGtBZGQpO1xuICAgICAgICAgICAgICAgIGxldCBidG5TZWNEZWw7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgIGJ0blNlY0RlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLWRlbGV0ZS1zZWN0aW9uLVwiK3RoaXMuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLnJlbW92ZUNoaWxkKGJ0blNlY0RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJsay5idWlsZCh0aGlzLmNvbnRlbnRXcmFwcGVyLCBfcGFyYW1zLCBmYWxzZSwgXCJcIik7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgICAgIGxldCBidG5CbGtEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImZvcm0tYnVpbGRlci1idG4gYnV0dG9uLWRlbGV0ZSBmbG9hdC1yaWdodFwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcInN0eWxlXCI6XCJkaXNwbGF5OmJsb2NrXCJ9KTtcbiAgICAgICAgICAgICAgICBidG5CbGtEZWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgIFxuICAgICAgICAgICAgICAgIGJ0bkJsa0RlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5yZW1vdmVDaGlsZChibGsubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gdGhpcy5ibG9ja3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBibGsuaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJsay5oZWFkZXIuaW5zZXJ0QmVmb3JlKGJ0bkJsa0RlbCwgYmxrLmhlYWRlci5maXJzdENoaWxkKTtcbiAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGJ0bkJsa0FkZCk7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQoYnRuU2VjRGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRXcmFwcGVyKTtcblxuICAgICAgICBfbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuXG5cbiAgICAvKipcbiAgICAgKiBSdW4gdGhlIGZvcm0gZm9yIHVzZXIgdG8gYW5zd2VyXG4gICAgICogQHBhcmFtIG5vZGUgXG4gICAgICovXG4gICAgcnVuKG5vZGUpe1xuXG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ib3hcIlxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG5hbWVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICAgICAgICBuYW1lTm9kZS5pbm5lckhUTUwgPSB0aGlzLnRpdGxlO1xuICAgICAgICAvLyBsZXQgaHJOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImhyXCIpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobmFtZU5vZGUpO1xuICAgICAgICAvLyB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaHJOYW1lKTtcblxuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYikgPT4ge1xuICAgICAgICAgICAgYi5ydW4odGhpcy5ub2RlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ25vZGUuc2luZ2xlU2VjdGlvbicpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNhbGxiYWNrKTtcbiAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAvLyBCVUlMRCBUSEUgQlVUVE9OLiBQUkVWSU9VUyBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGxldCBwcmV2QnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1wcmltYXJ5IGZvcm0tYnVpbGRlci1idG5cIiwgXCJpZFwiOiBcImJ0bi1wcmV2aW91cy1zZWN0aW9uLVwiK3RoaXMuaWQsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICAgICAgcHJldkJ1dHRvbi5pbm5lclRleHQgPSBcIlByZXZpb3VzXCI7XG4gICAgICAgICAgICBwcmV2QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7ICBcbiAgICAgICAgICAgIHByZXZCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICAgICAgeyAgIFxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgICAgICAvLyBUUlVFIEZPUiBORVhUIFNMSURFXG4gICAgICAgICAgICAgICAgICAgIC8vIEZBTFNFIEZPUiBQUkVWIFNMSURFXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07ICBcbiAgICAgICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChwcmV2QnV0dG9uKTtcblxuICAgICAgICAgICAgLy8gQlVJTEQgVEhFIEJVVFRPTi4gTkVYVCBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGxldCBuZXh0QnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1wcmltYXJ5IGZvcm0tYnVpbGRlci1idG5cIiwgXCJpZFwiOiBcImJ0bi1uZXh0LXNlY3Rpb24tXCIrdGhpcy5pZCwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgICAgICBuZXh0QnV0dG9uLmlubmVyVGV4dCA9IFwiTmV4dFwiOyAgXG4gICAgICAgICAgICBuZXh0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBpZih0aGlzLmlzQ29tcGxldGVkKCkpe1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRSVUUgRk9SIE5FWFQgU0xJREVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZBTFNFIEZPUiBQUkVWIFNMSURFXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGNvbXBsZXRlIHRoZSBmb3JtLi4uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07ICBcbiAgICAgICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChuZXh0QnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5ub2RlKXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrKSA9PiB7XG4gICAgICAgICAgICBibGsuY2xlYXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0Tm9kZSgpe1xuICAgICAgICBhbGVydCh0aGlzLm5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhpZGUgdGhlIGN1cnJlbnQgc2VjdGlvblxuICAgICAqL1xuICAgIHNob3coKXtcbiAgICAgICAgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSB0aGUgY3VycmVudCBzZWN0aW9uIG9uIHNjcmVlblxuICAgICAqL1xuICAgIGhpZGUoKXtcbiAgICAgICAgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIHRoZSBGT1JNIGhhcyBiZWVuIGZ1bGx5IGNvbXBsZXRlZCAtIEFsbCBibG9ja3MgaGF2ZSBhIHZhbGlkIGFuc3dlclxuICAgICAqL1xuICAgIGlzQ29tcGxldGVkKCl7XG4gICAgICAgIGxldCBpc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGs6QmxvY2spPT57XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibGsuYW5zd2VyKTtcbiAgICAgICAgICAgIGlmKGJsayAmJiAoYmxrLmFuc3dlci5sZW5ndGg9PTApICYmIChibGsudHlwZSAhPT0gQmxvY2tUeXBlLk5PQU5TV0VSKSl7XG4gICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpc0NvbXBsZXRlZDtcbiAgICB9XG5cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6YW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKSA9PiB7XG4gICAgICAgICAgICBhcnIucHVzaChibGsuY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc2VjID0ge1xuICAgICAgICAgICAgXCJ0aXRsZVwiOiB0aGlzLnRpdGxlLFxuICAgICAgICAgICAgXCJibG9ja3NcIjphcnJcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VjO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcbmltcG9ydCB7Q2hvaWNlfSBmcm9tIFwiLi9jaG9pY2VcIjtcblxuaW1wb3J0IHtCbG9ja1NsaWRlcn0gZnJvbSBcIi4vYmxvY2tTbGlkZXJcIjtcbmltcG9ydCB7QmxvY2tGcmVldGV4dH0gZnJvbSBcIi4vYmxvY2tGcmVldGV4dFwiO1xuaW1wb3J0IHtCbG9ja1JhZGlvfSBmcm9tIFwiLi9ibG9ja1JhZGlvXCI7XG5pbXBvcnQgeyBCbG9ja0NoZWNrYm94IH0gZnJvbSBcIi4vYmxvY2tDaGVja2JveFwiO1xuaW1wb3J0IHtCbG9ja0xvbmd0ZXh0fSBmcm9tIFwiLi9ibG9ja0xvbmd0ZXh0XCI7XG5pbXBvcnQge0Jsb2NrVGFnc30gZnJvbSBcIi4vQmxvY2tUYWdzXCI7XG5pbXBvcnQgeyBQYXJhbXMgfSBmcm9tIFwiLi4vbWFpblwiO1xuLy8gaW1wb3J0IHtCbG9ja05vYW5zd2VyfSBmcm9tIFwiLi9ibG9ja05vYW5zd2VyXCI7XG5cbmV4cG9ydCBlbnVtIEJsb2NrVHlwZSB7XG4gICAgRlJFRVRFWFQgPSAxLFxuICAgIFJBRElPID0gMixcbiAgICBTTElERVIgPSAzLFxuICAgIENIRUNLQk9YID0gNCxcbiAgICBMT05HVEVYVCA9IDUsXG4gICAgTk9BTlNXRVIgPSA2LFxuICAgIFRBR1MgPSA3XG59XG5cblxuLyoqXG4gKiBBIEJsb2NrIGlzIGEgbGlzdCBcbiAqL1xuZXhwb3J0IGNsYXNzIEJsb2Nre1xuICAgIHR5cGU6bnVtYmVyO1xuICAgIHRleHQ6c3RyaW5nO1xuICAgIGFuc3dlcjphbnk7XG4gICAgbWluOnN0cmluZztcbiAgICBtYXg6c3RyaW5nO1xuICAgIHN0ZXA6c3RyaW5nO1xuICAgIGNob2ljZXM6Q2hvaWNlW107XG5cbiAgICBoZWFkZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICBvdXRwdXQ6c3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBqc29uOmFueTtcblxuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuXG4gICAgLypcbiAgICBcInRpdGxlXCI6IFwiREVMRUdBVElPTjogPGJyPiA8YnI+IEhvdyBza2lsbGVkIGRvIHlvdSBmZWVsIHRvZGF5IGFib3V0IHlvdXIgYWJpbGl0eSB0byBkZWxlZ2F0ZT9cIixcbiAgICBcInR5cGVcIjogNCxcbiAgICBcImdyb3VwXCI6IDEsXG4gICAgXCJsYWJlbFwiOiBcbiAgICAqL1xuXG4gICAgY29uc3RydWN0b3IoX2pzb246Rm9ybURhdGEgPSBudWxsKXtcbiAgICAgICAgdGhpcy5qc29uID0gX2pzb247XG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMubWluID0gXCJcIjtcbiAgICAgICAgdGhpcy5tYXggPSBcIlwiO1xuICAgICAgICB0aGlzLnN0ZXAgPSBcIlwiO1xuICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2hvaWNlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJ0ZXh0XCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBfanNvbltcInRleHRcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widHlwZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gX2pzb25bXCJ0eXBlXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgICAgICBpZihfanNvbltcImFuc3dlclwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSBfanNvbltcImFuc3dlclwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJtaW5cIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubWluID0gX2pzb25bXCJtaW5cIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfanNvbltcIm1heFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSBfanNvbltcIm1heFwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF9qc29uW1wic3RlcFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gX2pzb25bXCJzdGVwXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5SQURJTyB8fCB0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCl7XG4gICAgICAgICAgICAgICAgLy8gbG9hZCBhZGRpdGlvbmFsIGRhdGFcbiAgICAgICAgICAgICAgICBpZihfanNvbltcImNob2ljZXNcIl0pe1xuICAgICAgICAgICAgICAgICAgICBfanNvbltcImNob2ljZXNcIl0uZm9yRWFjaChjaG9pY2VKc29uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaG9pY2UgPSBuZXcgQ2hvaWNlKGNob2ljZUpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzLnB1c2goY2hvaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGhpcy5jaG9pY2VzID0gX2pzb25bXCJjaG9pY2VzXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBhbmQgcmVtb3ZlIGFsbCB0aGUgSFRNTCBOb2RlXG4gICAgICovXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5ub2RlKXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gYnVpbGQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZChub2RlLCBwYXJhbXM6UGFyYW1zLCBkZWxCdG4gPSBudWxsLCBjbGFzc2VzOnN0cmluZyA9IFwiY29sbGFwc2VcIil7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCIgOiBcInJvdyBwaXhpdW0tYmxvY2stYnVpbGRcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBsZXQgaHIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJoclwiLCB7XG4gICAgICAgIC8vICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWhyIGNvbC1tZC0xMlwiXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIGxldCBoZWFkZXJCb3ggPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAvLyAgICAgXCJpZFwiOiBcImhlYWRlcl9ib3hcIit0aGlzLmlkLFxuICAgICAgICAvLyAgICAgXCJjbGFzc1wiOiBcImNvbGxhcHNlXCJcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgbGV0IG5vZGVDb250ZW50ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgICdjbGFzcyc6ICdjb2wtbWQtMTIgJytjbGFzc2VzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaGVhZGVyID0gQnVpbGRlci5hZGRCb3hIZWFkZXIodGhpcy5ub2RlLCB0aGlzLmlkLCBub2RlQ29udGVudCwgZGVsQnRuKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KHRoaXMuaGVhZGVyLCB0aGlzLmlkLCB0aGlzLnRleHQsIFwiVGV4dFwiLCAodmFsKSA9PiB7dGhpcy50ZXh0PXZhbDt9LCBcImNvbC1tZC0xMFwiICk7XG5cbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5vZGVDb250ZW50KTtcblxuICAgICAgICAvLyBDUkVBVEUgVEhFIExJU1QgRk9SIFRIRSBfX0RST1BET1dOX19cbiAgICAgICAgbGV0IGVudW1BcnJheSA9IE9iamVjdC5rZXlzKEJsb2NrVHlwZSkuZmlsdGVyKGE9PmEubWF0Y2goL15cXEQvKSkubWFwKG5hbWU9Pih7bmFtZSwgdmFsdWU6IEJsb2NrVHlwZVtuYW1lXSBhcyBudW1iZXJ9KSk7XG5cbiAgICAgICAgbGV0IG5ld0FycmF5ID0gW107XG4gICAgICAgIGlmKHBhcmFtcy5oaWRlUXVlc3Rpb25UeXBlKXtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic3RhcnQgZmlsdGVyaW5nIDpcIik7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXJhbXMuaGlkZVF1ZXN0aW9uVHlwZSk7XG4gICAgICAgICAgICBmb3IodmFyIGk9MCA7IGk8ZW51bUFycmF5Lmxlbmd0aCA7IGkrKyl7XG4gICAgICAgICAgICAgICAgbGV0IGsgPSBlbnVtQXJyYXlbaV1bJ25hbWUnXTtcbiAgICAgICAgICAgICAgICBpZihrKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGFyYW1zLmhpZGVRdWVzdGlvblR5cGVba10pO1xuICAgICAgICAgICAgICAgICAgICBpZighcGFyYW1zLmhpZGVRdWVzdGlvblR5cGVba10pe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXJyYXkucHVzaChlbnVtQXJyYXlbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiTk8gZmlsdGVyaW5nICFcIik7XG4gICAgICAgICAgICBuZXdBcnJheSA9IGVudW1BcnJheTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdBcnJheSlcbiAgICAgICAgXG4gICAgICAgIC8vIGVudW1BcnJheS5tYXAoKGVsZW0pID0+IChcbiAgICAgICAgLy8gICAgIGlmKHBhcmFtc1tcInF1ZXN0aW9uVHlwZVwiXSAmJiBwYXJhbXNbXCJxdWVzdGlvblR5cGVcIl1bZWxlbVsnJ11dKVxuICAgICAgICAvLyApKTtcblxuICAgICAgICBsZXQgY3NzQ2xhc3M9XCJcIjtcbiAgICAgICAgaWYocGFyYW1zLmhpZGVRdWVzdGlvblR5cGVTZWxlY3Rpb24pe1xuICAgICAgICAgICAgY3NzQ2xhc3MgPSBcImhpZGRlblwiO1xuICAgICAgICB9XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0RHJvcGRvd24obm9kZUNvbnRlbnQsIHRoaXMuaWQsIHRoaXMudHlwZSwgXCJUeXBlXCIsICh2YWwpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHlwZT1OdW1iZXIodmFsKTtcbiAgICAgICAgICAgIHRoaXMuYW5zd2VyPScnO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3ViRWxlbWVudEJsb2NrKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSwgbmV3QXJyYXksIFwiY29sLW1kLTQgXCIrY3NzQ2xhc3MgKTtcblxuICAgICAgICAvLyAtLS0tIEZpZWxkIGZvciBDaG9pY2VzIGJsb2NrXG4gICAgICAgIGxldCBibGtDaG9pY2VzU3R5bGUgPSBcIlwiO1xuICAgICAgICBpZigodGhpcy50eXBlICE9PSBCbG9ja1R5cGUuUkFESU8pICYmICh0aGlzLnR5cGUgIT09IEJsb2NrVHlwZS5DSEVDS0JPWCkpe1xuICAgICAgICAgICAgYmxrQ2hvaWNlc1N0eWxlID0gXCJkaXNwbGF5Om5vbmU7XCJcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IG5vZGVDaG9pY2VzID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJjaG9pY2VzX2Jsb2NrX1wiK3RoaXMuaWQsXG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiY29sLW1kLTEyIGN1c3RvbV9ibG9ja190eXBlXCIsXG4gICAgICAgICAgICBcInN0eWxlXCI6IGJsa0Nob2ljZXNTdHlsZVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgbGFiVGl0bGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgbGFiVGl0bGUuaW5uZXJIVE1MID0gXCJDaG9pY2VzIDogXCI7XG4gICAgICAgIG5vZGVDaG9pY2VzLmFwcGVuZENoaWxkKGxhYlRpdGxlKTtcbiAgICAgICAgaWYodGhpcy5jaG9pY2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdGhpcy5jaG9pY2VzLmZvckVhY2goIChjaDpDaG9pY2UpID0+IHtcbiAgICAgICAgICAgICAgICBjaC5idWlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImZvcm0tYnVpbGRlci1idG4gYnV0dG9uLWRlbGV0ZSBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgIFxuICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUNob2ljZXMucmVtb3ZlQ2hpbGQoY2gubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMuY2hvaWNlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGNoLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjaC5ub2RlLmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJVSUxEIEFERCBCT0xDSyBCVE5cbiAgICAgICAgbGV0IGFkZENob2ljZUJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBhZGRDaG9pY2VCdXR0b24uaW5uZXJIVE1MID0gJysnOyAgXG4gICAgICAgIGFkZENob2ljZUJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgbGV0IGJ0bkNoQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgIC8vIEFERCBORVcgQk9MQ0tcbiAgICAgICAgICAgIGxldCBjaCA9IG5ldyBDaG9pY2UobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNob2ljZXMucHVzaChjaCk7XG4gICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChidG5DaEFkZCk7XG4gICAgICAgICAgICBjaC5idWlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICBsZXQgYnRuQ2hEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgYnRuQ2hEZWwuaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICBidG5DaERlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChjaC5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNob2ljZXMgPSB0aGlzLmNob2ljZXMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBjaC5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNoLm5vZGUuYXBwZW5kQ2hpbGQoYnRuQ2hEZWwpO1xuXG4gICAgICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChidG5DaEFkZCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgbm9kZUNob2ljZXMuYXBwZW5kQ2hpbGQoYWRkQ2hvaWNlQnV0dG9uKTtcblxuICAgICAgICBub2RlQ29udGVudC5hcHBlbmRDaGlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgIC8vIC0tLS0gXG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgU2xpZGVyIGJsb2NrXG4gICAgICAgIGxldCBibGtTbGlkZXJTdHlsZSA9IFwiXCI7XG4gICAgICAgIGlmKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlNMSURFUil7XG4gICAgICAgICAgICBibGtTbGlkZXJTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGVTbGlkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImNvbC1tZC0xMiBjdXN0b21fYmxvY2tfdHlwZVwiLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBibGtTbGlkZXJTdHlsZVxuICAgICAgICB9KTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMubWluLCBcIk1pblwiLCAodmFsKSA9PiB7dGhpcy5taW49dmFsO30sIFwiY29sLW1kLTRcIiwgdHJ1ZSApO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5tYXgsIFwiTWF4XCIsICh2YWwpID0+IHt0aGlzLm1heD12YWw7fSwgXCJjb2wtbWQtNFwiLCB0cnVlICk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLnN0ZXAsIFwiU3RlcFwiLCAodmFsKSA9PiB7dGhpcy5zdGVwPXZhbDt9LCBcImNvbC1tZC00XCIsIHRydWUgKTtcbiAgICAgICAgbm9kZUNvbnRlbnQuYXBwZW5kQ2hpbGQobm9kZVNsaWRlcik7XG4gICAgICAgIC8vIC0tLS1cblxuICAgICAgICAvLyB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaHIpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG4gICAgXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB1c2VkIHRvIFJ1biB0aGUgZm9ybVxuICAgICAqL1xuICAgIHJ1bihub2RlKXtcbiAgICAgICAgLy8gYWxlcnQoXCJDXCIpO1xuICAgICAgICBsZXQgdGl0bGVOb2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwicFwiKTsgLy9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgdGl0bGVOb2RlLmlubmVySFRNTCA9IHRoaXMudGV4dDtcbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tYmxvY2stcnVuLXF1ZXN0aW9uXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aXRsZU5vZGUpO1xuXG4gICAgICAgIHN3aXRjaCh0aGlzLnR5cGUpe1xuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuUkFESU86XG4gICAgICAgICAgICAgICAgQmxvY2tSYWRpby5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuQ0hFQ0tCT1g6XG4gICAgICAgICAgICAgICAgQmxvY2tDaGVja2JveC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuRlJFRVRFWFQ6XG4gICAgICAgICAgICAgICAgQmxvY2tGcmVldGV4dC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkxPTkdURVhUOlxuICAgICAgICAgICAgICAgIEJsb2NrTG9uZ3RleHQucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLk5PQU5TV0VSOlxuICAgICAgICAgICAgICAgIC8vIEJsb2NrTm9hbnN3ZXIucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLlNMSURFUjpcbiAgICAgICAgICAgICAgICBCbG9ja1NsaWRlci5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuVEFHUzpcbiAgICAgICAgICAgICAgICBCbG9ja1RhZ3MucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIGxldCBociA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImhyXCIsIHtcbiAgICAgICAgLy8gICAgIFwiY2xhc3NcIjogXCJwaXhpdW0taHJcIlxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCl7XG4gICAgfVxuXG5cblxuICAgIHRyaWdnZXJTdWJFbGVtZW50QmxvY2soKXtcbiAgICAgICAgbGV0IHNsaWRlckJsb2NrID0gbnVsbDtcbiAgICAgICAgaWYoc2xpZGVyQmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5TTElERVIpe1xuICAgICAgICAgICAgICAgIHNsaWRlckJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbGlkZXJCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIFNpbGRlciBub3QgZm91bmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2hvaWNlQmxvY2sgPSBudWxsO1xuICAgICAgICBpZihjaG9pY2VCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZigodGhpcy50eXBlID09PSBCbG9ja1R5cGUuUkFESU8pIHx8ICh0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCkpe1xuICAgICAgICAgICAgICAgIGNob2ljZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjaG9pY2VCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIENob2ljZSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6YW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCggKGNoOkNob2ljZSkgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goY2guY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmpzb24gPSB7XG4gICAgICAgICAgICBcInR5cGVcIjp0aGlzLnR5cGUsXG4gICAgICAgICAgICBcInRleHRcIjp0aGlzLnRleHQsXG4gICAgICAgICAgICBcImFuc3dlclwiOnRoaXMuYW5zd2VyLFxuICAgICAgICAgICAgXCJtaW5cIjp0aGlzLm1pbixcbiAgICAgICAgICAgIFwibWF4XCI6dGhpcy5tYXgsXG4gICAgICAgICAgICBcInN0ZXBcIjp0aGlzLnN0ZXAsXG4gICAgICAgICAgICBcImNob2ljZXNcIjogYXJyXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbjtcbiAgICB9XG59IiwiXG5leHBvcnQgY2xhc3MgQnVpbGRlcntcblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGFuZCBzZXQgYWxsIHRoZSBhdHRyaWJ1dGUgb2YgYSBIVE1MIEVsZW1lbnQgbm9kZVxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBpbnB1dCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gX3BhcmFtcyBUaGUgYXR0cmlidXRlcyBsaXN0IHRvIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVFbGVtZW50KHR5cGU6c3RyaW5nLCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZighdHlwZSl7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBidWlsZCB0aGUgZWxlbWVudFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgaWYoX3BhcmFtcyl7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3BhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9wYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB3aWxsIHNldCBhbGwgYXR0cmlidXRlIGludG8gYSBzcGVjaWZpYyBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW0gRWxlbWVudCB0byBzZXQgdGUgYXR0cmlidXRlIG9mXG4gICAgICogQHBhcmFtIF9wYXJhbXMgVGhlIGF0dHJpYnV0ZXMgbGlzdCB0byBzZXRcbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0QXR0cmlidXRlcyhlbGVtOkhUTUxFbGVtZW50LCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZihfcGFyYW1zKXtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3BhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0VGV4dChub2RlLCBpZCwgdmFsdWUsIGxhYmVsLCBjYWxsYmFjaywgY2xhc3Nlcz1cImNvbC1tZC0xMlwiLCBzaG93TGFiZWwgPSBmYWxzZSl7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgXCIrY2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGxldCBpbnB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogbGFiZWxcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlKTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgaWYoc2hvd0xhYmVsKXtcbiAgICAgICAgICAgIGxldCBsYWIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgICAgICAgICAgICAgJ3N0eWxlJzogJ2Zsb2F0OmxlZnQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxhYi5pbm5lckhUTUwgPSBsYWJlbCtcIjogXCI7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH1cblxuXG4gICAgc3RhdGljIGFkZEJveEhlYWRlcihub2RlLCBpZCwgc3ViRWxlbWVudCwgZGVsQnRuKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiY29sLW1kLTEyIGJsb2NrLWhlYWRlciBibG9jay1oZWFkZXItXCIraWQgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFkZCB0aGUgZGVsZXRlIGJ1dHRvbiBpbiB0aGUgaGVhZGVyIGRpcmVjdGx5XG4gICAgICAgIGlmKGRlbEJ0bil7XG4gICAgICAgICAgICBkZWxCdG4uY2xhc3NOYW1lICs9IFwiIGZsb2F0LXJpZ2h0XCI7XG4gICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBleWUxID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaVwiLCB7XCJjbGFzc1wiOlwiZmEgZmEtY2FyZXQtbGVmdCBmbG9hdC1yaWdodFwiLCBcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCJ9KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGV5ZTEpO1xuICAgICAgICBsZXQgZXllMiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlcIiwge1wiY2xhc3NcIjpcImZhIGZhLWNhcmV0LWRvd24gZmxvYXQtcmlnaHQgaGlkZGVuXCIsIFwiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0pO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoZXllMik7XG5cbiAgICAgICAgXG4gICAgICAgIFxuXG5cbiAgICAgICAgZXllMS5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBzdWJFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJjb2xsYXBzZVwiKTtcbiAgICAgICAgICAgIGV5ZTEuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICAgICAgICAgIGV5ZTIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgZXllMi5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBzdWJFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJjb2xsYXBzZVwiKTtcbiAgICAgICAgICAgIGV5ZTEuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICAgICAgICAgIGV5ZTIuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICBcblxuICAgICAgICAvLyBsZXQgbGFiID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIC8vIGxhYi5pbm5lckhUTUwgPSBsYWJlbDtcbiAgICAgICAgLy8gZGl2LmFwcGVuZENoaWxkKGxhYik7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG5cbiAgICAvKlxuPHNlbGVjdCBuYW1lPVwiY2Fyc1wiIGlkPVwiY2Fyc1wiPlxuICA8b3B0aW9uIHZhbHVlPVwidm9sdm9cIj5Wb2x2bzwvb3B0aW9uPlxuICA8b3B0aW9uIHZhbHVlPVwic2FhYlwiPlNhYWI8L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cIm1lcmNlZGVzXCI+TWVyY2VkZXM8L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cImF1ZGlcIj5BdWRpPC9vcHRpb24+XG48L3NlbGVjdD5cbiAgICAqL1xuICAgIHN0YXRpYyBhZGRCdWlsZGVySW5wdXREcm9wZG93bihub2RlLCBpZCwgdmFsdWUsIGxhYmVsLCBjYWxsYmFjaywgb3B0aW9ucywgY2xhc3Nlcz1cImNvbC1tZC0xMlwiKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBcIitjbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFiID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYi5pbm5lckhUTUwgPSBsYWJlbCtcIjogXCI7XG4gICAgICAgIGxldCBpbnB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWRyb3Bkb3duXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHZhbHVlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IGxhYmVsK1wiX1wiK2lkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImRpc3BsYXk6YmxvY2tcIlxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXQub25jaGFuZ2UgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlKTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgb3B0aW9ucy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgbGV0IG9wdCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBlbGVtZW50LnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZih2YWx1ZT09PWVsZW1lbnQudmFsdWUpe1xuICAgICAgICAgICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhvcHQsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RlZFwiOlwic2VsZWN0ZWRcIlxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHQuaW5uZXJIVE1MID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQob3B0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGxhYik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9jaG9pY2UudHNcIik7IiwiXG5pbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDaG9pY2V7XG4gICAgbGFiZWw6c3RyaW5nO1xuICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIGpzb246YW55O1xuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoX2pzb24pe1xuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gICAgICAgIGlmKF9qc29uKXtcbiAgICAgICAgICAgIGlmKF9qc29uW1wibGFiZWxcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubGFiZWwgPSBfanNvbltcImxhYmVsXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfanNvbltcInZhbHVlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gX2pzb25bXCJ2YWx1ZVwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gYnVpbGQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZChub2RlKXtcbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tcm93LWJsb2NrIGJsb2NrLWNob2ljZXMgY29sLW1kLTEyXCIsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDUkVBVEUgVkFMVUUgSU5QVVRcbiAgICAgICAgbGV0IGxhYlZhbHVlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1wiZm9yXCI6XCJpbnB1dF9cIit0aGlzLnZhbHVlK1wiX1wiK3RoaXMuaWR9KTtcbiAgICAgICAgbGFiVmFsdWUuaW5uZXJIVE1MID0gXCJWYWx1ZSA6IFwiO1xuICAgICAgICBsZXQgaW5wdXRWYWx1ZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiAodGhpcy52YWx1ZSkgPyB0aGlzLnZhbHVlIDogJycsXG4gICAgICAgICAgICBcInBsYWNlaG9sZGVyXCI6ICdWYWx1ZScsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRfXCIrdGhpcy52YWx1ZStcIl9cIit0aGlzLmlkXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dFZhbHVlLm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMudmFsdWU9KDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgIH07IFxuXG4gICAgICAgIC8vIENSRUFURSBMQUJFTCBJTlBVVFxuICAgICAgICBsZXQgbGFiTGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XCJmb3JcIjpcImlucHV0X1wiK3RoaXMubGFiZWwrXCJfXCIrdGhpcy5pZCwgXCJzdHlsZVwiOlwibWluLXdpZHRoOiBhdXRvO1wifSk7XG4gICAgICAgIGxhYkxhYmVsLmlubmVySFRNTCA9IFwiTGFiZWwgOiBcIjtcbiAgICAgICAgbGV0IGlucHV0TGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogKHRoaXMubGFiZWwpID8gdGhpcy5sYWJlbCA6ICcnLFxuICAgICAgICAgICAgXCJwbGFjZWhvbGRlclwiOiAnTGFiZWwnLFxuICAgICAgICAgICAgXCJpZFwiOlwiaW5wdXRfXCIrdGhpcy5sYWJlbCtcIl9cIit0aGlzLmlkXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dExhYmVsLm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMubGFiZWw9KDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgIH07IFxuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChsYWJWYWx1ZSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChpbnB1dFZhbHVlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGxhYkxhYmVsKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGlucHV0TGFiZWwpO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICB0aGlzLmpzb24gPSB7XG4gICAgICAgICAgICBcImxhYmVsXCI6dGhpcy5sYWJlbCxcbiAgICAgICAgICAgIFwidmFsdWVcIjp0aGlzLnZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbjtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja1NsaWRlci50c1wiKTsiLCJpbXBvcnQge0Jsb2NrfSBmcm9tIFwiLi9ibG9ja1wiO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tTbGlkZXJ7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrOkJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICAgIGxldCBtaW4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjpcIl9sZWZ0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIG1pbi5pbm5lckhUTUwgPSAoYmxvY2subWluKSA/IGJsb2NrLm1pbiA6ICcwJztcblxuICAgICAgICBsZXQgbWF4ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6XCJfcmlnaHRcIlxuICAgICAgICB9KTs7XG4gICAgICAgIG1heC5pbm5lckhUTUwgPSAoYmxvY2subWF4KSA/IGJsb2NrLm1heCA6ICcxMDAnO1xuICAgICAgICBcbiAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IChibG9jay5hbnN3ZXIpID8gYmxvY2suYW5zd2VyIDogKChibG9jay5tYXggJiYgYmxvY2subWluKSA/IE1hdGgucm91bmQoKE51bWJlcihibG9jay5tYXgpKyBOdW1iZXIoYmxvY2subWluKSkvMikgOiA1MCk7XG4gICAgICAgIC8vIDxvdXRwdXQgZm9yPVwiZm9vXCIgb25mb3JtaW5wdXQ9XCJ2YWx1ZSA9IGZvby52YWx1ZUFzTnVtYmVyO1wiPjwvb3V0cHV0PlxuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2Jsb2NrLmFuc3dlcicpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tc2xpZGVyXCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJyYW5nZVwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICBcIm1pblwiOiAoYmxvY2subWluKSA/IGJsb2NrLm1pbiA6IDAsXG4gICAgICAgICAgICBcIm1heFwiOiAoYmxvY2subWF4KSA/IGJsb2NrLm1heCA6IDEwMCxcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dHJhbmdlX1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pO1xuICAgICAgICBpZihibG9jay5zdGVwKXtcbiAgICAgICAgICAgIGZpZWxkLnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgYmxvY2suc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgZmllbGQub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0X1wiK2Jsb2NrLmlkKS5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5wdXREaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGlucHV0RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGl4aXVtLWJsb2NrLXNsaWRlclwiKTtcbiAgICAgICAgbGV0IG91dHB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcIm91dHB1dFwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwib3V0cHV0X1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pO1xuICAgICAgICBvdXRwdXQuaW5uZXJIVE1MID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICBibG9jay5hbnN3ZXIgPSBvdXRwdXQuaW5uZXJIVE1MO1xuICAgICAgICBcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQob3V0cHV0KTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoZmllbGQpO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtaW4pO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtYXgpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGlucHV0RGl2KTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tGcmVldGV4dC50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja0ZyZWV0ZXh0e1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIFxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcblxuICAgICAgICBsZXQgZmllbGQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dGZyZWV0ZXh0X1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pOyBcbiAgICAgICAgZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIH07IFxuICAgICAgICBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja1JhZGlvLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrUmFkaW8ge1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGJsb2NrLmNob2ljZXMuZm9yRWFjaCggKGNob2ljZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGYgID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0cmFkaW9fXCIrYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibmFtZV9cIitibG9jay5pZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBsYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gY2hvaWNlLmxhYmVsO1xuXG4gICAgICAgICAgICBsZXQgX2RpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQoZik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChfZGl2KTtcblxuICAgICAgICAgICAgZi5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICAgICAgfTsgXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tDaGVja2JveC50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja0NoZWNrYm94IHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcblxuICAgICAgICBibG9jay5jaG9pY2VzLmZvckVhY2goIChjaG9pY2UpID0+IHtcblxuICAgICAgICAgICAgbGV0IGYgID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6ICBibG9jay5pZCxcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6ICBjaG9pY2UudmFsdWUrXCJcIixcbiAgICAgICAgICAgICAgICBcImlkXCI6ICBjaG9pY2UudmFsdWUrXCJcIixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL1ByZXNlbGVjdCBhbnN3ZXJzIGlmIHNldFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9jay5hbnN3ZXIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGlmKChjaG9pY2UudmFsdWUrXCJcIik9PT1ibG9jay5hbnN3ZXJbaV0pe1xuICAgICAgICAgICAgICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGVja2VkXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgIGxldCBsYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gY2hvaWNlLmxhYmVsO1xuXG4gICAgICAgICAgICBsZXQgX2RpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQoZik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChfZGl2KTtcblxuICAgICAgICAgICAgZi5vbmNsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNoZWNrZWRCb3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Y2hlY2tib3hdW25hbWU9XCInK2Jsb2NrLmlkKydcIl06Y2hlY2tlZCcpO1xuICAgICAgICAgICAgICAgIGxldCBpZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBjaGVja2VkQm94ZXMuZm9yRWFjaCggKGVsZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goKDxIVE1MSW5wdXRFbGVtZW50PmVsZW0pLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBpZHM7XG4gICAgICAgICAgICB9OyBcbiAgICAgICAgfSk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja0xvbmd0ZXh0LnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrTG9uZ3RleHR7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuICAgICAgICBsZXQgZmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJyb3dzXCI6IDUsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dGxvbmd0ZXh0X1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pOyBcbiAgICAgICAgLy8gZmllbGQuaW5uZXJIVE1MID0gYmxvY2suYW5zd2VyO1xuICAgICAgICBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxUZXh0QXJlYUVsZW1lbnQ+ZmllbGQpLnZhbHVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgfTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vQmxvY2tUYWdzLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcbmltcG9ydCB7IEJsb2NrVHlwZSB9IGZyb20gXCIuL2Jsb2NrXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1RhZ3Mge1xuICAgIC8vIDxkaXYgaWQ9XCJob2xkZXJcIj5cbiAgICAvLyAgICAgPGRpdiBpZD1cInRhZ3NcIj5cbiAgICAvLyAgICAgICAgICA8c3Bhbj5cbiAgICAvLyAgICAgICAgICAgICAgdmFsdWVcbiAgICAvLyAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCI+LTwvYnV0dG9uPlxuICAgIC8vICAgICAgICAgIDwvc3Bhbj5cbiAgICAvLyAgICAgPC9kaXY+XG4gICAgLy8gICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwiXCIgLz5cbiAgICAvLyA8L2Rpdj5cbiAgICBcbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgLy8gcGFyc2UgYmxvY2suYW5zd2VyIGZvciBhcnJheSB0byBzdHJpbmdzIFxuICAgICAgICBpZihibG9jay5hbnN3ZXIubGVuZ3RoPT0wKXtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6ZmxleFwiKTtcblxuICAgICAgICAvLyBkaXYgYW5zd2VyXG4gICAgICAgIGxldCB0YWdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGFnc1wiKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcblxuICAgICAgICBpZihibG9jay5hbnN3ZXIpe1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICB0YWcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YWctXCIrYmxvY2suaWQrXCItXCIrdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0YWcuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBUQUdcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXJcIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MucmVtb3ZlQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGJsb2NrLmFuc3dlci5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsK2RlbEJ0bi5vdXRlckhUTUwgIT0gdGFnLmlubmVySFRNTDsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZGVsQnRuKTsgXG4gICAgICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWVsZCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICdjbGFzcyc6IFwiZmZmXCJcbiAgICAgICAgfSk7XG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcblxuICAgICAgICBmaWVsZC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIEJsb2NrVGFncy5wcm9jZXNzTmV3S2V5d29yZChldmVudCwgZmllbGQsIGJsb2NrLCB0YWdzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgQmxvY2tUYWdzLnByb2Nlc3NOZXdLZXl3b3JkKGV2ZW50LCBmaWVsZCwgYmxvY2ssIHRhZ3MsIHRydWUpO1xuICAgICAgICB9OyBcblxuICAgICAgICAvLyBhZGQgb25ibHVyIHNhdmVcbiAgICAgICAgLy8gZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgYmxvY2suYW5zd2VyLnB1c2goKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZSk7XG4gICAgICAgIC8vICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIC8vIH07IFxuXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZCh0YWdzKTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgcHJvY2Vzc05ld0tleXdvcmQoZXZlbnQsIGZpZWxkLCBibG9jaywgdGFncywgZm9yY2VQcm9jZXNzOmJvb2xlYW4gPSBmYWxzZSl7XG4gICAgICAgIC8vIFwiRW50ZXJcIiBrZXkgb24gdGhlIGtleWJvYXJkXG4gICAgICAgIGlmIChmb3JjZVByb2Nlc3MgfHwgZXZlbnQua2V5ID09PSAnRW50ZXInIHx8IGV2ZW50LmtleSA9PT0gJywnIHx8IGV2ZW50LmtleUNvZGUgPT0gMTg4KSB7IC8vIHx8IGV2ZW50LmtleSA9PT0gJyAnIHx8IGV2ZW50LmNvZGUgPT09ICdTcGFjZScgfHwgZXZlbnQua2V5ID09PSAnU3BhY2ViYXInXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICBpZih2YWx1ZSAmJiB2YWx1ZS5sZW5ndGg+MCl7XG4gICAgICAgICAgICAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy9hZGQgdG8gYW5zd2VyXG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIC8vYWRkIHRvIGRpc3BsYXlcbiAgICAgICAgICAgICAgICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgdGFnLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBUQUdcbiAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG4gICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0YWdzLnJlbW92ZUNoaWxkKHRhZyk7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGJsb2NrLmFuc3dlci5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsK2RlbEJ0bi5vdXRlckhUTUwgIT0gdGFnLmlubmVySFRNTDsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGFnLmFwcGVuZENoaWxkKGRlbEJ0bik7IFxuICAgICAgICAgICAgICAgIHRhZ3MuYXBwZW5kQ2hpbGQodGFnKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==