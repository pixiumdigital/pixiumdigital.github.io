!function(e){var t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=void 0;const n=i(/*! ./section */4),l=i(/*! ./builder */1),s=i(/*! ./data.json */23);t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container"),e.data?this.json=e.data:this.json=s,e.singleSection?this.singleSection=e.singleSection:this.singleSection=!1,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,this.singleSection?null:e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}build(){if(this.clear(),this.sections.forEach(e=>{if(e.build(this.mainNode),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.mainNode.removeChild(e.node),this.sections=this.sections.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)}}),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});t.innerText="+",t.onclick=t=>{let i=t.target,s=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(s),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(e),s.build(this.mainNode);let o=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+s.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(s.node),this.sections=this.sections.filter((function(e){return e.id!=s.id}))},s.node.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(e)},this.mainNode.appendChild(t)}let e=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});e.innerText="GO TO RUN",e.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(e)}run(){this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.saveBtn=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"submit",id:"form-builder-save-final-btn"}),this.saveBtn.innerText="Save",this.saveBtn.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Please complete the form"))},this.currentNode!=this.sections.length-1||this.singleSection||(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)),this.singleSection&&this.sections[this.currentNode].node.appendChild(this.saveBtn);let e=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){e?this.currentNode>=0&&this.currentNode<this.sections.length-1?(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="inline-block",this.currentNode==this.sections.length-1?(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)):document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block"):alert("You already are on the next slide"):this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),l=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=l.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});l.Builder.addBuilderInputText(t,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-4"),this.node.appendChild(t),this.blocks.forEach(e=>{let t=l.Builder.createElement("button",{class:"form-builder-btn button-delete",type:"button",style:"display:block"});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',e.build(this.node,t),t.onclick=t=>{this.node.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))}});let i=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});i.innerHTML="+",i.onclick=e=>{let t,i=e.target,s=new n.Block(null);this.blocks.push(s),this.node.removeChild(i),this.callback&&(t=document.getElementById("btn-delete-section-"+this.id),this.node.removeChild(t)),s.build(this.node);let o=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",style:"display:block"});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.node.removeChild(s.node),this.blocks=this.blocks.filter((function(e){return e.id!=s.id}))},s.node.appendChild(o),this.node.appendChild(i),this.callback&&this.node.appendChild(t)},this.node.appendChild(i),e.appendChild(this.node)}run(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");t.innerHTML=this.title;let i=document.createElement("hr");if(this.node.appendChild(t),this.node.appendChild(i),this.blocks.forEach(e=>{e.run(this.node)}),console.log("node.singleSection"),console.log(this.callback),this.callback){let e=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-previous-section-"+this.id,type:"button"});e.innerText="Previous",e.style.display="none",e.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-next-section-"+this.id,type:"button"});t.innerText="Next",t.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Please complete the form...")},this.node.appendChild(t)}this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{console.log(t.answer),t&&0==t.answer.length&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),l=i(/*! ./choice */9),s=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),r=i(/*! ./blockRadio */15),d=i(/*! ./blockCheckbox */17),a=i(/*! ./blockLongtext */19),c=i(/*! ./BlockTags */21);var u;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER",e[e.TAGS=7]="TAGS"}(u=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==u.RADIO&&this.type!==u.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new l.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e,t=null){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let i=n.Builder.createElement("div",{class:"col-md-12 collapse"}),s=n.Builder.addBoxHeader(this.node,this.id,i,t);n.Builder.addBuilderInputText(s,this.id,this.text,"Text",e=>{this.text=e},"col-md-6"),this.node.appendChild(i);let o=Object.keys(u).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:u[e]}));n.Builder.addBuilderInputDropdown(i,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},o,"col-md-4");let r="";this.type!==u.RADIO&&this.type!==u.CHECKBOX&&(r="display:none;");let d=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"row col-md-12",style:r}),a=n.Builder.createElement("label");a.innerHTML="Choices : ",d.appendChild(a),this.choices.length>0&&this.choices.forEach(e=>{e.build(d);let t=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});t.innerText="-",t.onclick=t=>{d.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let c=n.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});c.innerText="+",c.onclick=e=>{let t=e.target,i=new l.Choice(null);this.choices.push(i),d.removeChild(t),i.build(d);let s=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});s.innerText="-",s.onclick=e=>{d.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(s),d.appendChild(t)},d.appendChild(c),i.appendChild(d);let h="";this.type!==u.SLIDER&&(h="display:none;");let p=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"row col-md-12",style:h});n.Builder.addBuilderInputText(p,this.id,this.min,"Min",e=>{this.min=e},"col-md-4"),n.Builder.addBuilderInputText(p,this.id,this.max,"Max",e=>{this.max=e},"col-md-4"),n.Builder.addBuilderInputText(p,this.id,this.step,"Step",e=>{this.step=e},"col-md-4"),i.appendChild(p),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div"),this.node.appendChild(t),this.type){case u.RADIO:r.BlockRadio.run(this.node,this);break;case u.CHECKBOX:d.BlockCheckbox.run(this.node,this);break;case u.FREETEXT:o.BlockFreetext.run(this.node,this);break;case u.LONGTEXT:a.BlockLongtext.run(this.node,this);break;case u.NOANSWER:break;case u.SLIDER:s.BlockSlider.run(this.node,this);break;case u.TAGS:c.BlockTags.run(this.node,this)}let i=n.Builder.createElement("hr",{class:"pixium-hr"});this.node.appendChild(i),e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===u.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===u.RADIO||this.type===u.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var l=t[n];i.setAttribute(n,l)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,l,s,o="col-md-12"){let r=n.createElement("div",{class:"pixium-row-block "+o}),d=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:l+"_"+t,placeholder:l});d.onblur=e=>{console.log(e.target),s(e.target.value)},r.appendChild(d),e.appendChild(r)}static addBoxHeader(e,t,i,l){let s=n.createElement("div",{class:"col-md-12 block-header block-header-"+t});l&&(l.className+=" float-right",s.appendChild(l));let o=n.createElement("i",{class:"fa fa-eye float-right","aria-hidden":"true"});s.appendChild(o);let r=n.createElement("i",{class:"fa fa-eye-slash float-right hidden","aria-hidden":"true"});return s.appendChild(r),o.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},r.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},e.appendChild(s),s}static addBuilderInputDropdown(e,t,i,l,s,o,r="col-md-12"){let d=n.createElement("div",{class:"pixium-row-block "+r}),a=n.createElement("label");a.innerHTML=l+": ";let c=n.createElement("select",{class:"pixium-dropdown",value:i,name:l+"_"+t,style:"display:block"});c.onchange=e=>{s(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,c.appendChild(t)}),d.appendChild(a),d.appendChild(c),e.appendChild(d)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value?this.value:"",placeholder:"Value",id:"input_"+this.value+"_"+this.id});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let l=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});l.innerHTML="Label : ";let s=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label?this.label:"",placeholder:"Label",id:"input_"+this.label+"_"+this.id});s.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(l),this.node.appendChild(s),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=n.Builder.createElement("input"),s=n.Builder.createElement("span",{class:"_left"});s.innerHTML=t.min?t.min:"0";let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max?t.max:"100",n.Builder.setAttributes(l,{class:"pixium-slider",type:"range",value:t.answer?t.answer:t.max?Number(t.max)/2:50,min:t.min?t.min:0,max:t.max?t.max:100,id:"inputrange_"+t.id}),t.step&&l.setAttribute("step",t.step),l.onchange=()=>{t.answer=parseFloat(l.value),console.log(t.answer),document.getElementById("output_"+t.id).innerHTML=t.answer};let r=n.Builder.createElement("div");r.setAttribute("class","pixium-block-slider");let d=n.Builder.createElement("output",{id:"output_"+t.id});d.innerHTML=t.answer?t.answer:t.max?Number(t.max)/2:50,t.answer=d.innerHTML,r.appendChild(d),r.appendChild(l),r.appendChild(s),r.appendChild(o),i.appendChild(r),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=n.Builder.createElement("input");n.Builder.setAttributes(l,{class:"pixium-textbox",type:"text",value:t.answer,id:"inputfreetext_"+t.id}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"radio",id:"inputradio_"+t.id,value:e.value+""}),s=n.Builder.createElement("label");s.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(l),o.appendChild(s),i.appendChild(o),l.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"checkbox",name:t.id,value:e.value+"",id:e.value+""});for(var s=0;s<t.answer.length;s++)e.value+""===t.answer[s]&&n.Builder.setAttributes(l,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let r=n.Builder.createElement("div");r.appendChild(l),r.appendChild(o),i.appendChild(r),l.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.id+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */20)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("textarea");n.Builder.setAttributes(l,{class:"pixium-textbox",rows:5,value:t.answer,id:"inputlongtext_"+t.id}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!****************************************!*\
  !*** ./src/block/BlockTags.ts-exposed ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./BlockTags.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/BlockTags.ts ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTags=void 0;const n=i(/*! ../builder */1);class l{static run(e,t){0==t.answer.length&&(t.answer=[]);let i=document.createElement("div");i.setAttribute("class","element-form-container"),i.setAttribute("style","display:flex");let s=document.createElement("div");i.setAttribute("class","tags"),t.answer&&t.answer.forEach(e=>{if(e&&e.length>0){let i=document.createElement("span");i.setAttribute("id","tag-"+t.id+"-"+e),i.innerHTML=e;let l=n.Builder.createElement("button",{class:"btn btn-danger",type:"button"});l.innerText="-",l.onclick=e=>{s.removeChild(i),t.answer=t.answer.filter((function(e){return e+l.outerHTML!=i.innerHTML}))},i.appendChild(l),s.appendChild(i)}});let o=n.Builder.createElement("input",{class:"fff"});o.addEventListener("keypress",(function(e){l.processNewKeyword(e,o,t,s)})),o.onblur=()=>{l.processNewKeyword(event,o,t,s,!0)},i.appendChild(s),i.appendChild(o),e.appendChild(i)}static processNewKeyword(e,t,i,l,s=!1){if(s||"Enter"===e.key||","===e.key||188==e.keyCode){e.preventDefault();let s=t.value.trim();if(console.log(s),s&&s.length>0){t.value=null,i.answer.push(s);let e=document.createElement("span");e.innerHTML=s;let o=n.Builder.createElement("button",{class:"btn",type:"button"});o.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>',o.onclick=t=>{l.removeChild(e),i.answer=i.answer.filter((function(t){return t+o.outerHTML!=e.innerHTML}))},e.appendChild(o),l.appendChild(e)}}}}t.BlockTags=l},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":7},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","label":"Delegation"}]},{"title":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL0Jsb2NrVGFncy50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9CbG9ja1RhZ3MudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJwYXJhbXMiLCJzZWN0aW9ucyIsImN1cnJlbnROb2RlIiwiZGl2IiwibWFpbk5vZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJzaW5nbGVTZWN0aW9uIiwiZm9yRWFjaCIsInNlYyIsInNlY3Rpb25Nb2RlbCIsIlNlY3Rpb24iLCJuZXh0U2xpZGUiLCJtb3ZlU2VjdGlvbiIsInB1c2giLCJhbGVydCIsImRlYnVnIiwiYnVpbGQiLCJydW4iLCJjbGVhciIsImRlbEJ0biIsIkJ1aWxkZXIiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJpbm5lckhUTUwiLCJvbmNsaWNrIiwiZXYiLCJyZW1vdmVDaGlsZCIsIm5vZGUiLCJmaWx0ZXIiLCJlbCIsImFwcGVuZENoaWxkIiwiYWRkQnV0dG9uIiwiaW5uZXJUZXh0IiwiYnRuU2VjQWRkIiwidGFyZ2V0Iiwic3dpdGNoQnV0dG9uIiwiYnRuU2VjRGVsIiwic2F2ZUJ0biIsImlzQ29tcGxldGVkIiwiY29tcGlsZUpzb24iLCJwcmV2ZW50RGVmYXVsdCIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsImFmdGVyIiwic2F2ZUJ1dHRvbiIsInNob3ciLCJhcnIiLCJmaW5hbE91dHB1dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoaWRlIiwiX3BhcmVudCIsIl9qc29uIiwiX2NhbGxiYWNrIiwicGFyZW50IiwiYmxvY2tzIiwiY2FsbGJhY2siLCJ0aXRsZSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImIiLCJibG9ja01vZGVsIiwiQmxvY2siLCJub2RlSGVhZGVyIiwiYWRkQnVpbGRlcklucHV0VGV4dCIsInZhbCIsImJsayIsImJ0bkJsa0FkZCIsImJ0bkJsa0RlbCIsIm5hbWVOb2RlIiwiaHJOYW1lIiwicHJldkJ1dHRvbiIsIm5leHRCdXR0b24iLCJhbnN3ZXIiLCJ0eXBlIiwiQmxvY2tUeXBlIiwiTk9BTlNXRVIiLCJ0ZXh0IiwibWluIiwibWF4Iiwic3RlcCIsImNob2ljZXMiLCJSQURJTyIsIkNIRUNLQk9YIiwiY2hvaWNlSnNvbiIsImNob2ljZSIsIkNob2ljZSIsIm5vZGVDb250ZW50IiwiaGVhZGVyIiwiYWRkQm94SGVhZGVyIiwiZW51bUFycmF5Iiwia2V5cyIsImEiLCJtYXRjaCIsIm1hcCIsImFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duIiwiTnVtYmVyIiwidHJpZ2dlclN1YkVsZW1lbnRCbG9jayIsImJsa0Nob2ljZXNTdHlsZSIsIm5vZGVDaG9pY2VzIiwibGFiVGl0bGUiLCJjaCIsImFkZENob2ljZUJ1dHRvbiIsImJ0bkNoQWRkIiwiYnRuQ2hEZWwiLCJibGtTbGlkZXJTdHlsZSIsIlNMSURFUiIsIm5vZGVTbGlkZXIiLCJ0aXRsZU5vZGUiLCJCbG9ja1JhZGlvIiwiQmxvY2tDaGVja2JveCIsIkZSRUVURVhUIiwiQmxvY2tGcmVldGV4dCIsIkxPTkdURVhUIiwiQmxvY2tMb25ndGV4dCIsIkJsb2NrU2xpZGVyIiwiVEFHUyIsIkJsb2NrVGFncyIsImhyIiwic2xpZGVyQmxvY2siLCJjaG9pY2VCbG9jayIsIl9wYXJhbXMiLCJlbGVtIiwibGFiZWwiLCJjbGFzc2VzIiwiaW5wdXQiLCJvbmJsdXIiLCJzdWJFbGVtZW50IiwiY2xhc3NOYW1lIiwiZXllMSIsImV5ZTIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvcHRpb25zIiwibGFiIiwib25jaGFuZ2UiLCJlbGVtZW50Iiwib3B0Iiwic2V0QXR0cmlidXRlcyIsImxhYlZhbHVlIiwiaW5wdXRWYWx1ZSIsImxhYkxhYmVsIiwiaW5wdXRMYWJlbCIsImJsb2NrIiwiaG9sZGVyIiwiZmllbGQiLCJwYXJzZUZsb2F0IiwiaW5wdXREaXYiLCJvdXRwdXQiLCJmIiwiX2RpdiIsImNoZWNrZWRCb3hlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpZHMiLCJ0YWdzIiwidGFnIiwib3V0ZXJIVE1MIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJvY2Vzc05ld0tleXdvcmQiLCJmb3JjZVByb2Nlc3MiLCJrZXlDb2RlIiwidHJpbSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIs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ImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi4vZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9idWlsZGVyLnRzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vbWFpbi50c1wiKTsiLCJcbmltcG9ydCB7U2VjdGlvbn0gZnJvbSAnLi9zZWN0aW9uJztcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSAnLi9idWlsZGVyJztcbi8vIGltcG9ydCAqIGFzIGRhdGEgZnJvbSAnLi9kYXRhLmpzb24nO1xuLy8gaW1wb3J0IENoYXJ0IGZyb20gJ2NoYXJ0anMnO1xuLy8gaW1wb3J0IGZvbnRhd2Vzb21lIGZyb20gJ0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlJztcblxuY29uc3QgZGF0YSA9IHJlcXVpcmUoJy4vZGF0YS5qc29uJyk7XG4vLyBjb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuZXhwb3J0IGNsYXNzIFBpeGl1bUZvcm0ge1xuICAgIGpzb246Rm9ybURhdGE7XG4gICAgZGl2OnN0cmluZztcbiAgICBzZWN0aW9uczpTZWN0aW9uW107XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgbWFpbk5vZGU6IEhUTUxFbGVtZW50O1xuICAgIHRpdGxlTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY3VycmVudE5vZGU6IG51bWJlcjtcbiAgICBtb2RlOnN0cmluZztcbiAgICBkZWJ1Zzpib29sZWFuO1xuICAgIHNpbmdsZVNlY3Rpb246Ym9vbGVhbjtcbiAgICBzYXZlQnRuOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKHBhcmFtczpGb3JtRGF0YSkge1xuICAgICAgICB0aGlzLnNlY3Rpb25zID0gW107XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSAwO1xuXG4gICAgICAgIGlmKCFwYXJhbXNbXCJkaXZcIl0pe1xuICAgICAgICAgICAgYWxlcnQoJ0RpdiBub3QgZm91bmQuIENhbm5vdCBkaXNwbGF5IHRoZSBmb3JtJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXYgPSBwYXJhbXNbXCJkaXZcIl07XG4gICAgICAgIHRoaXMubWFpbk5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmRpdik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICB0aGlzLm1haW5Ob2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29udGFpbmVyIGZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGlmKHBhcmFtc1tcImRhdGFcIl0pe1xuICAgICAgICAgICAgdGhpcy5qc29uID0gcGFyYW1zW1wiZGF0YVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuanNvbiA9IGRhdGE7Ly9KU09OLnBhcnNlKCBkYXRhICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIE9OTFkgQUxMT1cgT05FIFNFQ1RJT04gRk9STVxuICAgICAgICBpZihwYXJhbXNbXCJzaW5nbGVTZWN0aW9uXCJdKXtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VjdGlvbiA9IHBhcmFtc1tcInNpbmdsZVNlY3Rpb25cIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLyBCVUlMRCB0aGUgc2VjdGlvbiBzdWIgZWxlbWVudCAobm8gZ2VuZXJhdGVkIEhUTUwgYXQgdGhpcyBzdGFnZSB5ZXQpXG4gICAgICAgIGlmKHRoaXMuanNvbiAmJiB0aGlzLmpzb25bXCJzZWN0aW9uc1wiXSl7XG4gICAgICAgICAgICBsZXQgc2VjcyA9IHRoaXMuanNvbltcInNlY3Rpb25zXCJdO1xuICAgICAgICAgICAgc2Vjcy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlY3Rpb25Nb2RlbCA9IG5ldyBTZWN0aW9uKHRoaXMubWFpbk5vZGUsIHNlYywgKCghdGhpcy5zaW5nbGVTZWN0aW9uKSA/IChuZXh0U2xpZGU6Ym9vbGVhbikgPT50aGlzLm1vdmVTZWN0aW9uKG5leHRTbGlkZSkgOiBudWxsICkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWN0aW9uTW9kZWwpO1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBpbml0IHRoZSBtb2R1bGUuXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5qc29uKTtcbiAgICAgICAgfSAgICAgICAgICAgICBcblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIFNUQVJUIFRIRSBBUFBMSUNBVElPTiBJTiBkZWJ1Z1xuICAgICAgICAgaWYocGFyYW1zW1wiZGVidWdcIl0pe1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IHBhcmFtc1tcImRlYnVnXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB9ICAgICAgIFxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgU1RBUlQgVEhFIEFQUExJQ0FUSU9OIElOIGJ1aWxkIE9SIHJ1biBNT0RFXG4gICAgICAgIGlmKHBhcmFtc1tcIm1vZGVcIl0pe1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gcGFyYW1zW1wibW9kZVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdydW4nO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMubW9kZSA9PT0gJ2J1aWxkJyl7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRW50ZXIgQlVJTEQgTU9ERSBmb3IgdXNlciB0byBlZGl0IHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQoKXtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgc2VjLmJ1aWxkKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICAgICAgaWYoIXRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFNFQ1RJT04gQlROXG4gICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICAgICAgZGVsQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc2VjLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IHNlYy5pZDsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2VjLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgICAgIH0gICAgICAgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCF0aGlzLnNpbmdsZVNlY3Rpb24pe1xuICAgICAgICAgICAgLy8gQlVJTEQgQUREIFNFQ1RJT04gQlROXG4gICAgICAgICAgICBsZXQgYWRkQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgICAgICBhZGRCdXR0b24uaW5uZXJUZXh0ID0gJysnOyAgXG4gICAgICAgICAgICBhZGRCdXR0b24ub25jbGljayA9IChldikgPT4gXG4gICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgbGV0IGJ0blNlY0FkZCA9IDxIVE1MRWxlbWVudD5ldi50YXJnZXQ7XG4gICAgICAgICAgICAgICAgbGV0IHNlYyA9IG5ldyBTZWN0aW9uKHRoaXMubWFpbk5vZGUsIG51bGwsICggKG5leHRTbGlkZTpib29sZWFuKSA9PnRoaXMubW92ZVNlY3Rpb24obmV4dFNsaWRlKSApKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VjKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLnJlbW92ZUNoaWxkKGJ0blNlY0FkZCk7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VjLmJ1aWxkKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBTRUNUSU9OIEJUTlxuICAgICAgICAgICAgICAgIGxldCBidG5TZWNEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIiwgXCJpZFwiOlwiYnRuLWRlbGV0ZS1zZWN0aW9uLVwiK3NlYy5pZH0pO1xuICAgICAgICAgICAgICAgIGJ0blNlY0RlbC5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5gOyAgXG4gICAgICAgICAgICAgICAgYnRuU2VjRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLnJlbW92ZUNoaWxkKHNlYy5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBzZWMuaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNlYy5ub2RlLmFwcGVuZENoaWxkKGJ0blNlY0RlbCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGJ0blNlY0FkZCk7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCVUlMRCBUSEUgU1dJVENIIFVJIEJVVFRPTiBUTyBETyBUTyBSVU4gTU9ERSBJRiBERUJVRy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzd2l0Y2hCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXByaW1hcnkgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLmlubmVyVGV4dCA9IFwiR08gVE8gUlVOXCI7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFJ1biBmb3IgdXNlciB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uc1xuICAgICAqL1xuICAgIHJ1bigpe1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICBzZWMucnVuKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICB9KTsgXG5cbiAgICAgICAgLy9DcmVhdGUgU2F2ZSBidG5cbiAgICAgICAgdGhpcy5zYXZlQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJzdWJtaXRcIiwgXCJpZFwiOlwiZm9ybS1idWlsZGVyLXNhdmUtZmluYWwtYnRuXCJ9KTsgIFxuICAgICAgICB0aGlzLnNhdmVCdG4uaW5uZXJUZXh0ID0gXCJTYXZlXCI7ICBcbiAgICAgICAgdGhpcy5zYXZlQnRuLm9uY2xpY2sgPSAoZSkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGlmKHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaXNDb21wbGV0ZWQoKSl7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxlSnNvbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgY29tcGxldGUgdGhlIGZvcm1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYoKHRoaXMuY3VycmVudE5vZGUgPT0gdGhpcy5zZWN0aW9ucy5sZW5ndGgtMSkgJiYgIXRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvL1JlbW92ZSBOZXh0IGJ0blxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5hZnRlcih0aGlzLnNhdmVCdG4pO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvL0Rpc3BsYXkgc2F2ZUJ0blxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5ub2RlLmFwcGVuZENoaWxkKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gREVCVUcgU0FWRSBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHNhdmVCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1idG5cIn0pOyAgXG4gICAgICAgIHNhdmVCdXR0b24uaW5uZXJUZXh0ID0gXCJTQVZFXCI7ICBcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIHRoaXMuY29tcGlsZUpzb24oKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJVSUxEIFRIRSBTV0lUQ0ggVUkgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzd2l0Y2hCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXByaW1hcnkgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLmlubmVyVGV4dCA9IFwiR08gVE8gQlVJTEQgTU9ERVwiOyAgIFxuICAgICAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAgICAgdGhpcy5tYWluTm9kZS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImxpc3RcIj48IS0tIFNvcnRhYmxlIC0tPlxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj4gSXRlbSAxXG4gICAgICAgIC8vICAgICAgIDxkaXYgY2xhc3M9XCJzdWJsaXN0XCI+PCEtLSBOZXN0ZWQgU29ydGFibGU7IFdyYXBwaW5nIGNvbnRhaW5lciBuZWVkZWQgLS0+XG4gICAgICAgIC8vICAgICAgICAgPGRpdiBjbGFzcz1cInN1Yml0ZW1cIj5TdWJpdGVtIDE8L2Rpdj5cbiAgICAgICAgLy8gICAgICAgICA8ZGl2IGNsYXNzPVwic3ViaXRlbVwiPlN1Yml0ZW0gMjwvZGl2PlxuICAgICAgICAvLyAgICAgICA8L2Rpdj5cbiAgICAgICAgLy8gICAgIDwvZGl2PlxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj4gSXRlbSAyIDwvZGl2PlxuICAgICAgICAvLyAgIDwvZGl2PmA7XG5cbiAgICAgICAgLy8gbGV0IHRlbXAgPSBzb3J0YWJsZSh0aGlzLm1haW5Ob2RlLCB7XG4gICAgICAgIC8vICAgICBjb3B5OnRydWUgLy8gZGVmYXVsdCB0byBmYWxzZVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZCh0ZW1wKTtcblxuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9XG5cbiAgICByZXN1bHQoKXtcbiAgICAgICAgLy8gPGNhbnZhcyBpZD1cIm15Q2hhcnRcIiB3aWR0aD1cIjQwMFwiIGhlaWdodD1cIjQwMFwiPjwvY2FudmFcbiAgICAgICAgLy8gbGV0IGNoYXJ0SG9sZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIsIHtcbiAgICAgICAgLy8gICAgIFwiaWRcIjpcImNoYXJ0ZGl2XCIsXG4gICAgICAgIC8vICAgICBcIndpZHRoXCI6IDQwMCxcbiAgICAgICAgLy8gICAgIFwiaGVpZ2h0XCI6IDQwMFxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAvLyB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cbiAgICAgICAgLy8gO1xuXG4gICAgICAgIC8vIHZhciBteUxpbmVDaGFydCA9IG5ldyBDaGFydChjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLCB7XG4gICAgICAgIC8vICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgIC8vICAgICBkYXRhOiB7XG4gICAgICAgIC8vICAgICAgICAgZGF0YXNldHM6IFt7XG4gICAgICAgIC8vICAgICAgICAgICAgIGxhYmVsOiAnVGVzdCBEYXRhc2V0JyxcbiAgICAgICAgLy8gICAgICAgICAgICAgZGF0YTogW3tcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHg6IC0xMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgLy8gICAgICAgICAgICAgfSwge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHk6IDEwXG4gICAgICAgIC8vICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHg6IDEwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeTogNVxuICAgICAgICAvLyAgICAgICAgICAgICB9XVxuICAgICAgICAvLyAgICAgICAgIH1dXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgLy9vcHRpb25zOiBvcHRpb25zXG4gICAgICAgIC8vIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgQUxMIHRoZSBub2Rlc1xuICAgICAqL1xuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubWFpbk5vZGUpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5pbm5lckhUTUwgPSAnJzsgIC8vIGNsZWFyIGFsbCB0aGUgc3ViIG5vZGVzXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgICAgICBzZWMuY2xlYXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG5cblxuICAgIGRpc3BsYXkoKXtcbiAgICAgICAgLy8gdGhpcy5vdXRwdXQgPSBcIlwiO1xuICAgICAgICAvLyB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWN0aW9uKSA9PiB7XG4gICAgICAgIC8vICAgICB0aGlzLm91dHB1dCArPSBzZWN0aW9uLmRpc3BsYXkoKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gdGhpcy5vdXRwdXQ7XG4gICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTAgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aCl7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICBsZXQgYXJyOiBhbnlbXTtcbiAgICAgICAgYXJyID0gW107XG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYzpTZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBhcnIucHVzaChzZWMuY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQgPSBKU09OLnN0cmluZ2lmeSgge1wic2VjdGlvbnNcIjphcnJ9ICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmaW5hbE91dHB1dCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhmaW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBmaW5hbE91dHB1dDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIHNsaWRlciBvciBkaXNwbGF5IHRvIHRoZSBuZXh0IHNlY3Rpb25cbiAgICAgKi9cbiAgICBtb3ZlU2VjdGlvbihuZXh0U2xpZGU6Ym9vbGVhbil7XG4gICAgICAgIC8vIGlmIG1vdmUgZm9yd2FyZFxuICAgICAgICBpZihuZXh0U2xpZGUpe1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgSSBhbSBhbGxvd2VkIHRvIG1vdmUgdG8gdGhlIG5leHQgc2xpZGUgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPj0wICYmIHRoaXMuY3VycmVudE5vZGU8dGhpcy5zZWN0aW9ucy5sZW5ndGgtMSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSsrO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vRGlzcGxheSBQcmV2aW91cyBidG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXByZXZpb3VzLXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuYWZ0ZXIodGhpcy5zYXZlQnRuKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGFscmVhZHkgYXJlIG9uIHRoZSBuZXh0IHNsaWRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIC8vIG1ha2luZyBzdXJlIEkgYW0gYWxsb3dlZCB0byBtb3ZlIHRvIHRoZSBwcmV2aW91cyBzbGlkZSBpZiB0aGVyZSBpcyBvbmVcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTEgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZS0tO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vRGlzcGxheSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU9PTApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgUHJldmlvdXMgYnRuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcHJldmlvdXMtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGFscmVhZHkgYXJlIG9uIHRoZSBmaXJzdCBzbGlkZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9zZWN0aW9uLnRzXCIpOyIsImltcG9ydCB7QmxvY2ssIEJsb2NrVHlwZX0gZnJvbSBcIi4vYmxvY2svYmxvY2tcIjtcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4vYnVpbGRlclwiO1xuXG4vKipcbiAqIFNFQ1RJT04gY2xhc3MgY29udGFpbnMgYSBwb3RlbnRpYWwgbGlzdCBvZiBxdWVzdGlvbiB0aGF0IGlzIGRpc3BsYXllZCBvbiB0aGUgc2FtZSBwYWdlIFxuICovXG5leHBvcnQgY2xhc3MgU2VjdGlvbntcbiAgICBibG9ja3M6QmxvY2tbXTsgXG4gICAgdGl0bGU6IHN0cmluZzsgICBcbiAgICAvLyBuYW1lOiBzdHJpbmc7XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIHBhcmVudDogSFRNTEVsZW1lbnQ7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY2FsbGJhY2s6IEZ1bmN0aW9uO1xuXG4gICAgY29uc3RydWN0b3IoX3BhcmVudDpIVE1MRWxlbWVudCwgX2pzb246Rm9ybURhdGEsIF9jYWxsYmFjazpGdW5jdGlvbil7XG4gICAgICAgIHRoaXMucGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBbXTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IF9jYWxsYmFjaztcbiAgICAgICAgdGhpcy50aXRsZSA9ICcnO1xuICAgICAgICAvLyB0aGlzLm5hbWUgPSBcImRlZmF1bHRfbmFtZVwiO1xuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gICAgICAgIGlmKF9qc29uKXtcbiAgICAgICAgICAgIGlmKF9qc29uW1widGl0bGVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSBfanNvbltcInRpdGxlXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYoX2pzb25bXCJuYW1lXCJdKXtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLm5hbWUgPSBfanNvbltcIm5hbWVcIl07XG4gICAgICAgICAgICAvLyB9XG4gICAgXG4gICAgICAgICAgICBpZihfanNvbltcImJsb2Nrc1wiXSl7XG4gICAgICAgICAgICAgICAgX2pzb25bXCJibG9ja3NcIl0uZm9yRWFjaCggKGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrTW9kZWwgPSBuZXcgQmxvY2soYik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxvY2tNb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIC8vYmxvY2tNb2RlbC5ydW4odGhpcy5ub2RlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSB0aGUgZm9ybSBpbiBCVUlMREVSIE1PREUgZm9yIHRoZSB1c2VyIHRvIGVkaXQgdGhlIGZvcm0gaXRzZWxmXG4gICAgICogQHBhcmFtIG5vZGUgXG4gICAgICovXG4gICAgYnVpbGQobm9kZSl7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ib3hcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgc2VjdGlvbiBoZWFkZXIgZGl2IHdpdGggdGl0bGUgYW5kIG5hbWUgaW5wdXRcbiAgICAgICAgbGV0IG5vZGVIZWFkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1wiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJsb2NrLWJ1aWxkIHBpeGl1bS1ibG9jay1idWlsZC1oZWFkZXJcIn0pO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZUhlYWRlciwgdGhpcy5pZCwgdGhpcy50aXRsZSwgXCJUaXRsZSBTZWN0aW9uXCIsICh2YWwpID0+IHt0aGlzLnRpdGxlPXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5vZGVIZWFkZXIpO1xuXG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGs6QmxvY2spID0+IHtcbiAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImZvcm0tYnVpbGRlci1idG4gYnV0dG9uLWRlbGV0ZVwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcInN0eWxlXCI6XCJkaXNwbGF5OmJsb2NrXCJ9KTtcbiAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYmxrLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcblxuICAgICAgICAgICAgYmxrLmJ1aWxkKHRoaXMubm9kZSwgZGVsQnRuKTtcblxuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTiBBQ1RJT05cbiAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYmxrLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gdGhpcy5ibG9ja3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBibGsuaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyBCVUlMRCBBREQgQk9MQ0sgQlROXG4gICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgYWRkQnV0dG9uLmlubmVySFRNTCA9ICcrJzsgIFxuICAgICAgICBhZGRCdXR0b24ub25jbGljayA9IChldikgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGxldCBidG5CbGtBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgLy8gQUREIE5FVyBCT0xDS1xuICAgICAgICAgICAgbGV0IGJsayA9IG5ldyBCbG9jayhudWxsKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVDaGlsZChidG5CbGtBZGQpO1xuICAgICAgICAgICAgbGV0IGJ0blNlY0RlbDtcbiAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgIGJ0blNlY0RlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLWRlbGV0ZS1zZWN0aW9uLVwiK3RoaXMuaWQpO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVDaGlsZChidG5TZWNEZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxrLmJ1aWxkKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICBsZXQgYnRuQmxrRGVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwic3R5bGVcIjpcImRpc3BsYXk6YmxvY2tcIn0pO1xuICAgICAgICAgICAgYnRuQmxrRGVsLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgIGJ0bkJsa0RlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYmxrLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gdGhpcy5ibG9ja3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBibGsuaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBibGsubm9kZS5hcHBlbmRDaGlsZChidG5CbGtEZWwpO1xuXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoYnRuQmxrQWRkKTtcbiAgICAgICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChidG5TZWNEZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIHRoZSBmb3JtIGZvciB1c2VyIHRvIGFuc3dlclxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIHJ1bihub2RlKXtcblxuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYm94XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBuYW1lTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgbmFtZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50aXRsZTtcbiAgICAgICAgbGV0IGhyTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoclwiKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5hbWVOb2RlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyTmFtZSk7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGIpID0+IHtcbiAgICAgICAgICAgIGIucnVuKHRoaXMubm9kZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdub2RlLnNpbmdsZVNlY3Rpb24nKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5jYWxsYmFjayk7XG4gICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgLy8gQlVJTEQgVEhFIEJVVFRPTi4gUFJFVklPVVMgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBsZXQgcHJldkJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwiaWRcIjogXCJidG4tcHJldmlvdXMtc2VjdGlvbi1cIit0aGlzLmlkLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIHByZXZCdXR0b24uaW5uZXJUZXh0ID0gXCJQcmV2aW91c1wiO1xuICAgICAgICAgICAgcHJldkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAgXG4gICAgICAgICAgICBwcmV2QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gVFJVRSBGT1IgTkVYVCBTTElERVxuICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQocHJldkJ1dHRvbik7XG5cbiAgICAgICAgICAgIC8vIEJVSUxEIFRIRSBCVVRUT04uIE5FWFQgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBsZXQgbmV4dEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwiaWRcIjogXCJidG4tbmV4dC1zZWN0aW9uLVwiK3RoaXMuaWQsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICAgICAgbmV4dEJ1dHRvbi5pbm5lclRleHQgPSBcIk5leHRcIjsgIFxuICAgICAgICAgICAgbmV4dEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUUlVFIEZPUiBORVhUIFNMSURFXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZm9ybS4uLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobmV4dEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubm9kZSl7XG4gICAgICAgICAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsaykgPT4ge1xuICAgICAgICAgICAgYmxrLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldE5vZGUoKXtcbiAgICAgICAgYWxlcnQodGhpcy5ub2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBjdXJyZW50IHNlY3Rpb25cbiAgICAgKi9cbiAgICBzaG93KCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGN1cnJlbnQgc2VjdGlvbiBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICBoaWRlKCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgRk9STSBoYXMgYmVlbiBmdWxseSBjb21wbGV0ZWQgLSBBbGwgYmxvY2tzIGhhdmUgYSB2YWxpZCBhbnN3ZXJcbiAgICAgKi9cbiAgICBpc0NvbXBsZXRlZCgpe1xuICAgICAgICBsZXQgaXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxrLmFuc3dlcik7XG4gICAgICAgICAgICBpZihibGsgJiYgKGJsay5hbnN3ZXIubGVuZ3RoPT0wKSAmJiAoYmxrLnR5cGUgIT09IEJsb2NrVHlwZS5OT0FOU1dFUikpe1xuICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNDb21wbGV0ZWQ7XG4gICAgfVxuXG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICBsZXQgYXJyOmFueVtdO1xuICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goYmxrLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHNlYyA9IHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogdGhpcy50aXRsZSxcbiAgICAgICAgICAgIFwiYmxvY2tzXCI6YXJyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlYztcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9jay50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5pbXBvcnQge0Nob2ljZX0gZnJvbSBcIi4vY2hvaWNlXCI7XG5cbmltcG9ydCB7QmxvY2tTbGlkZXJ9IGZyb20gXCIuL2Jsb2NrU2xpZGVyXCI7XG5pbXBvcnQge0Jsb2NrRnJlZXRleHR9IGZyb20gXCIuL2Jsb2NrRnJlZXRleHRcIjtcbmltcG9ydCB7QmxvY2tSYWRpb30gZnJvbSBcIi4vYmxvY2tSYWRpb1wiO1xuaW1wb3J0IHsgQmxvY2tDaGVja2JveCB9IGZyb20gXCIuL2Jsb2NrQ2hlY2tib3hcIjtcbmltcG9ydCB7QmxvY2tMb25ndGV4dH0gZnJvbSBcIi4vYmxvY2tMb25ndGV4dFwiO1xuaW1wb3J0IHtCbG9ja1RhZ3N9IGZyb20gXCIuL0Jsb2NrVGFnc1wiO1xuLy8gaW1wb3J0IHtCbG9ja05vYW5zd2VyfSBmcm9tIFwiLi9ibG9ja05vYW5zd2VyXCI7XG5cbmV4cG9ydCBlbnVtIEJsb2NrVHlwZSB7XG4gICAgRlJFRVRFWFQgPSAxLFxuICAgIFJBRElPID0gMixcbiAgICBTTElERVIgPSAzLFxuICAgIENIRUNLQk9YID0gNCxcbiAgICBMT05HVEVYVCA9IDUsXG4gICAgTk9BTlNXRVIgPSA2LFxuICAgIFRBR1MgPSA3XG59XG5cblxuLyoqXG4gKiBBIEJsb2NrIGlzIGEgbGlzdCBcbiAqL1xuZXhwb3J0IGNsYXNzIEJsb2Nre1xuICAgIHR5cGU6bnVtYmVyO1xuICAgIHRleHQ6c3RyaW5nO1xuICAgIGFuc3dlcjphbnk7XG4gICAgbWluOnN0cmluZztcbiAgICBtYXg6c3RyaW5nO1xuICAgIHN0ZXA6c3RyaW5nO1xuICAgIGNob2ljZXM6Q2hvaWNlW107XG5cbiAgICBvdXRwdXQ6c3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBqc29uOmFueTtcblxuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuXG4gICAgLypcbiAgICBcInRpdGxlXCI6IFwiREVMRUdBVElPTjogPGJyPiA8YnI+IEhvdyBza2lsbGVkIGRvIHlvdSBmZWVsIHRvZGF5IGFib3V0IHlvdXIgYWJpbGl0eSB0byBkZWxlZ2F0ZT9cIixcbiAgICBcInR5cGVcIjogNCxcbiAgICBcImdyb3VwXCI6IDEsXG4gICAgXCJsYWJlbFwiOiBcbiAgICAqL1xuXG4gICAgY29uc3RydWN0b3IoX2pzb246Rm9ybURhdGEgPSBudWxsKXtcbiAgICAgICAgdGhpcy5qc29uID0gX2pzb247XG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMubWluID0gXCJcIjtcbiAgICAgICAgdGhpcy5tYXggPSBcIlwiO1xuICAgICAgICB0aGlzLnN0ZXAgPSBcIlwiO1xuICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2hvaWNlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJ0ZXh0XCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBfanNvbltcInRleHRcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widHlwZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gX2pzb25bXCJ0eXBlXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgICAgICBpZihfanNvbltcImFuc3dlclwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSBfanNvbltcImFuc3dlclwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJtaW5cIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubWluID0gX2pzb25bXCJtaW5cIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfanNvbltcIm1heFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSBfanNvbltcIm1heFwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF9qc29uW1wic3RlcFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gX2pzb25bXCJzdGVwXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5SQURJTyB8fCB0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCl7XG4gICAgICAgICAgICAgICAgLy8gbG9hZCBhZGRpdGlvbmFsIGRhdGFcbiAgICAgICAgICAgICAgICBpZihfanNvbltcImNob2ljZXNcIl0pe1xuICAgICAgICAgICAgICAgICAgICBfanNvbltcImNob2ljZXNcIl0uZm9yRWFjaChjaG9pY2VKc29uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaG9pY2UgPSBuZXcgQ2hvaWNlKGNob2ljZUpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzLnB1c2goY2hvaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGhpcy5jaG9pY2VzID0gX2pzb25bXCJjaG9pY2VzXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBhbmQgcmVtb3ZlIGFsbCB0aGUgSFRNTCBOb2RlXG4gICAgICovXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5ub2RlKXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gYnVpbGQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZChub2RlLCBkZWxCdG4gPSBudWxsKXtcbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIiA6IFwicm93IHBpeGl1bS1ibG9jay1idWlsZFwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGxldCBociA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImhyXCIsIHtcbiAgICAgICAgLy8gICAgIFwiY2xhc3NcIjogXCJwaXhpdW0taHIgY29sLW1kLTEyXCJcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgLy8gbGV0IGhlYWRlckJveCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIC8vICAgICBcImlkXCI6IFwiaGVhZGVyX2JveFwiK3RoaXMuaWQsXG4gICAgICAgIC8vICAgICBcImNsYXNzXCI6IFwiY29sbGFwc2VcIlxuICAgICAgICAvLyB9KTtcblxuICAgICAgICBsZXQgbm9kZUNvbnRlbnQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgJ2NsYXNzJzogJ2NvbC1tZC0xMiBjb2xsYXBzZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGhlYWRlciA9IEJ1aWxkZXIuYWRkQm94SGVhZGVyKHRoaXMubm9kZSwgdGhpcy5pZCwgbm9kZUNvbnRlbnQsIGRlbEJ0bik7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChoZWFkZXIsIHRoaXMuaWQsIHRoaXMudGV4dCwgXCJUZXh0XCIsICh2YWwpID0+IHt0aGlzLnRleHQ9dmFsO30sIFwiY29sLW1kLTZcIiApO1xuXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChub2RlQ29udGVudCk7XG5cbiAgICBcbiAgICAgICAgbGV0IGVudW1BcnJheSA9IE9iamVjdC5rZXlzKEJsb2NrVHlwZSkuZmlsdGVyKGE9PmEubWF0Y2goL15cXEQvKSkubWFwKG5hbWU9Pih7bmFtZSwgdmFsdWU6IEJsb2NrVHlwZVtuYW1lXSBhcyBudW1iZXJ9KSk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0RHJvcGRvd24obm9kZUNvbnRlbnQsIHRoaXMuaWQsIHRoaXMudHlwZSwgXCJUeXBlXCIsICh2YWwpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHlwZT1OdW1iZXIodmFsKTtcbiAgICAgICAgICAgIHRoaXMuYW5zd2VyPScnO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3ViRWxlbWVudEJsb2NrKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSwgZW51bUFycmF5LCBcImNvbC1tZC00XCIgKTtcblxuICAgICAgICAvLyAtLS0tIEZpZWxkIGZvciBDaG9pY2VzIGJsb2NrXG4gICAgICAgIGxldCBibGtDaG9pY2VzU3R5bGUgPSBcIlwiO1xuICAgICAgICBpZigodGhpcy50eXBlICE9PSBCbG9ja1R5cGUuUkFESU8pICYmICh0aGlzLnR5cGUgIT09IEJsb2NrVHlwZS5DSEVDS0JPWCkpe1xuICAgICAgICAgICAgYmxrQ2hvaWNlc1N0eWxlID0gXCJkaXNwbGF5Om5vbmU7XCJcbiAgICAgICAgfVxuICAgICAgICBsZXQgbm9kZUNob2ljZXMgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcImNob2ljZXNfYmxvY2tfXCIrdGhpcy5pZCxcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgY29sLW1kLTEyXCIsXG4gICAgICAgICAgICBcInN0eWxlXCI6IGJsa0Nob2ljZXNTdHlsZVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgbGFiVGl0bGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgbGFiVGl0bGUuaW5uZXJIVE1MID0gXCJDaG9pY2VzIDogXCI7XG4gICAgICAgIG5vZGVDaG9pY2VzLmFwcGVuZENoaWxkKGxhYlRpdGxlKTtcbiAgICAgICAgaWYodGhpcy5jaG9pY2VzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdGhpcy5jaG9pY2VzLmZvckVhY2goIChjaDpDaG9pY2UpID0+IHtcbiAgICAgICAgICAgICAgICBjaC5idWlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lclRleHQgPSAnLSc7ICBcbiAgICAgICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGNoLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNob2ljZXMgPSB0aGlzLmNob2ljZXMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBjaC5pZDsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2gubm9kZS5hcHBlbmRDaGlsZChkZWxCdG4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCVUlMRCBBREQgQk9MQ0sgQlROXG4gICAgICAgIGxldCBhZGRDaG9pY2VCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgYWRkQ2hvaWNlQnV0dG9uLmlubmVyVGV4dCA9ICcrJzsgIFxuICAgICAgICBhZGRDaG9pY2VCdXR0b24ub25jbGljayA9IChldikgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGxldCBidG5DaEFkZCA9IDxIVE1MRWxlbWVudD5ldi50YXJnZXQ7XG4gICAgICAgICAgICAvLyBBREQgTkVXIEJPTENLXG4gICAgICAgICAgICBsZXQgY2ggPSBuZXcgQ2hvaWNlKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5jaG9pY2VzLnB1c2goY2gpO1xuICAgICAgICAgICAgbm9kZUNob2ljZXMucmVtb3ZlQ2hpbGQoYnRuQ2hBZGQpO1xuICAgICAgICAgICAgY2guYnVpbGQobm9kZUNob2ljZXMpO1xuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgbGV0IGJ0bkNoRGVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgIGJ0bkNoRGVsLmlubmVyVGV4dCA9ICctJzsgIFxuICAgICAgICAgICAgYnRuQ2hEZWwub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgbm9kZUNob2ljZXMucmVtb3ZlQ2hpbGQoY2gubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzID0gdGhpcy5jaG9pY2VzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gY2guaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaC5ub2RlLmFwcGVuZENoaWxkKGJ0bkNoRGVsKTtcblxuICAgICAgICAgICAgbm9kZUNob2ljZXMuYXBwZW5kQ2hpbGQoYnRuQ2hBZGQpO1xuICAgICAgICB9OyAgXG4gICAgICAgIG5vZGVDaG9pY2VzLmFwcGVuZENoaWxkKGFkZENob2ljZUJ1dHRvbik7XG5cbiAgICAgICAgbm9kZUNvbnRlbnQuYXBwZW5kQ2hpbGQobm9kZUNob2ljZXMpO1xuICAgICAgICAvLyAtLS0tIFxuXG4gICAgICAgIC8vIC0tLS0gRmllbGQgZm9yIFNsaWRlciBibG9ja1xuICAgICAgICBsZXQgYmxrU2xpZGVyU3R5bGUgPSBcIlwiO1xuICAgICAgICBpZih0aGlzLnR5cGUgIT09IEJsb2NrVHlwZS5TTElERVIpe1xuICAgICAgICAgICAgYmxrU2xpZGVyU3R5bGUgPSBcImRpc3BsYXk6bm9uZTtcIlxuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlU2xpZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJzbGlkZXJfYmxvY2tfXCIrdGhpcy5pZCxcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgY29sLW1kLTEyXCIsXG4gICAgICAgICAgICBcInN0eWxlXCI6IGJsa1NsaWRlclN0eWxlXG4gICAgICAgIH0pO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5taW4sIFwiTWluXCIsICh2YWwpID0+IHt0aGlzLm1pbj12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLm1heCwgXCJNYXhcIiwgKHZhbCkgPT4ge3RoaXMubWF4PXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMuc3RlcCwgXCJTdGVwXCIsICh2YWwpID0+IHt0aGlzLnN0ZXA9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICBub2RlQ29udGVudC5hcHBlbmRDaGlsZChub2RlU2xpZGVyKTtcbiAgICAgICAgLy8gLS0tLVxuXG4gICAgICAgIC8vIHRoaXMubm9kZS5hcHBlbmRDaGlsZChocik7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gUnVuIHRoZSBmb3JtXG4gICAgICovXG4gICAgcnVuKG5vZGUpe1xuICAgICAgICAvLyBhbGVydChcIkNcIik7XG4gICAgICAgIGxldCB0aXRsZU5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJwXCIpOyAvL2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0aXRsZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50ZXh0O1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aXRsZU5vZGUpO1xuXG4gICAgICAgIHN3aXRjaCh0aGlzLnR5cGUpe1xuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuUkFESU86XG4gICAgICAgICAgICAgICAgQmxvY2tSYWRpby5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuQ0hFQ0tCT1g6XG4gICAgICAgICAgICAgICAgQmxvY2tDaGVja2JveC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuRlJFRVRFWFQ6XG4gICAgICAgICAgICAgICAgQmxvY2tGcmVldGV4dC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkxPTkdURVhUOlxuICAgICAgICAgICAgICAgIEJsb2NrTG9uZ3RleHQucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLk5PQU5TV0VSOlxuICAgICAgICAgICAgICAgIC8vIEJsb2NrTm9hbnN3ZXIucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLlNMSURFUjpcbiAgICAgICAgICAgICAgICBCbG9ja1NsaWRlci5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuVEFHUzpcbiAgICAgICAgICAgICAgICBCbG9ja1RhZ3MucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCBociA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImhyXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0taHJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCl7XG4gICAgfVxuXG5cblxuICAgIHRyaWdnZXJTdWJFbGVtZW50QmxvY2soKXtcbiAgICAgICAgbGV0IHNsaWRlckJsb2NrID0gbnVsbDtcbiAgICAgICAgaWYoc2xpZGVyQmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5TTElERVIpe1xuICAgICAgICAgICAgICAgIHNsaWRlckJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbGlkZXJCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIFNpbGRlciBub3QgZm91bmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2hvaWNlQmxvY2sgPSBudWxsO1xuICAgICAgICBpZihjaG9pY2VCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZigodGhpcy50eXBlID09PSBCbG9ja1R5cGUuUkFESU8pIHx8ICh0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCkpe1xuICAgICAgICAgICAgICAgIGNob2ljZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjaG9pY2VCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIENob2ljZSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6YW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCggKGNoOkNob2ljZSkgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goY2guY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmpzb24gPSB7XG4gICAgICAgICAgICBcInR5cGVcIjp0aGlzLnR5cGUsXG4gICAgICAgICAgICBcInRleHRcIjp0aGlzLnRleHQsXG4gICAgICAgICAgICBcImFuc3dlclwiOnRoaXMuYW5zd2VyLFxuICAgICAgICAgICAgXCJtaW5cIjp0aGlzLm1pbixcbiAgICAgICAgICAgIFwibWF4XCI6dGhpcy5tYXgsXG4gICAgICAgICAgICBcInN0ZXBcIjp0aGlzLnN0ZXAsXG4gICAgICAgICAgICBcImNob2ljZXNcIjogYXJyXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbjtcbiAgICB9XG59IiwiXG5leHBvcnQgY2xhc3MgQnVpbGRlcntcblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGFuZCBzZXQgYWxsIHRoZSBhdHRyaWJ1dGUgb2YgYSBIVE1MIEVsZW1lbnQgbm9kZVxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBpbnB1dCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gX3BhcmFtcyBUaGUgYXR0cmlidXRlcyBsaXN0IHRvIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVFbGVtZW50KHR5cGU6c3RyaW5nLCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZighdHlwZSl7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBidWlsZCB0aGUgZWxlbWVudFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgaWYoX3BhcmFtcyl7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3BhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9wYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB3aWxsIHNldCBhbGwgYXR0cmlidXRlIGludG8gYSBzcGVjaWZpYyBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW0gRWxlbWVudCB0byBzZXQgdGUgYXR0cmlidXRlIG9mXG4gICAgICogQHBhcmFtIF9wYXJhbXMgVGhlIGF0dHJpYnV0ZXMgbGlzdCB0byBzZXRcbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0QXR0cmlidXRlcyhlbGVtOkhUTUxFbGVtZW50LCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZihfcGFyYW1zKXtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3BhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0VGV4dChub2RlLCBpZCwgdmFsdWUsIGxhYmVsLCBjYWxsYmFjaywgY2xhc3Nlcz1cImNvbC1tZC0xMlwiKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBcIitjbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBsZXQgbGFiID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIC8vIGxhYi5pbm5lckhUTUwgPSBsYWJlbCtcIjogXCI7XG4gICAgICAgIGxldCBpbnB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogbGFiZWxcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlKTtcbiAgICAgICAgfTsgXG4gICAgICAgIC8vZGl2LmFwcGVuZENoaWxkKGxhYik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG5cblxuICAgIHN0YXRpYyBhZGRCb3hIZWFkZXIobm9kZSwgaWQsIHN1YkVsZW1lbnQsIGRlbEJ0bil7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImNvbC1tZC0xMiBibG9jay1oZWFkZXIgYmxvY2staGVhZGVyLVwiK2lkIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgdGhlIGRlbGV0ZSBidXR0b24gaW4gdGhlIGhlYWRlciBkaXJlY3RseVxuICAgICAgICBpZihkZWxCdG4pe1xuICAgICAgICAgICAgZGVsQnRuLmNsYXNzTmFtZSArPSBcIiBmbG9hdC1yaWdodFwiO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZXllMSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlcIiwge1wiY2xhc3NcIjpcImZhIGZhLWV5ZSBmbG9hdC1yaWdodFwiLCBcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCJ9KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGV5ZTEpO1xuICAgICAgICBsZXQgZXllMiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlcIiwge1wiY2xhc3NcIjpcImZhIGZhLWV5ZS1zbGFzaCBmbG9hdC1yaWdodCBoaWRkZW5cIiwgXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChleWUyKTtcblxuICAgICAgICBcbiAgICAgICAgXG5cblxuICAgICAgICBleWUxLm9uY2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIHN1YkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcImNvbGxhcHNlXCIpO1xuICAgICAgICAgICAgZXllMS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgZXllMi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgICAgICB9O1xuICAgICAgICBleWUyLm9uY2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIHN1YkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcImNvbGxhcHNlXCIpO1xuICAgICAgICAgICAgZXllMS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgZXllMi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIFxuXG4gICAgICAgIC8vIGxldCBsYWIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgLy8gbGFiLmlubmVySFRNTCA9IGxhYmVsO1xuICAgICAgICAvLyBkaXYuYXBwZW5kQ2hpbGQobGFiKTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cblxuICAgIC8qXG48c2VsZWN0IG5hbWU9XCJjYXJzXCIgaWQ9XCJjYXJzXCI+XG4gIDxvcHRpb24gdmFsdWU9XCJ2b2x2b1wiPlZvbHZvPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJzYWFiXCI+U2FhYjwvb3B0aW9uPlxuICA8b3B0aW9uIHZhbHVlPVwibWVyY2VkZXNcIj5NZXJjZWRlczwvb3B0aW9uPlxuICA8b3B0aW9uIHZhbHVlPVwiYXVkaVwiPkF1ZGk8L29wdGlvbj5cbjwvc2VsZWN0PlxuICAgICovXG4gICAgc3RhdGljIGFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duKG5vZGUsIGlkLCB2YWx1ZSwgbGFiZWwsIGNhbGxiYWNrLCBvcHRpb25zLCBjbGFzc2VzPVwiY29sLW1kLTEyXCIpe1xuICAgICAgICBsZXQgZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tcm93LWJsb2NrIFwiK2NsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYWIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgbGFiLmlubmVySFRNTCA9IGxhYmVsK1wiOiBcIjtcbiAgICAgICAgbGV0IGlucHV0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tZHJvcGRvd25cIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogdmFsdWUsXG4gICAgICAgICAgICBcIm5hbWVcIjogbGFiZWwrXCJfXCIraWQsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiZGlzcGxheTpibG9ja1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IChldikgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWUpO1xuICAgICAgICB9OyBcblxuICAgICAgICBvcHRpb25zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICBsZXQgb3B0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGVsZW1lbnQudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmKHZhbHVlPT09ZWxlbWVudC52YWx1ZSl7XG4gICAgICAgICAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKG9wdCwge1xuICAgICAgICAgICAgICAgICAgICBcInNlbGVjdGVkXCI6XCJzZWxlY3RlZFwiXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdC5pbm5lckhUTUwgPSBlbGVtZW50Lm5hbWU7XG4gICAgICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChvcHQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobGFiKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChkaXYpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Nob2ljZS50c1wiKTsiLCJcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIENob2ljZXtcbiAgICBsYWJlbDpzdHJpbmc7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAganNvbjphbnk7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihfanNvbil7XG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJsYWJlbFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbCA9IF9qc29uW1wibGFiZWxcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widmFsdWVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBfanNvbltcInZhbHVlXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBidWlsZCB0aGUgZm9ybVxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgYmxvY2stY2hvaWNlcyBjb2wtbWQtMTJcIixcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENSRUFURSBWQUxVRSBJTlBVVFxuICAgICAgICBsZXQgbGFiVmFsdWUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XCJmb3JcIjpcImlucHV0X1wiK3RoaXMudmFsdWUrXCJfXCIrdGhpcy5pZH0pO1xuICAgICAgICBsYWJWYWx1ZS5pbm5lckhUTUwgPSBcIlZhbHVlIDogXCI7XG4gICAgICAgIGxldCBpbnB1dFZhbHVlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6ICh0aGlzLnZhbHVlKSA/IHRoaXMudmFsdWUgOiAnJyxcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogJ1ZhbHVlJyxcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dF9cIit0aGlzLnZhbHVlK1wiX1wiK3RoaXMuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0VmFsdWUub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZT0oPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgLy8gQ1JFQVRFIExBQkVMIElOUFVUXG4gICAgICAgIGxldCBsYWJMYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcImZvclwiOlwiaW5wdXRfXCIrdGhpcy5sYWJlbCtcIl9cIit0aGlzLmlkLCBcInN0eWxlXCI6XCJtaW4td2lkdGg6IGF1dG87XCJ9KTtcbiAgICAgICAgbGFiTGFiZWwuaW5uZXJIVE1MID0gXCJMYWJlbCA6IFwiO1xuICAgICAgICBsZXQgaW5wdXRMYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiAodGhpcy5sYWJlbCkgPyB0aGlzLmxhYmVsIDogJycsXG4gICAgICAgICAgICBcInBsYWNlaG9sZGVyXCI6ICdMYWJlbCcsXG4gICAgICAgICAgICBcImlkXCI6XCJpbnB1dF9cIit0aGlzLmxhYmVsK1wiX1wiK3RoaXMuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0TGFiZWwub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy5sYWJlbD0oPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGxhYlZhbHVlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGlucHV0VmFsdWUpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobGFiTGFiZWwpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbCk7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIHRoaXMuanNvbiA9IHtcbiAgICAgICAgICAgIFwibGFiZWxcIjp0aGlzLmxhYmVsLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOnRoaXMudmFsdWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5qc29uO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrU2xpZGVyLnRzXCIpOyIsImltcG9ydCB7QmxvY2t9IGZyb20gXCIuL2Jsb2NrXCI7XG5pbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1NsaWRlcntcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2s6QmxvY2spe1xuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAgICAgbGV0IGZpZWxkID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cbiAgICAgICAgbGV0IG1pbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOlwiX2xlZnRcIlxuICAgICAgICB9KTtcbiAgICAgICAgbWluLmlubmVySFRNTCA9IChibG9jay5taW4pID8gYmxvY2subWluIDogJzAnO1xuICAgICAgICBsZXQgbWF4ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6XCJfcmlnaHRcIlxuICAgICAgICB9KTs7XG4gICAgICAgIG1heC5pbm5lckhUTUwgPSAoYmxvY2subWF4KSA/IGJsb2NrLm1heCA6ICcxMDAnO1xuXG4gICAgICAgIC8vIDxvdXRwdXQgZm9yPVwiZm9vXCIgb25mb3JtaW5wdXQ9XCJ2YWx1ZSA9IGZvby52YWx1ZUFzTnVtYmVyO1wiPjwvb3V0cHV0PlxuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2Jsb2NrLmFuc3dlcicpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tc2xpZGVyXCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJyYW5nZVwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiAoYmxvY2suYW5zd2VyKSA/IGJsb2NrLmFuc3dlciA6ICgoYmxvY2subWF4KSA/IChOdW1iZXIoYmxvY2subWF4KS8yKSA6IDUwKSxcbiAgICAgICAgICAgIFwibWluXCI6IChibG9jay5taW4pID8gYmxvY2subWluIDogMCxcbiAgICAgICAgICAgIFwibWF4XCI6IChibG9jay5tYXgpID8gYmxvY2subWF4IDogMTAwLFxuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0cmFuZ2VfXCIrYmxvY2suaWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGJsb2NrLnN0ZXApe1xuICAgICAgICAgICAgZmllbGQuc2V0QXR0cmlidXRlKFwic3RlcFwiLCBibG9jay5zdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBmaWVsZC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdXRwdXRfXCIrYmxvY2suaWQpLmlubmVySFRNTCA9IGJsb2NrLmFuc3dlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbnB1dERpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaW5wdXREaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwaXhpdW0tYmxvY2stc2xpZGVyXCIpO1xuICAgICAgICBsZXQgb3V0cHV0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwib3V0cHV0XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJvdXRwdXRfXCIrYmxvY2suaWRcbiAgICAgICAgfSk7XG4gICAgICAgIG91dHB1dC5pbm5lckhUTUwgPSAoYmxvY2suYW5zd2VyKSA/IGJsb2NrLmFuc3dlciA6ICgoYmxvY2subWF4KSA/IChOdW1iZXIoYmxvY2subWF4KS8yKSA6IDUwKTtcbiAgICAgICAgYmxvY2suYW5zd2VyID0gb3V0cHV0LmlubmVySFRNTDtcbiAgICAgICAgXG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKG91dHB1dCk7XG4gICAgICAgIGlucHV0RGl2LmFwcGVuZENoaWxkKGZpZWxkKTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQobWluKTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQobWF4KTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChpbnB1dERpdik7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrRnJlZXRleHQudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tGcmVldGV4dHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgbGV0IGZpZWxkID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMoZmllbGQsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBibG9jay5hbnN3ZXIsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRmcmVldGV4dF9cIitibG9jay5pZFxuICAgICAgICB9KTsgXG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICB9OyBcbiAgICAgICAgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tSYWRpby50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1JhZGlvIHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcblxuICAgICAgICBibG9jay5jaG9pY2VzLmZvckVhY2goIChjaG9pY2UpID0+IHtcbiAgICAgICAgICAgIGxldCBmICA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJyYWRpb1wiLFxuICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dHJhZGlvX1wiK2Jsb2NrLmlkLFxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogIGNob2ljZS52YWx1ZStcIlwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGxhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBjaG9pY2UubGFiZWw7XG5cbiAgICAgICAgICAgIGxldCBfZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChmKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKF9kaXYpO1xuXG4gICAgICAgICAgICBmLm9uY2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgICAgICB9OyBcbiAgICAgICAgfSk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja0NoZWNrYm94LnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrQ2hlY2tib3gge1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGJsb2NrLmNob2ljZXMuZm9yRWFjaCggKGNob2ljZSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgZiAgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiY2hlY2tib3hcIixcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogIGJsb2NrLmlkLFxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogIGNob2ljZS52YWx1ZStcIlwiLFxuICAgICAgICAgICAgICAgIFwiaWRcIjogIGNob2ljZS52YWx1ZStcIlwiLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vUHJlc2VsZWN0IGFuc3dlcnMgaWYgc2V0XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJsb2NrLmFuc3dlci5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoKGNob2ljZS52YWx1ZStcIlwiKT09PWJsb2NrLmFuc3dlcltpXSl7XG4gICAgICAgICAgICAgICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImNoZWNrZWRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgbGV0IGxhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSBjaG9pY2UubGFiZWw7XG5cbiAgICAgICAgICAgIGxldCBfZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChmKTtcbiAgICAgICAgICAgIF9kaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKF9kaXYpO1xuXG4gICAgICAgICAgICBmLm9uY2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY2hlY2tlZEJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1jaGVja2JveF1bbmFtZT1cIicrYmxvY2suaWQrJ1wiXTpjaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgbGV0IGlkcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNoZWNrZWRCb3hlcy5mb3JFYWNoKCAoZWxlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZHMucHVzaCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZWxlbSkudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9IGlkcztcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrTG9uZ3RleHQudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tMb25ndGV4dHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInJvd3NcIjogNSxcbiAgICAgICAgICAgIFwidmFsdWVcIjogYmxvY2suYW5zd2VyLFxuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0bG9uZ3RleHRfXCIrYmxvY2suaWRcbiAgICAgICAgfSk7IFxuICAgICAgICAvLyBmaWVsZC5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlciA9ICg8SFRNTFRleHRBcmVhRWxlbWVudD5maWVsZCkudmFsdWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICB9OyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9CbG9ja1RhZ3MudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuaW1wb3J0IHsgQmxvY2tUeXBlIH0gZnJvbSBcIi4vYmxvY2tcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrVGFncyB7XG4gICAgLy8gPGRpdiBpZD1cImhvbGRlclwiPlxuICAgIC8vICAgICA8ZGl2IGlkPVwidGFnc1wiPlxuICAgIC8vICAgICAgICAgIDxzcGFuPlxuICAgIC8vICAgICAgICAgICAgICB2YWx1ZVxuICAgIC8vICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLWRhbmdlclxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIj4tPC9idXR0b24+XG4gICAgLy8gICAgICAgICAgPC9zcGFuPlxuICAgIC8vICAgICA8L2Rpdj5cbiAgICAvLyAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJcIiAvPlxuICAgIC8vIDwvZGl2PlxuICAgIFxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICAvLyBwYXJzZSBibG9jay5hbnN3ZXIgZm9yIGFycmF5IHRvIHN0cmluZ3MgXG4gICAgICAgIGlmKGJsb2NrLmFuc3dlci5sZW5ndGg9PTApe1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTpmbGV4XCIpO1xuXG4gICAgICAgIC8vIGRpdiBhbnN3ZXJcbiAgICAgICAgbGV0IHRhZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0YWdzXCIpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuXG4gICAgICAgIGlmKGJsb2NrLmFuc3dlcil7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYodmFsdWUgJiYgdmFsdWUubGVuZ3RoPjApe1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInRhZy1cIitibG9jay5pZCtcIi1cIit2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFRBR1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlclwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lclRleHQgPSAnLSc7ICBcbiAgICAgICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5yZW1vdmVDaGlsZCh0YWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gYmxvY2suYW5zd2VyLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwrZGVsQnRuLm91dGVySFRNTCAhPSB0YWcuaW5uZXJIVE1MOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZy5hcHBlbmRDaGlsZChkZWxCdG4pOyBcbiAgICAgICAgICAgICAgICAgICAgdGFncy5hcHBlbmRDaGlsZCh0YWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZpZWxkID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgJ2NsYXNzJzogXCJmZmZcIlxuICAgICAgICB9KTtcbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuXG4gICAgICAgIGZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgQmxvY2tUYWdzLnByb2Nlc3NOZXdLZXl3b3JkKGV2ZW50LCBmaWVsZCwgYmxvY2ssIHRhZ3MpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBCbG9ja1RhZ3MucHJvY2Vzc05ld0tleXdvcmQoZXZlbnQsIGZpZWxkLCBibG9jaywgdGFncywgdHJ1ZSk7XG4gICAgICAgIH07IFxuXG4gICAgICAgIC8vIGFkZCBvbmJsdXIgc2F2ZVxuICAgICAgICAvLyBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgIC8vICAgICBibG9jay5hbnN3ZXIucHVzaCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlKTtcbiAgICAgICAgLy8gICAgICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUgPSBudWxsO1xuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgLy8gfTsgXG5cbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKHRhZ3MpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG5cblxuICAgIHN0YXRpYyBwcm9jZXNzTmV3S2V5d29yZChldmVudCwgZmllbGQsIGJsb2NrLCB0YWdzLCBmb3JjZVByb2Nlc3M6Ym9vbGVhbiA9IGZhbHNlKXtcbiAgICAgICAgLy8gXCJFbnRlclwiIGtleSBvbiB0aGUga2V5Ym9hcmRcbiAgICAgICAgaWYgKGZvcmNlUHJvY2VzcyB8fCBldmVudC5rZXkgPT09ICdFbnRlcicgfHwgZXZlbnQua2V5ID09PSAnLCcgfHwgZXZlbnQua2V5Q29kZSA9PSAxODgpIHsgLy8gfHwgZXZlbnQua2V5ID09PSAnICcgfHwgZXZlbnQuY29kZSA9PT0gJ1NwYWNlJyB8fCBldmVudC5rZXkgPT09ICdTcGFjZWJhcidcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgIGlmKHZhbHVlICYmIHZhbHVlLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAvL2FkZCB0byBhbnN3ZXJcbiAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgLy9hZGQgdG8gZGlzcGxheVxuICAgICAgICAgICAgICAgIGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICB0YWcuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFRBR1xuICAgICAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICAgICAgZGVsQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ3MucmVtb3ZlQ2hpbGQodGFnKTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gYmxvY2suYW5zd2VyLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwrZGVsQnRuLm91dGVySFRNTCAhPSB0YWcuaW5uZXJIVE1MOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZGVsQnRuKTsgXG4gICAgICAgICAgICAgICAgdGFncy5hcHBlbmRDaGlsZCh0YWcpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9