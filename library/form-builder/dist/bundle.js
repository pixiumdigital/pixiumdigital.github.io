!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=void 0;const n=i(/*! ./section */4),s=i(/*! ./builder */1),l=i(/*! ./data.json */20);t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container"),e.data?this.json=e.data:this.json=l,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}build(){this.clear(),this.sections.forEach(e=>{e.build(this.mainNode);let t=s.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.mainNode.removeChild(e.node),this.sections=this.sections.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let e=s.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button"});e.innerText="+",e.onclick=e=>{let i=e.target,l=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(l),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(t),l.build(this.mainNode);let o=s.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button",id:"btn-delete-section-"+l.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(l.node),this.sections=this.sections.filter((function(e){return e.id!=l.id}))},l.node.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(t)},this.mainNode.appendChild(e);let t=s.Builder.createElement("button",{class:"btn btn-primary pixium-btn",type:"button"});t.innerText="GO TO RUN",t.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(t)}run(){this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.saveBtn=s.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"submit",id:"form-builder-save-final-btn"}),this.saveBtn.innerText="SAVE",this.saveBtn.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Form has not been fully completed yet. Please proceed"))},this.currentNode==this.sections.length-1&&(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn));let e=s.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=s.Builder.createElement("button",{class:"btn btn-primary pixium-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){e?this.currentNode>=0&&this.currentNode<this.sections.length-1?(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="block",this.currentNode==this.sections.length-1?(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)):document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="block"):alert("You already are on the next slide"):this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),s=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="Default Title",this.name="default_name",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.name&&(this.name=t.name),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e){this.node=s.Builder.createElement("div",{class:"row pixium-box"});let t=s.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});s.Builder.addBuilderInputText(t,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-4"),s.Builder.addBuilderInputText(t,this.id,this.name,"Name Section",e=>{this.name=e},"col-md-4"),this.node.appendChild(t),this.blocks.forEach(e=>{e.build(this.node);let t=s.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',t.onclick=t=>{this.node.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let i=s.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button"});i.innerHTML="+",i.onclick=e=>{let t=e.target,i=new n.Block(null);this.blocks.push(i),this.node.removeChild(t);let l=document.getElementById("btn-delete-section-"+this.id);this.node.removeChild(l),i.build(this.node);let o=s.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.node.removeChild(i.node),this.blocks=this.blocks.filter((function(e){return e.id!=i.id}))},i.node.appendChild(o),this.node.appendChild(t),this.node.appendChild(l)},this.node.appendChild(i),e.appendChild(this.node)}run(e){this.node=s.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");t.innerHTML=this.title;let i=document.createElement("hr");this.node.appendChild(t),this.node.appendChild(i),this.blocks.forEach(e=>{e.run(this.node)});let n=s.Builder.createElement("button",{class:"btn btn-info pixium-btn",id:"btn-previous-section-"+this.id,type:"button"});n.innerText="Previous",n.style.display="none",n.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(n);let l=s.Builder.createElement("button",{class:"btn btn-info pixium-btn",id:"btn-next-section-"+this.id,type:"button"});l.innerText="Next",l.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Form has not been fully completed yet. Please proceed")},this.node.appendChild(l),this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{t&&!t.answer&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,name:this.name,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),s=i(/*! ./choice */9),l=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),d=i(/*! ./blockRadio */15),r=i(/*! ./blockCheckbox */17),a=i(/*! ./blockLongtext */21);var c;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER"}(c=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.name="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.name&&(this.name=e.name),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==c.RADIO&&this.type!==c.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new s.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let t=n.Builder.createElement("hr",{class:"pixium-hr col-md-12"});n.Builder.addBuilderInputText(this.node,this.id,this.text,"Text",e=>{this.text=e},"col-md-4"),n.Builder.addBuilderInputText(this.node,this.id,this.name,"Name",e=>{this.name=e},"col-md-4");let i=Object.keys(c).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:c[e]}));n.Builder.addBuilderInputDropdown(this.node,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},i,"col-md-4");let l="";this.type!==c.RADIO&&this.type!==c.CHECKBOX&&(l="display:none;");let o=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"row col-md-12",style:l}),d=n.Builder.createElement("label");d.innerHTML="Choices : ",o.appendChild(d),this.choices.length>0&&this.choices.forEach(e=>{e.build(o);let t=n.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});t.innerText="-",t.onclick=t=>{o.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let r=n.Builder.createElement("button",{class:"btn btn-success pixium-btn",type:"button"});r.innerText="+",r.onclick=e=>{let t=e.target,i=new s.Choice(null);this.choices.push(i),o.removeChild(t),i.build(o);let l=n.Builder.createElement("button",{class:"btn btn-danger pixium-btn",type:"button"});l.innerText="-",l.onclick=e=>{o.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(l),o.appendChild(t)},o.appendChild(r),this.node.appendChild(o);let a="";this.type!==c.SLIDER&&(a="display:none;");let u=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"row col-md-12",style:a});n.Builder.addBuilderInputText(u,this.id,this.min,"Min",e=>{this.min=e},"col-md-4"),n.Builder.addBuilderInputText(u,this.id,this.max,"Max",e=>{this.max=e},"col-md-4"),n.Builder.addBuilderInputText(u,this.id,this.step,"Step",e=>{this.step=e},"col-md-4"),this.node.appendChild(u),this.node.appendChild(t),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div"),this.node.appendChild(t),this.type){case c.RADIO:d.BlockRadio.run(this.node,this);break;case c.CHECKBOX:r.BlockCheckbox.run(this.node,this);break;case c.FREETEXT:o.BlockFreetext.run(this.node,this);break;case c.LONGTEXT:a.BlockLongtext.run(this.node,this);break;case c.NOANSWER:break;case c.SLIDER:l.BlockSlider.run(this.node,this)}let i=n.Builder.createElement("hr",{class:"pixium-hr"});this.node.appendChild(i),e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===c.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===c.RADIO||this.type===c.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,name:this.name,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var s=t[n];i.setAttribute(n,s)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,s,l,o="col-md-12"){let d=n.createElement("div",{class:"pixium-row-block "+o}),r=n.createElement("label");r.innerHTML=s+": ";let a=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:s+"_"+t,style:"color:Red",placeholder:s});a.onblur=e=>{console.log(e.target),l(e.target.value)},d.appendChild(r),d.appendChild(a),e.appendChild(d)}static addBuilderInputDropdown(e,t,i,s,l,o,d="col-md-12"){let r=n.createElement("div",{class:"pixium-row-block "+d}),a=n.createElement("label");a.innerHTML=s+": ";let c=n.createElement("select",{class:"pixium-dropdown",value:i,name:s+"_"+t,style:"display:block"});c.onchange=e=>{l(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,c.appendChild(t)}),r.appendChild(a),r.appendChild(c),e.appendChild(r)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value,id:"input_"+this.value+"_"+this.id,style:"color:Red;"});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let s=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});s.innerHTML="Label : ";let l=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label,id:"input_"+this.label+"_"+this.id,style:"color:Red;"});l.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(s),this.node.appendChild(l),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let s=document.createElement("input"),l=n.Builder.createElement("span",{class:"_left"});l.innerHTML=t.min;let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max,n.Builder.setAttributes(s,{class:"pixium-slider",type:"range",value:t.answer,min:t.min,max:t.max,name:t.name,id:"inputrange_"+t.name}),t.step&&s.setAttribute("step",t.step),s.onchange=()=>{t.answer=parseFloat(s.value),console.log(s);document.getElementById("output_"+t.name).innerHTML=t.answer};let d=n.Builder.createElement("div");d.setAttribute("class","pixium-block-slider");let r=n.Builder.createElement("output",{id:"output_"+t.name});r.innerHTML=t.answer,d.appendChild(r),d.appendChild(s),d.appendChild(l),d.appendChild(o),i.appendChild(d),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let s=document.createElement("input");n.Builder.setAttributes(s,{class:"pixium-textbox",type:"text",value:t.answer,name:this.name,style:"color:Red"}),s.onblur=()=>{t.answer=s.value,console.log(t.answer)},i.appendChild(s),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let s=n.Builder.createElement("input",{type:"radio",name:t.name,value:e.value+""}),l=n.Builder.createElement("label");l.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(s),o.appendChild(l),i.appendChild(o),s.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let s=n.Builder.createElement("input",{type:"checkbox",name:t.name,value:e.value+"",id:e.value+""});for(var l=0;l<t.answer.length;l++)e.value+""===t.answer[l]&&n.Builder.setAttributes(s,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let d=n.Builder.createElement("div");d.appendChild(s),d.appendChild(o),i.appendChild(d),s.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.name+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */,function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","name":"S1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":3,"min":"1","max":"100","step":"1","answer":"1","label":"Delegation"},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","answer":"1","label":"Delegation"}]},{"name":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let s=document.createElement("textarea");n.Builder.setAttributes(s,{class:"pixium-textbox",rows:5,value:t.answer,name:this.name,style:"color:Red"}),s.onblur=()=>{t.answer=s.value,console.log(t.answer)},i.appendChild(s),e.appendChild(i)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJwYXJhbXMiLCJzZWN0aW9ucyIsImN1cnJlbnROb2RlIiwiZGl2IiwibWFpbk5vZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJmb3JFYWNoIiwic2VjIiwic2VjdGlvbk1vZGVsIiwiU2VjdGlvbiIsIm5leHRTbGlkZSIsIm1vdmVTZWN0aW9uIiwicHVzaCIsImFsZXJ0IiwiZGVidWciLCJidWlsZCIsInJ1biIsImNsZWFyIiwiZGVsQnRuIiwiQnVpbGRlciIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImlubmVySFRNTCIsIm9uY2xpY2siLCJldiIsInJlbW92ZUNoaWxkIiwibm9kZSIsImZpbHRlciIsImVsIiwiYXBwZW5kQ2hpbGQiLCJhZGRCdXR0b24iLCJpbm5lclRleHQiLCJidG5TZWNBZGQiLCJ0YXJnZXQiLCJzd2l0Y2hCdXR0b24iLCJidG5TZWNEZWwiLCJzYXZlQnRuIiwiaXNDb21wbGV0ZWQiLCJjb21waWxlSnNvbiIsInByZXZlbnREZWZhdWx0IiwibGVuZ3RoIiwic3R5bGUiLCJkaXNwbGF5IiwiYWZ0ZXIiLCJzYXZlQnV0dG9uIiwic2hvdyIsImFyciIsImZpbmFsT3V0cHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsImhpZGUiLCJfcGFyZW50IiwiX2pzb24iLCJfY2FsbGJhY2siLCJwYXJlbnQiLCJibG9ja3MiLCJjYWxsYmFjayIsInRpdGxlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiYiIsImJsb2NrTW9kZWwiLCJCbG9jayIsIm5vZGVIZWFkZXIiLCJhZGRCdWlsZGVySW5wdXRUZXh0IiwidmFsIiwiYmxrIiwiYnRuQmxrQWRkIiwiYnRuQmxrRGVsIiwibmFtZU5vZGUiLCJock5hbWUiLCJwcmV2QnV0dG9uIiwibmV4dEJ1dHRvbiIsImFuc3dlciIsInR5cGUiLCJCbG9ja1R5cGUiLCJOT0FOU1dFUiIsInRleHQiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY2hvaWNlcyIsIlJBRElPIiwiQ0hFQ0tCT1giLCJjaG9pY2VKc29uIiwiY2hvaWNlIiwiQ2hvaWNlIiwiaHIiLCJlbnVtQXJyYXkiLCJrZXlzIiwiYSIsIm1hdGNoIiwibWFwIiwiYWRkQnVpbGRlcklucHV0RHJvcGRvd24iLCJOdW1iZXIiLCJ0cmlnZ2VyU3ViRWxlbWVudEJsb2NrIiwiYmxrQ2hvaWNlc1N0eWxlIiwibm9kZUNob2ljZXMiLCJsYWJUaXRsZSIsImNoIiwiYWRkQ2hvaWNlQnV0dG9uIiwiYnRuQ2hBZGQiLCJidG5DaERlbCIsImJsa1NsaWRlclN0eWxlIiwiU0xJREVSIiwibm9kZVNsaWRlciIsInRpdGxlTm9kZSIsIkJsb2NrUmFkaW8iLCJCbG9ja0NoZWNrYm94IiwiRlJFRVRFWFQiLCJCbG9ja0ZyZWV0ZXh0IiwiTE9OR1RFWFQiLCJCbG9ja0xvbmd0ZXh0IiwiQmxvY2tTbGlkZXIiLCJzbGlkZXJCbG9jayIsImNob2ljZUJsb2NrIiwiX3BhcmFtcyIsImVsZW0iLCJsYWJlbCIsImNsYXNzZXMiLCJsYWIiLCJpbnB1dCIsIm9uYmx1ciIsIm9wdGlvbnMiLCJvbmNoYW5nZSIsImVsZW1lbnQiLCJvcHQiLCJzZXRBdHRyaWJ1dGVzIiwibGFiVmFsdWUiLCJpbnB1dFZhbHVlIiwibGFiTGFiZWwiLCJpbnB1dExhYmVsIiwiYmxvY2siLCJob2xkZXIiLCJmaWVsZCIsInBhcnNlRmxvYXQiLCJpbnB1dERpdiIsIm91dHB1dCIsImYiLCJfZGl2IiwiY2hlY2tlZEJveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImlkcyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVB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QyxJQUFJbUksRUFBTTNELFNBRXRCNEQsRUFBTzFHLFlBQVkyRyxHQUNuQjlHLEVBQUtHLFlBQVkwRyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi4vZGlzdC9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYnVpbGRlci50c1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnRzXCIpOyIsIlxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuL3NlY3Rpb24nO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tICcuL2J1aWxkZXInO1xuLy8gaW1wb3J0ICogYXMgZGF0YSBmcm9tICcuL2RhdGEuanNvbic7XG5cbi8vIGltcG9ydCBDaGFydCBmcm9tICdjaGFydGpzJztcblxuaW1wb3J0IHtzb3J0YWJsZX0gZnJvbSAnaHRtbDVzb3J0YWJsZSc7XG4vLyBpbXBvcnQgZm9udGF3ZXNvbWUgZnJvbSAnQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWUnO1xuXG5jb25zdCBkYXRhID0gcmVxdWlyZSgnLi9kYXRhLmpzb24nKTtcbi8vIGNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5leHBvcnQgY2xhc3MgUGl4aXVtRm9ybSB7XG4gICAganNvbjpGb3JtRGF0YTtcbiAgICBkaXY6c3RyaW5nO1xuICAgIHNlY3Rpb25zOlNlY3Rpb25bXTtcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgICBtYWluTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgdGl0bGVOb2RlOiBIVE1MRWxlbWVudDtcbiAgICBjdXJyZW50Tm9kZTogbnVtYmVyO1xuICAgIG1vZGU6c3RyaW5nO1xuICAgIGRlYnVnOmJvb2xlYW47XG4gICAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJhbXM6Rm9ybURhdGEpIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLmN1cnJlbnROb2RlID0gMDtcblxuICAgICAgICBpZighcGFyYW1zW1wiZGl2XCJdKXtcbiAgICAgICAgICAgIGFsZXJ0KCdEaXYgbm90IGZvdW5kLiBDYW5ub3QgZGlzcGxheSB0aGUgZm9ybScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGl2ID0gcGFyYW1zW1wiZGl2XCJdO1xuICAgICAgICB0aGlzLm1haW5Ob2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXYpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm1haW5Ob2RlKTtcbiAgICAgICAgdGhpcy5tYWluTm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbnRhaW5lciBmb3JtLWNvbnRhaW5lclwiKTtcblxuICAgICAgICBpZihwYXJhbXNbXCJkYXRhXCJdKXtcbiAgICAgICAgICAgIHRoaXMuanNvbiA9IHBhcmFtc1tcImRhdGFcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmpzb24gPSBkYXRhOy8vSlNPTi5wYXJzZSggZGF0YSApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQlVJTEQgdGhlIHNlY3Rpb24gc3ViIGVsZW1lbnQgKG5vIGdlbmVyYXRlZCBIVE1MIGF0IHRoaXMgc3RhZ2UgeWV0KVxuICAgICAgICBpZih0aGlzLmpzb24gJiYgdGhpcy5qc29uW1wic2VjdGlvbnNcIl0pe1xuICAgICAgICAgICAgbGV0IHNlY3MgPSB0aGlzLmpzb25bXCJzZWN0aW9uc1wiXTtcbiAgICAgICAgICAgIHNlY3MuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzZWN0aW9uTW9kZWwgPSBuZXcgU2VjdGlvbih0aGlzLm1haW5Ob2RlLCBzZWMsICggKG5leHRTbGlkZTpib29sZWFuKSA9PnRoaXMubW92ZVNlY3Rpb24obmV4dFNsaWRlKSApKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zLnB1c2goc2VjdGlvbk1vZGVsKTtcbiAgICAgICAgICAgIH0pOyBcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJDb3VsZCBub3QgaW5pdCB0aGUgbW9kdWxlLlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuanNvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIFNUQVJUIFRIRSBBUFBMSUNBVElPTiBJTiBkZWJ1Z1xuICAgICAgICAgaWYocGFyYW1zW1wiZGVidWdcIl0pe1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IHBhcmFtc1tcImRlYnVnXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB9ICAgICAgIFxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgU1RBUlQgVEhFIEFQUExJQ0FUSU9OIElOIGJ1aWxkIE9SIHJ1biBNT0RFXG4gICAgICAgIGlmKHBhcmFtc1tcIm1vZGVcIl0pe1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gcGFyYW1zW1wibW9kZVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdydW4nO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMubW9kZSA9PT0gJ2J1aWxkJyl7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRW50ZXIgQlVJTEQgTU9ERSBmb3IgdXNlciB0byBlZGl0IHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQoKXtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYykgPT4ge1xuICAgICAgICAgICAgc2VjLmJ1aWxkKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFNFQ1RJT04gQlROXG4gICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwiaWRcIjpcImJ0bi1kZWxldGUtc2VjdGlvbi1cIitzZWMuaWR9KTtcbiAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG4gICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzZWMubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBzZWMuaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWMubm9kZS5hcHBlbmRDaGlsZChkZWxCdG4pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gQlVJTEQgQUREIFNFQ1RJT04gQlROXG4gICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgYWRkQnV0dG9uLmlubmVyVGV4dCA9ICcrJzsgIFxuICAgICAgICBhZGRCdXR0b24ub25jbGljayA9IChldikgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGxldCBidG5TZWNBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgbGV0IHNlYyA9IG5ldyBTZWN0aW9uKHRoaXMubWFpbk5vZGUsIG51bGwsICggKG5leHRTbGlkZTpib29sZWFuKSA9PnRoaXMubW92ZVNlY3Rpb24obmV4dFNsaWRlKSApKTtcbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWMpO1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChidG5TZWNBZGQpO1xuICAgICAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VjLmJ1aWxkKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFNFQ1RJT04gQlROXG4gICAgICAgICAgICBsZXQgYnRuU2VjRGVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwiaWRcIjpcImJ0bi1kZWxldGUtc2VjdGlvbi1cIitzZWMuaWR9KTtcbiAgICAgICAgICAgIGJ0blNlY0RlbC5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5gOyAgXG4gICAgICAgICAgICBidG5TZWNEZWwub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzZWMubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHRoaXMuc2VjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBzZWMuaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWMubm9kZS5hcHBlbmRDaGlsZChidG5TZWNEZWwpO1xuXG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGJ0blNlY0FkZCk7XG4gICAgICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07ICBcbiAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuXG4gICAgICAgIC8vIEJVSUxEIFRIRSBTV0lUQ0ggVUkgQlVUVE9OIFRPIERPIFRPIFJVTiBNT0RFIElGIERFQlVHLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHN3aXRjaEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tcHJpbWFyeSBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24uaW5uZXJUZXh0ID0gXCJHTyBUTyBSVU5cIjsgIFxuICAgICAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIGZvciB1c2VyIHRvIGFuc3dlciB0aGUgcXVlc3Rpb25zXG4gICAgICovXG4gICAgcnVuKCl7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgIHNlYy5ydW4odGhpcy5tYWluTm9kZSk7XG4gICAgICAgIH0pOyBcblxuICAgICAgICAvL0NyZWF0ZSBTYXZlIGJ0blxuICAgICAgICB0aGlzLnNhdmVCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcInN1Ym1pdFwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1maW5hbC1idG5cIn0pOyAgXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5pbm5lclRleHQgPSBcIlNBVkVcIjsgIFxuICAgICAgICB0aGlzLnNhdmVCdG4ub25jbGljayA9IChlKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVKc29uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIkZvcm0gaGFzIG5vdCBiZWVuIGZ1bGx5IGNvbXBsZXRlZCB5ZXQuIFBsZWFzZSBwcm9jZWVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGUgPT0gdGhpcy5zZWN0aW9ucy5sZW5ndGgtMSl7XG4gICAgICAgICAgICAvL1JlbW92ZSBOZXh0IGJ0blxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5hZnRlcih0aGlzLnNhdmVCdG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tIERFQlVHIFNBVkUgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzYXZlQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIiwgXCJpZFwiOlwiZm9ybS1idWlsZGVyLXNhdmUtYnRuXCJ9KTsgIFxuICAgICAgICBzYXZlQnV0dG9uLmlubmVyVGV4dCA9IFwiU0FWRVwiOyAgXG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLmNvbXBpbGVKc29uKCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHNhdmVCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBCVUlMRCBUSEUgU1dJVENIIFVJIEJVVFRPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBsZXQgc3dpdGNoQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1wcmltYXJ5IHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIHN3aXRjaEJ1dHRvbi5pbm5lclRleHQgPSBcIkdPIFRPIEJVSUxEIE1PREVcIjsgICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5idWlsZCgpO1xuICAgICAgICB9OyAgXG4gICAgICAgIGlmKHRoaXMuZGVidWcpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gICAgIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJsaXN0XCI+PCEtLSBTb3J0YWJsZSAtLT5cbiAgICAgICAgLy8gICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+IEl0ZW0gMVxuICAgICAgICAvLyAgICAgICA8ZGl2IGNsYXNzPVwic3VibGlzdFwiPjwhLS0gTmVzdGVkIFNvcnRhYmxlOyBXcmFwcGluZyBjb250YWluZXIgbmVlZGVkIC0tPlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJpdGVtXCI+U3ViaXRlbSAxPC9kaXY+XG4gICAgICAgIC8vICAgICAgICAgPGRpdiBjbGFzcz1cInN1Yml0ZW1cIj5TdWJpdGVtIDI8L2Rpdj5cbiAgICAgICAgLy8gICAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICA8L2Rpdj5cbiAgICAgICAgLy8gICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+IEl0ZW0gMiA8L2Rpdj5cbiAgICAgICAgLy8gICA8L2Rpdj5gO1xuXG4gICAgICAgIC8vIGxldCB0ZW1wID0gc29ydGFibGUodGhpcy5tYWluTm9kZSwge1xuICAgICAgICAvLyAgICAgY29weTp0cnVlIC8vIGRlZmF1bHQgdG8gZmFsc2VcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQodGVtcCk7XG5cbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgcmVzdWx0KCl7XG4gICAgICAgIC8vIDxjYW52YXMgaWQ9XCJteUNoYXJ0XCIgd2lkdGg9XCI0MDBcIiBoZWlnaHQ9XCI0MDBcIj48L2NhbnZhXG4gICAgICAgIC8vIGxldCBjaGFydEhvbGRlciA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiLCB7XG4gICAgICAgIC8vICAgICBcImlkXCI6XCJjaGFydGRpdlwiLFxuICAgICAgICAvLyAgICAgXCJ3aWR0aFwiOiA0MDAsXG4gICAgICAgIC8vICAgICBcImhlaWdodFwiOiA0MDBcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgLy8gdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgICAgIC8vIDtcblxuICAgICAgICAvLyB2YXIgbXlMaW5lQ2hhcnQgPSBuZXcgQ2hhcnQoY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSwge1xuICAgICAgICAvLyAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICAvLyAgICAgZGF0YToge1xuICAgICAgICAvLyAgICAgICAgIGRhdGFzZXRzOiBbe1xuICAgICAgICAvLyAgICAgICAgICAgICBsYWJlbDogJ1Rlc3QgRGF0YXNldCcsXG4gICAgICAgIC8vICAgICAgICAgICAgIGRhdGE6IFt7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB4OiAtMTAsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB5OiAwXG4gICAgICAgIC8vICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB5OiAxMFxuICAgICAgICAvLyAgICAgICAgICAgICB9LCB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB4OiAxMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHk6IDVcbiAgICAgICAgLy8gICAgICAgICAgICAgfV1cbiAgICAgICAgLy8gICAgICAgICB9XVxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIC8vb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAvLyB9KTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENsZWFyIEFMTCB0aGUgbm9kZXNcbiAgICAgKi9cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm1haW5Ob2RlKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gJyc7ICAvLyBjbGVhciBhbGwgdGhlIHN1YiBub2Rlc1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VjLmNsZWFyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuXG5cbiAgICBkaXNwbGF5KCl7XG4gICAgICAgIC8vIHRoaXMub3V0cHV0ID0gXCJcIjtcbiAgICAgICAgLy8gdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjdGlvbikgPT4ge1xuICAgICAgICAvLyAgICAgdGhpcy5vdXRwdXQgKz0gc2VjdGlvbi5kaXNwbGF5KCk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB0aGlzLm1haW5Ob2RlLmlubmVySFRNTCA9IHRoaXMub3V0cHV0O1xuICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPj0wICYmIHRoaXMuY3VycmVudE5vZGU8dGhpcy5zZWN0aW9ucy5sZW5ndGgpe1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjogYW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWM6U2VjdGlvbikgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goc2VjLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoIHtcInNlY3Rpb25zXCI6YXJyfSApO1xuICAgICAgICBjb25zb2xlLmxvZygnZmluYWxPdXRwdXQnKTtcbiAgICAgICAgY29uc29sZS5sb2coZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gZmluYWxPdXRwdXQ7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIHRoZSBzbGlkZXIgb3IgZGlzcGxheSB0byB0aGUgbmV4dCBzZWN0aW9uXG4gICAgICovXG4gICAgbW92ZVNlY3Rpb24obmV4dFNsaWRlOmJvb2xlYW4pe1xuICAgICAgICAvLyBpZiBtb3ZlIGZvcndhcmRcbiAgICAgICAgaWYobmV4dFNsaWRlKXtcbiAgICAgICAgICAgIC8vIG1ha2luZyBzdXJlIEkgYW0gYWxsb3dlZCB0byBtb3ZlIHRvIHRoZSBuZXh0IHNsaWRlIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MCAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoLTEpe1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUrKztcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgUHJldmlvdXMgYnRuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2aW91cy1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuYWZ0ZXIodGhpcy5zYXZlQnRuKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgYWxyZWFkeSBhcmUgb24gdGhlIG5leHQgc2xpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgSSBhbSBhbGxvd2VkIHRvIG1vdmUgdG8gdGhlIHByZXZpb3VzIHNsaWRlIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZT49MSAmJiB0aGlzLmN1cnJlbnROb2RlPHRoaXMuc2VjdGlvbnMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLS07XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLy9EaXNwbGF5IE5leHQgYnRuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPT0wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIFByZXZpb3VzIGJ0blxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXByZXZpb3VzLXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICBhbGVydChcIllvdSBhbHJlYWR5IGFyZSBvbiB0aGUgZmlyc3Qgc2xpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL3NlY3Rpb24udHNcIik7IiwiaW1wb3J0IHtCbG9jaywgQmxvY2tUeXBlfSBmcm9tIFwiLi9ibG9jay9ibG9ja1wiO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi9idWlsZGVyXCI7XG5pbXBvcnQgeyBCbG9ja0ZhY3RvcnkgfSBmcm9tIFwiLi9ibG9jay9ibG9ja0ZhY3RvcnlcIjtcbmltcG9ydCB7IEJsb2NrU2xpZGVyIH0gZnJvbSBcIi4vYmxvY2svYmxvY2tTbGlkZXJcIjtcblxuLyoqXG4gKiBTRUNUSU9OIGNsYXNzIGNvbnRhaW5zIGEgcG90ZW50aWFsIGxpc3Qgb2YgcXVlc3Rpb24gdGhhdCBpcyBkaXNwbGF5ZWQgb24gdGhlIHNhbWUgcGFnZSBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlY3Rpb257XG4gICAgYmxvY2tzOkJsb2NrW107IFxuICAgIHRpdGxlOiBzdHJpbmc7ICAgXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIG91dHB1dDogc3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBwYXJlbnQ6IEhUTUxFbGVtZW50O1xuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuICAgIGNhbGxiYWNrOiBGdW5jdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKF9wYXJlbnQ6SFRNTEVsZW1lbnQsIF9qc29uOkZvcm1EYXRhLCBfY2FsbGJhY2s6RnVuY3Rpb24pe1xuICAgICAgICB0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gW107XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBfY2FsbGJhY2s7XG4gICAgICAgIHRoaXMudGl0bGUgPSBcIkRlZmF1bHQgVGl0bGVcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJkZWZhdWx0X25hbWVcIjtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcInRpdGxlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gX2pzb25bXCJ0aXRsZVwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF9qc29uW1wibmFtZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gX2pzb25bXCJuYW1lXCJdO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYoX2pzb25bXCJibG9ja3NcIl0pe1xuICAgICAgICAgICAgICAgIF9qc29uW1wiYmxvY2tzXCJdLmZvckVhY2goIChiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja01vZGVsID0gbmV3IEJsb2NrKGIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsb2NrTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAvL2Jsb2NrTW9kZWwucnVuKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGZvcm0gaW4gQlVJTERFUiBNT0RFIGZvciB0aGUgdXNlciB0byBlZGl0IHRoZSBmb3JtIGl0c2VsZlxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYm94XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHNlY3Rpb24gaGVhZGVyIGRpdiB3aXRoIHRpdGxlIGFuZCBuYW1lIGlucHV0XG4gICAgICAgIGxldCBub2RlSGVhZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcImNsYXNzXCI6IFwicm93IHBpeGl1bS1ibG9jay1idWlsZCBwaXhpdW0tYmxvY2stYnVpbGQtaGVhZGVyXCJ9KTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVIZWFkZXIsIHRoaXMuaWQsIHRoaXMudGl0bGUsIFwiVGl0bGUgU2VjdGlvblwiLCAodmFsKSA9PiB7dGhpcy50aXRsZT12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlSGVhZGVyLCB0aGlzLmlkLCB0aGlzLm5hbWUsIFwiTmFtZSBTZWN0aW9uXCIsICh2YWwpID0+IHt0aGlzLm5hbWU9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobm9kZUhlYWRlcik7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgYmxrLmJ1aWxkKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG4gICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUNoaWxkKGJsay5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHRoaXMuYmxvY2tzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gYmxrLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmxrLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyBCVUlMRCBBREQgQk9MQ0sgQlROXG4gICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgYWRkQnV0dG9uLmlubmVySFRNTCA9ICcrJzsgIFxuICAgICAgICBhZGRCdXR0b24ub25jbGljayA9IChldikgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGxldCBidG5CbGtBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgLy8gQUREIE5FVyBCT0xDS1xuICAgICAgICAgICAgbGV0IGJsayA9IG5ldyBCbG9jayhudWxsKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVDaGlsZChidG5CbGtBZGQpO1xuICAgICAgICAgICAgbGV0IGJ0blNlY0RlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLWRlbGV0ZS1zZWN0aW9uLVwiK3RoaXMuaWQpO1xuICAgICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUNoaWxkKGJ0blNlY0RlbCk7XG4gICAgICAgICAgICBibGsuYnVpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgIGxldCBidG5CbGtEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgYnRuQmxrRGVsLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgIGJ0bkJsa0RlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlQ2hpbGQoYmxrLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gdGhpcy5ibG9ja3MuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBibGsuaWQ7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBibGsubm9kZS5hcHBlbmRDaGlsZChidG5CbGtEZWwpO1xuXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoYnRuQmxrQWRkKTtcbiAgICAgICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChidG5TZWNEZWwpO1xuICAgICAgICB9OyAgXG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIHRoZSBmb3JtIGZvciB1c2VyIHRvIGFuc3dlclxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIHJ1bihub2RlKXtcblxuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYm94XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBuYW1lTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgbmFtZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50aXRsZTtcbiAgICAgICAgbGV0IGhyTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoclwiKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5hbWVOb2RlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyTmFtZSk7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGIpID0+IHtcbiAgICAgICAgICAgIGIucnVuKHRoaXMubm9kZSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gQlVJTEQgVEhFIEJVVFRPTi4gUFJFVklPVVMgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBwcmV2QnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1pbmZvIHBpeGl1bS1idG5cIiwgXCJpZFwiOiBcImJ0bi1wcmV2aW91cy1zZWN0aW9uLVwiK3RoaXMuaWQsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBwcmV2QnV0dG9uLmlubmVyVGV4dCA9IFwiUHJldmlvdXNcIjtcbiAgICAgICAgcHJldkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAgXG4gICAgICAgIHByZXZCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAvLyBUUlVFIEZPUiBORVhUIFNMSURFXG4gICAgICAgICAgICAgICAgLy8gRkFMU0UgRk9SIFBSRVYgU0xJREVcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTsgIFxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQocHJldkJ1dHRvbik7XG5cbiAgICAgICAgLy8gQlVJTEQgVEhFIEJVVFRPTi4gTkVYVCBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IG5leHRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLWluZm8gcGl4aXVtLWJ0blwiLCBcImlkXCI6IFwiYnRuLW5leHQtc2VjdGlvbi1cIit0aGlzLmlkLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgbmV4dEJ1dHRvbi5pbm5lclRleHQgPSBcIk5leHRcIjsgIFxuICAgICAgICBuZXh0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgaWYodGhpcy5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gVFJVRSBGT1IgTkVYVCBTTElERVxuICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRm9ybSBoYXMgbm90IGJlZW4gZnVsbHkgY29tcGxldGVkIHlldC4gUGxlYXNlIHByb2NlZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07ICBcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5leHRCdXR0b24pO1xuXG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgIH1cblxuXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5ub2RlKXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrKSA9PiB7XG4gICAgICAgICAgICBibGsuY2xlYXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIGdldE5vZGUoKXtcbiAgICAgICAgYWxlcnQodGhpcy5ub2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBjdXJyZW50IHNlY3Rpb25cbiAgICAgKi9cbiAgICBzaG93KCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGN1cnJlbnQgc2VjdGlvbiBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICBoaWRlKCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgRk9STSBoYXMgYmVlbiBmdWxseSBjb21wbGV0ZWQgLSBBbGwgYmxvY2tzIGhhdmUgYSB2YWxpZCBhbnN3ZXJcbiAgICAgKi9cbiAgICBpc0NvbXBsZXRlZCgpe1xuICAgICAgICBsZXQgaXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKT0+e1xuICAgICAgICAgICAgaWYoYmxrICYmICFibGsuYW5zd2VyICYmIChibGsudHlwZSAhPT0gQmxvY2tUeXBlLk5PQU5TV0VSKSl7XG4gICAgICAgICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpc0NvbXBsZXRlZDtcbiAgICB9XG5cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6YW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKSA9PiB7XG4gICAgICAgICAgICBhcnIucHVzaChibGsuY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc2VjID0ge1xuICAgICAgICAgICAgXCJ0aXRsZVwiOiB0aGlzLnRpdGxlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIFwiYmxvY2tzXCI6YXJyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlYztcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2sudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuaW1wb3J0IHtDaG9pY2V9IGZyb20gXCIuL2Nob2ljZVwiO1xuXG5pbXBvcnQge0Jsb2NrU2xpZGVyfSBmcm9tIFwiLi9ibG9ja1NsaWRlclwiO1xuaW1wb3J0IHtCbG9ja0ZyZWV0ZXh0fSBmcm9tIFwiLi9ibG9ja0ZyZWV0ZXh0XCI7XG5pbXBvcnQge0Jsb2NrUmFkaW99IGZyb20gXCIuL2Jsb2NrUmFkaW9cIjtcbmltcG9ydCB7IEJsb2NrQ2hlY2tib3ggfSBmcm9tIFwiLi9ibG9ja0NoZWNrYm94XCI7XG5pbXBvcnQge0Jsb2NrTG9uZ3RleHR9IGZyb20gXCIuL2Jsb2NrTG9uZ3RleHRcIjtcbi8vIGltcG9ydCB7QmxvY2tOb2Fuc3dlcn0gZnJvbSBcIi4vYmxvY2tOb2Fuc3dlclwiO1xuXG5leHBvcnQgZW51bSBCbG9ja1R5cGUge1xuICAgIEZSRUVURVhUID0gMSxcbiAgICBSQURJTyA9IDIsXG4gICAgU0xJREVSID0gMyxcbiAgICBDSEVDS0JPWCA9IDQsXG4gICAgTE9OR1RFWFQgPSA1LFxuICAgIE5PQU5TV0VSID0gNlxufVxuXG5cbi8qKlxuICogQSBCbG9jayBpcyBhIGxpc3QgXG4gKi9cbmV4cG9ydCBjbGFzcyBCbG9ja3tcbiAgICB0eXBlOm51bWJlcjtcbiAgICB0ZXh0OnN0cmluZztcbiAgICBhbnN3ZXI6YW55O1xuICAgIG5hbWU6c3RyaW5nO1xuICAgIG1pbjpzdHJpbmc7XG4gICAgbWF4OnN0cmluZztcbiAgICBzdGVwOnN0cmluZztcbiAgICBjaG9pY2VzOkNob2ljZVtdO1xuXG4gICAgb3V0cHV0OnN0cmluZztcbiAgICBpZDpzdHJpbmc7XG4gICAganNvbjphbnk7XG5cbiAgICBub2RlOiBIVE1MRWxlbWVudDtcblxuICAgIC8qXG4gICAgXCJ0aXRsZVwiOiBcIkRFTEVHQVRJT046IDxicj4gPGJyPiBIb3cgc2tpbGxlZCBkbyB5b3UgZmVlbCB0b2RheSBhYm91dCB5b3VyIGFiaWxpdHkgdG8gZGVsZWdhdGU/XCIsXG4gICAgXCJ0eXBlXCI6IDQsXG4gICAgXCJncm91cFwiOiAxLFxuICAgIFwibGFiZWxcIjogXG4gICAgKi9cblxuICAgIGNvbnN0cnVjdG9yKF9qc29uOkZvcm1EYXRhID0gbnVsbCl7XG4gICAgICAgIHRoaXMuanNvbiA9IF9qc29uO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLm1pbiA9IFwiXCI7XG4gICAgICAgIHRoaXMubWF4ID0gXCJcIjtcbiAgICAgICAgdGhpcy5zdGVwID0gXCJcIjtcbiAgICAgICAgdGhpcy5hbnN3ZXIgPSBcIlwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmNob2ljZXMgPSBbXTtcblxuICAgICAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpO1xuXG4gICAgICAgIGlmKF9qc29uKXtcbiAgICAgICAgICAgIGlmKF9qc29uW1widGV4dFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gX2pzb25bXCJ0ZXh0XCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfanNvbltcInR5cGVcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IF9qc29uW1widHlwZVwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSBcIlwiO1xuICAgICAgICAgICAgaWYoX2pzb25bXCJhbnN3ZXJcIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMuYW5zd2VyID0gX2pzb25bXCJhbnN3ZXJcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1wibmFtZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gX2pzb25bXCJuYW1lXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfanNvbltcIm1pblwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5taW4gPSBfanNvbltcIm1pblwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF9qc29uW1wibWF4XCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1heCA9IF9qc29uW1wibWF4XCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX2pzb25bXCJzdGVwXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSBfanNvbltcInN0ZXBcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLlJBRElPIHx8IHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLkNIRUNLQk9YKXtcbiAgICAgICAgICAgICAgICAvLyBsb2FkIGFkZGl0aW9uYWwgZGF0YVxuICAgICAgICAgICAgICAgIGlmKF9qc29uW1wiY2hvaWNlc1wiXSl7XG4gICAgICAgICAgICAgICAgICAgIF9qc29uW1wiY2hvaWNlc1wiXS5mb3JFYWNoKGNob2ljZUpzb24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNob2ljZSA9IG5ldyBDaG9pY2UoY2hvaWNlSnNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNob2ljZXMucHVzaChjaG9pY2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy90aGlzLmNob2ljZXMgPSBfanNvbltcImNob2ljZXNcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENsZWFyIGFuZCByZW1vdmUgYWxsIHRoZSBIVE1MIE5vZGVcbiAgICAgKi9cbiAgICBjbGVhcigpe1xuICAgICAgICBpZih0aGlzLm5vZGUpe1xuICAgICAgICAgICAgdGhpcy5ub2RlLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBidWlsZCB0aGUgZm9ybVxuICAgICAqL1xuICAgIGJ1aWxkKG5vZGUpe1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiIDogXCJyb3cgcGl4aXVtLWJsb2NrLWJ1aWxkXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGhyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaHJcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1ociBjb2wtbWQtMTJcIlxuICAgICAgICB9KTtcblxuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQodGhpcy5ub2RlLCB0aGlzLmlkLCB0aGlzLnRleHQsIFwiVGV4dFwiLCAodmFsKSA9PiB7dGhpcy50ZXh0PXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KHRoaXMubm9kZSwgdGhpcy5pZCwgdGhpcy5uYW1lLCBcIk5hbWVcIiwgKHZhbCkgPT4ge3RoaXMubmFtZT12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIGxldCBlbnVtQXJyYXkgPSBPYmplY3Qua2V5cyhCbG9ja1R5cGUpLmZpbHRlcihhPT5hLm1hdGNoKC9eXFxELykpLm1hcChuYW1lPT4oe25hbWUsIHZhbHVlOiBCbG9ja1R5cGVbbmFtZV0gYXMgbnVtYmVyfSkpO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duKHRoaXMubm9kZSwgdGhpcy5pZCwgdGhpcy50eXBlLCBcIlR5cGVcIiwgKHZhbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50eXBlPU51bWJlcih2YWwpO1xuICAgICAgICAgICAgdGhpcy5hbnN3ZXI9Jyc7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWJFbGVtZW50QmxvY2soKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9LCBlbnVtQXJyYXksIFwiY29sLW1kLTRcIiApO1xuXG4gICAgICAgIC8vIC0tLS0gRmllbGQgZm9yIENob2ljZXMgYmxvY2tcbiAgICAgICAgbGV0IGJsa0Nob2ljZXNTdHlsZSA9IFwiXCI7XG4gICAgICAgIGlmKCh0aGlzLnR5cGUgIT09IEJsb2NrVHlwZS5SQURJTykgJiYgKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLkNIRUNLQk9YKSl7XG4gICAgICAgICAgICBibGtDaG9pY2VzU3R5bGUgPSBcImRpc3BsYXk6bm9uZTtcIlxuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlQ2hvaWNlcyA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBjb2wtbWQtMTJcIixcbiAgICAgICAgICAgIFwic3R5bGVcIjogYmxrQ2hvaWNlc1N0eWxlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBsYWJUaXRsZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWJUaXRsZS5pbm5lckhUTUwgPSBcIkNob2ljZXMgOiBcIjtcbiAgICAgICAgbm9kZUNob2ljZXMuYXBwZW5kQ2hpbGQobGFiVGl0bGUpO1xuICAgICAgICBpZih0aGlzLmNob2ljZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCggKGNoOkNob2ljZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNoLmJ1aWxkKG5vZGVDaG9pY2VzKTtcbiAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgcGl4aXVtLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICAgICAgZGVsQnRuLmlubmVyVGV4dCA9ICctJzsgIFxuICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUNob2ljZXMucmVtb3ZlQ2hpbGQoY2gubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMuY2hvaWNlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGNoLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjaC5ub2RlLmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJVSUxEIEFERCBCT0xDSyBCVE5cbiAgICAgICAgbGV0IGFkZENob2ljZUJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4tc3VjY2VzcyBwaXhpdW0tYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICBhZGRDaG9pY2VCdXR0b24uaW5uZXJUZXh0ID0gJysnOyAgXG4gICAgICAgIGFkZENob2ljZUJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgbGV0IGJ0bkNoQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgIC8vIEFERCBORVcgQk9MQ0tcbiAgICAgICAgICAgIGxldCBjaCA9IG5ldyBDaG9pY2UobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmNob2ljZXMucHVzaChjaCk7XG4gICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChidG5DaEFkZCk7XG4gICAgICAgICAgICBjaC5idWlsZChub2RlQ2hvaWNlcyk7XG4gICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgQk9MQ0sgQlROXG4gICAgICAgICAgICBsZXQgYnRuQ2hEZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIHBpeGl1bS1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pO1xuICAgICAgICAgICAgYnRuQ2hEZWwuaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICBidG5DaERlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChjaC5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNob2ljZXMgPSB0aGlzLmNob2ljZXMuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbC5pZCAhPSBjaC5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNoLm5vZGUuYXBwZW5kQ2hpbGQoYnRuQ2hEZWwpO1xuXG4gICAgICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChidG5DaEFkZCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgbm9kZUNob2ljZXMuYXBwZW5kQ2hpbGQoYWRkQ2hvaWNlQnV0dG9uKTtcblxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobm9kZUNob2ljZXMpO1xuICAgICAgICAvLyAtLS0tIFxuXG4gICAgICAgIC8vIC0tLS0gRmllbGQgZm9yIFNsaWRlciBibG9ja1xuICAgICAgICBsZXQgYmxrU2xpZGVyU3R5bGUgPSBcIlwiO1xuICAgICAgICBpZih0aGlzLnR5cGUgIT09IEJsb2NrVHlwZS5TTElERVIpe1xuICAgICAgICAgICAgYmxrU2xpZGVyU3R5bGUgPSBcImRpc3BsYXk6bm9uZTtcIlxuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlU2xpZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJzbGlkZXJfYmxvY2tfXCIrdGhpcy5pZCxcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJyb3cgY29sLW1kLTEyXCIsXG4gICAgICAgICAgICBcInN0eWxlXCI6IGJsa1NsaWRlclN0eWxlXG4gICAgICAgIH0pO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5taW4sIFwiTWluXCIsICh2YWwpID0+IHt0aGlzLm1pbj12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLm1heCwgXCJNYXhcIiwgKHZhbCkgPT4ge3RoaXMubWF4PXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMuc3RlcCwgXCJTdGVwXCIsICh2YWwpID0+IHt0aGlzLnN0ZXA9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobm9kZVNsaWRlcik7XG4gICAgICAgIC8vIC0tLS1cblxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaHIpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG4gICAgXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB1c2VkIHRvIFJ1biB0aGUgZm9ybVxuICAgICAqL1xuICAgIHJ1bihub2RlKXtcbiAgICAgICAgLy8gYWxlcnQoXCJDXCIpO1xuICAgICAgICBsZXQgdGl0bGVOb2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwicFwiKTsgLy9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgdGl0bGVOb2RlLmlubmVySFRNTCA9IHRoaXMudGV4dDtcbiAgICAgICAgdGhpcy5ub2RlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQodGl0bGVOb2RlKTtcblxuICAgICAgICBzd2l0Y2godGhpcy50eXBlKXtcbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLlJBRElPOlxuICAgICAgICAgICAgICAgIEJsb2NrUmFkaW8ucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkNIRUNLQk9YOlxuICAgICAgICAgICAgICAgIEJsb2NrQ2hlY2tib3gucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkZSRUVURVhUOlxuICAgICAgICAgICAgICAgIEJsb2NrRnJlZXRleHQucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5MT05HVEVYVDpcbiAgICAgICAgICAgICAgICBCbG9ja0xvbmd0ZXh0LnJ1bih0aGlzLm5vZGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5OT0FOU1dFUjpcbiAgICAgICAgICAgICAgICAvLyBCbG9ja05vYW5zd2VyLnJ1bih0aGlzLm5vZGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEJsb2NrVHlwZS5TTElERVI6XG4gICAgICAgICAgICAgICAgQmxvY2tTbGlkZXIucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IGhyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaHJcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1oclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaHIpO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuICAgIGRpc3BsYXkoKXtcbiAgICB9XG5cblxuXG4gICAgdHJpZ2dlclN1YkVsZW1lbnRCbG9jaygpe1xuICAgICAgICBsZXQgc2xpZGVyQmxvY2sgPSBudWxsO1xuICAgICAgICBpZihzbGlkZXJCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2xpZGVyX2Jsb2NrX1wiK3RoaXMuaWQpKXtcbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLlNMSURFUil7XG4gICAgICAgICAgICAgICAgc2xpZGVyQmxvY2suc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNsaWRlckJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBhbGVydChcIk5vZGUgU2lsZGVyIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjaG9pY2VCbG9jayA9IG51bGw7XG4gICAgICAgIGlmKGNob2ljZUJsb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjaG9pY2VzX2Jsb2NrX1wiK3RoaXMuaWQpKXtcbiAgICAgICAgICAgIGlmKCh0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5SQURJTykgfHwgKHRoaXMudHlwZSA9PT0gQmxvY2tUeXBlLkNIRUNLQk9YKSl7XG4gICAgICAgICAgICAgICAgY2hvaWNlQmxvY2suc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNob2ljZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBhbGVydChcIk5vZGUgQ2hvaWNlIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgbGV0IGFycjphbnlbXTtcbiAgICAgICAgYXJyID0gW107XG4gICAgICAgIHRoaXMuY2hvaWNlcy5mb3JFYWNoKCAoY2g6Q2hvaWNlKSA9PiB7XG4gICAgICAgICAgICBhcnIucHVzaChjaC5jb21waWxlSnNvbigpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuanNvbiA9IHtcbiAgICAgICAgICAgIFwidHlwZVwiOnRoaXMudHlwZSxcbiAgICAgICAgICAgIFwidGV4dFwiOnRoaXMudGV4dCxcbiAgICAgICAgICAgIFwiYW5zd2VyXCI6dGhpcy5hbnN3ZXIsXG4gICAgICAgICAgICBcIm5hbWVcIjp0aGlzLm5hbWUsXG4gICAgICAgICAgICBcIm1pblwiOnRoaXMubWluLFxuICAgICAgICAgICAgXCJtYXhcIjp0aGlzLm1heCxcbiAgICAgICAgICAgIFwic3RlcFwiOnRoaXMuc3RlcCxcbiAgICAgICAgICAgIFwiY2hvaWNlc1wiOiBhcnJcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5qc29uO1xuICAgIH1cbn0iLCJcbmV4cG9ydCBjbGFzcyBCdWlsZGVye1xuXG4gICAgLyoqXG4gICAgICogQnVpbGQgYW5kIHNldCBhbGwgdGhlIGF0dHJpYnV0ZSBvZiBhIEhUTUwgRWxlbWVudCBub2RlXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIGlucHV0IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBfcGFyYW1zIFRoZSBhdHRyaWJ1dGVzIGxpc3QgdG8gc2V0XG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUVsZW1lbnQodHlwZTpzdHJpbmcsIF9wYXJhbXM6YW55ID0gbnVsbCl7XG4gICAgICAgIGlmKCF0eXBlKXtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ291bGQgbm90IGJ1aWxkIHRoZSBlbGVtZW50XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgICAgICBpZihfcGFyYW1zKXtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3BhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHdpbGwgc2V0IGFsbCBhdHRyaWJ1dGUgaW50byBhIHNwZWNpZmljIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbSBFbGVtZW50IHRvIHNldCB0ZSBhdHRyaWJ1dGUgb2ZcbiAgICAgKiBAcGFyYW0gX3BhcmFtcyBUaGUgYXR0cmlidXRlcyBsaXN0IHRvIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRBdHRyaWJ1dGVzKGVsZW06SFRNTEVsZW1lbnQsIF9wYXJhbXM6YW55ID0gbnVsbCl7XG4gICAgICAgIGlmKF9wYXJhbXMpe1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF9wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfcGFyYW1zW2tleV07XG4gICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHN0YXRpYyBhZGRCdWlsZGVySW5wdXRUZXh0KG5vZGUsIGlkLCB2YWx1ZSwgbGFiZWwsIGNhbGxiYWNrLCBjbGFzc2VzPVwiY29sLW1kLTEyXCIpe1xuICAgICAgICBsZXQgZGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tcm93LWJsb2NrIFwiK2NsYXNzZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYWIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgbGFiLmlubmVySFRNTCA9IGxhYmVsK1wiOiBcIjtcbiAgICAgICAgbGV0IGlucHV0ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHZhbHVlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IGxhYmVsK1wiX1wiK2lkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZFwiLFxuICAgICAgICAgICAgXCJwbGFjZWhvbGRlclwiOiBsYWJlbFxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXQub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgY2FsbGJhY2soKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWUpO1xuICAgICAgICB9OyBcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGxhYik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG5cbiAgICAvKlxuPHNlbGVjdCBuYW1lPVwiY2Fyc1wiIGlkPVwiY2Fyc1wiPlxuICA8b3B0aW9uIHZhbHVlPVwidm9sdm9cIj5Wb2x2bzwvb3B0aW9uPlxuICA8b3B0aW9uIHZhbHVlPVwic2FhYlwiPlNhYWI8L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cIm1lcmNlZGVzXCI+TWVyY2VkZXM8L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cImF1ZGlcIj5BdWRpPC9vcHRpb24+XG48L3NlbGVjdD5cbiAgICAqL1xuICAgIHN0YXRpYyBhZGRCdWlsZGVySW5wdXREcm9wZG93bihub2RlLCBpZCwgdmFsdWUsIGxhYmVsLCBjYWxsYmFjaywgb3B0aW9ucywgY2xhc3Nlcz1cImNvbC1tZC0xMlwiKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBcIitjbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbGFiID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYi5pbm5lckhUTUwgPSBsYWJlbCtcIjogXCI7XG4gICAgICAgIGxldCBpbnB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWRyb3Bkb3duXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IHZhbHVlLFxuICAgICAgICAgICAgXCJuYW1lXCI6IGxhYmVsK1wiX1wiK2lkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImRpc3BsYXk6YmxvY2tcIlxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXQub25jaGFuZ2UgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlKTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgb3B0aW9ucy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgbGV0IG9wdCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBlbGVtZW50LnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZih2YWx1ZT09PWVsZW1lbnQudmFsdWUpe1xuICAgICAgICAgICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhvcHQsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RlZFwiOlwic2VsZWN0ZWRcIlxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHQuaW5uZXJIVE1MID0gZWxlbWVudC5uYW1lO1xuICAgICAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQob3B0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGxhYik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vY2hvaWNlLnRzXCIpOyIsIlxuaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQ2hvaWNle1xuICAgIGxhYmVsOnN0cmluZztcbiAgICB2YWx1ZTogc3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBqc29uOmFueTtcbiAgICBub2RlOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKF9qc29uKXtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcImxhYmVsXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsID0gX2pzb25bXCJsYWJlbFwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJ2YWx1ZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IF9qc29uW1widmFsdWVcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB1c2VkIHRvIGJ1aWxkIHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQobm9kZSl7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBibG9jay1jaG9pY2VzIGNvbC1tZC0xMlwiLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDUkVBVEUgVkFMVUUgSU5QVVRcbiAgICAgICAgbGV0IGxhYlZhbHVlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1wiZm9yXCI6XCJpbnB1dF9cIit0aGlzLnZhbHVlK1wiX1wiK3RoaXMuaWR9KTtcbiAgICAgICAgbGFiVmFsdWUuaW5uZXJIVE1MID0gXCJWYWx1ZSA6IFwiO1xuICAgICAgICBsZXQgaW5wdXRWYWx1ZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB0aGlzLnZhbHVlLFxuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0X1wiK3RoaXMudmFsdWUrXCJfXCIrdGhpcy5pZCxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJjb2xvcjpSZWQ7XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0VmFsdWUub25ibHVyID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldi50YXJnZXQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZT0oPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgLy8gQ1JFQVRFIExBQkVMIElOUFVUXG4gICAgICAgIGxldCBsYWJMYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcImZvclwiOlwiaW5wdXRfXCIrdGhpcy5sYWJlbCtcIl9cIit0aGlzLmlkLCBcInN0eWxlXCI6XCJtaW4td2lkdGg6IGF1dG87XCJ9KTtcbiAgICAgICAgbGFiTGFiZWwuaW5uZXJIVE1MID0gXCJMYWJlbCA6IFwiO1xuICAgICAgICBsZXQgaW5wdXRMYWJlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgXCJpZFwiOlwiaW5wdXRfXCIrdGhpcy5sYWJlbCtcIl9cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZDtcIlxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXRMYWJlbC5vbmJsdXIgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmxhYmVsPSg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlO1xuICAgICAgICB9OyBcblxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobGFiVmFsdWUpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaW5wdXRWYWx1ZSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChsYWJMYWJlbCk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChpbnB1dExhYmVsKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgdGhpcy5qc29uID0ge1xuICAgICAgICAgICAgXCJsYWJlbFwiOnRoaXMubGFiZWwsXG4gICAgICAgICAgICBcInZhbHVlXCI6dGhpcy52YWx1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmpzb247XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrU2xpZGVyLnRzXCIpOyIsImltcG9ydCB7QmxvY2t9IGZyb20gXCIuL2Jsb2NrXCI7XG5pbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja1NsaWRlcntcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2s6QmxvY2spe1xuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAgICAgbGV0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICAgIGxldCBtaW4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjpcIl9sZWZ0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIG1pbi5pbm5lckhUTUwgPSBibG9jay5taW47XG4gICAgICAgIGxldCBtYXggPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjpcIl9yaWdodFwiXG4gICAgICAgIH0pOztcbiAgICAgICAgbWF4LmlubmVySFRNTCA9IGJsb2NrLm1heDtcblxuICAgICAgICAvLyA8b3V0cHV0IGZvcj1cImZvb1wiIG9uZm9ybWlucHV0PVwidmFsdWUgPSBmb28udmFsdWVBc051bWJlcjtcIj48L291dHB1dD5cblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1zbGlkZXJcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInJhbmdlXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwibWluXCI6IGJsb2NrLm1pbixcbiAgICAgICAgICAgIFwibWF4XCI6IGJsb2NrLm1heCxcbiAgICAgICAgICAgIFwibmFtZVwiOiBibG9jay5uYW1lLFxuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0cmFuZ2VfXCIrYmxvY2submFtZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYoYmxvY2suc3RlcCl7XG4gICAgICAgICAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIGJsb2NrLnN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIGZpZWxkLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCg8SFRNTElucHV0RWxlbWVudD5maWVsZCkpO1xuICAgICAgICAgICAgbGV0IHRlbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm91dHB1dF9cIitibG9jay5uYW1lKS5pbm5lckhUTUwgPSBibG9jay5hbnN3ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5wdXREaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGlucHV0RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwicGl4aXVtLWJsb2NrLXNsaWRlclwiKTtcbiAgICAgICAgLy9mb3JtLnNldEF0dHJpYnV0ZShcIm9uaW5wdXRcIiwgXCJvdXRwdXRfXCIrdGhpcy5uYW1lK1wiLmlubmVySFRNTCA9IFwiK3RoaXMubmFtZStcIi52YWx1ZVwiICk7XG4gICAgICAgIGxldCBvdXRwdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJvdXRwdXRcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcIm91dHB1dF9cIitibG9jay5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBvdXRwdXQuaW5uZXJIVE1MID0gYmxvY2suYW5zd2VyO1xuICAgICAgICBcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQob3V0cHV0KTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoZmllbGQpO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtaW4pO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtYXgpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGlucHV0RGl2KTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrRnJlZXRleHQudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tGcmVldGV4dHtcblxuICAgIHN0YXRpYyBydW4obm9kZSwgYmxvY2spe1xuICAgICAgICBcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG4gICAgICAgIGxldCBmaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwibmFtZVwiOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBcInN0eWxlXCI6IFwiY29sb3I6UmVkXCJcbiAgICAgICAgfSk7IFxuICAgICAgICBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgfTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9waXhpdW1kaWdpdGFsL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrUmFkaW8udHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tSYWRpbyB7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgYmxvY2suY2hvaWNlcy5mb3JFYWNoKCAoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZiAgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwicmFkaW9cIixcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogIGJsb2NrLm5hbWUsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNob2ljZS5sYWJlbDtcblxuICAgICAgICAgICAgbGV0IF9kaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoX2Rpdik7XG5cbiAgICAgICAgICAgIGYub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcGl4aXVtZGlnaXRhbC9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja0NoZWNrYm94LnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrQ2hlY2tib3gge1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGJsb2NrLmNob2ljZXMuZm9yRWFjaCggKGNob2ljZSkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgZiAgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiY2hlY2tib3hcIixcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogIGJsb2NrLm5hbWUsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9QcmVzZWxlY3QgYW5zd2VycyBpZiBzZXRcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxvY2suYW5zd2VyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZigoY2hvaWNlLnZhbHVlK1wiXCIpPT09YmxvY2suYW5zd2VyW2ldKXtcbiAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tlZFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNob2ljZS5sYWJlbDtcblxuICAgICAgICAgICAgbGV0IF9kaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoX2Rpdik7XG5cbiAgICAgICAgICAgIGYub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjaGVja2VkQm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XVtuYW1lPVwiJytibG9jay5uYW1lKydcIl06Y2hlY2tlZCcpO1xuICAgICAgICAgICAgICAgIGxldCBpZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBjaGVja2VkQm94ZXMuZm9yRWFjaCggKGVsZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goKDxIVE1MSW5wdXRFbGVtZW50PmVsZW0pLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBpZHM7XG4gICAgICAgICAgICB9OyBcbiAgICAgICAgfSk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3BpeGl1bWRpZ2l0YWwvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tMb25ndGV4dC50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja0xvbmd0ZXh0e1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIFxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAgICAgbGV0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGZpZWxkLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwicm93c1wiOiA1LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBibG9jay5hbnN3ZXIsXG4gICAgICAgICAgICBcIm5hbWVcIjogdGhpcy5uYW1lLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBcImNvbG9yOlJlZFwiXG4gICAgICAgIH0pOyBcbiAgICAgICAgLy8gZmllbGQuaW5uZXJIVE1MID0gYmxvY2suYW5zd2VyO1xuICAgICAgICBmaWVsZC5vbmJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSAoPEhUTUxUZXh0QXJlYUVsZW1lbnQ+ZmllbGQpLnZhbHVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgfTsgXG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChmaWVsZCk7IFxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=