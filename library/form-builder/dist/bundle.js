!function(e){var t={};function i(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)i.d(n,l,function(t){return e[t]}.bind(null,l));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},
/*!********************************!*\
  !*** ./src/builder.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./builder.ts */8)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*****************************!*\
  !*** ./src/main.ts-exposed ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./main.ts */3)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************!*\
  !*** ./node_modules/ts-loader!./src/main.ts ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiumForm=void 0;const n=i(/*! ./section */4),l=i(/*! ./builder */1),s=i(/*! ./data.json */23);function o(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]==t)return!0;return!1}function r(e,t){for(var i=document.querySelectorAll(t),n=e.parentNode;n&&!o(i,n);)n=n.parentNode;return n}t.PixiumForm=class{constructor(e){if(this.sections=[],this.currentNode=0,e.div){if(this.div=e.div,this.mainNode=document.getElementById(this.div),console.log(this.mainNode),this.mainNode.setAttribute("class","container form-container drop-targets"),e.data?this.json=e.data:this.json=s,e.singleSection?this.singleSection=e.singleSection:this.singleSection=!1,this.json&&this.json.sections){this.json.sections.forEach(e=>{let t=new n.Section(this.mainNode,e,this.singleSection?null:e=>this.moveSection(e));this.sections.push(t)})}else alert("Could not init the module."),console.log(this.json);e.debug?this.debug=e.debug:this.debug=!1,e.mode?this.mode=e.mode:this.mode="run","build"===this.mode?this.build():this.run()}else alert("Div not found. Cannot display the form")}getIndexFromSectionId(e){for(let t=0;t<this.sections.length;t++)if(this.sections[t].id==e)return t;return null}swapSections(e,t){console.log(this.sections);let i=this.sections[e];this.sections[e]=this.sections[t],this.sections[t]=i,console.log(this.sections)}dragStart(e){e.dataTransfer.setData("text/plain",e.target.id),setTimeout(()=>{let t=r(e.target,".drop-target");t?t.children[0].classList.add("hidden"):alert("not found")},0)}dragEnter(e){e.preventDefault();let t=r(e.target,".drop-target");t&&t.classList.add("drag-over")}dragOver(e){e.preventDefault();let t=r(e.target,".drop-target");t&&t.classList.add("drag-over")}dragLeave(e){let t=r(e.target,".drop-target");t&&t.classList.remove("drag-over")}dragEnd(e){let t=r(e.target,".drop-target");t&&t.children[0].classList.remove("hidden")}drop(e){e.target.classList.remove("drag-over");const t=e.dataTransfer.getData("text/plain");let i=document.getElementById(t),n=r(e.target,".drop-target");if(i&&i.classList.remove("hidden"),n.classList.remove("drag-over"),i.classList.remove("drag-over"),n){let e=this.getIndexFromSectionId(n.children[0].id),t=this.getIndexFromSectionId(i.id);e!=t&&(this.swapSections(e,t),l=n.children[0],s=i,o=l.parentNode,d=s.parentNode,a=document.createElement("div"),c=document.createElement("div"),o.replaceChild(a,l),d.replaceChild(c,s),o.replaceChild(s,a),d.replaceChild(l,c))}else alert("not parent found");var l,s,o,d,a,c}build(){if(this.clear(),this.sections.forEach(e=>{if(e.build(this.mainNode),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+e.id});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',e.contentWrapper.appendChild(t),t.onclick=t=>{this.mainNode.removeChild(e.node),this.sections=this.sections.filter((function(t){return t.id!=e.id}))}}e.contentWrapper.ondragstart=e=>{this.dragStart(e)}}),document.querySelectorAll(".pixium-box").forEach(e=>{e.addEventListener("dragenter",this.dragEnter),e.addEventListener("dragover",this.dragOver),e.addEventListener("dragleave",this.dragLeave),e.addEventListener("dragend",this.dragEnd),e.addEventListener("drop",e=>this.drop(e))}),!this.singleSection){let t=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});t.innerText="+",t.onclick=t=>{let i=t.target,s=new n.Section(this.mainNode,null,e=>this.moveSection(e));this.sections.push(s),this.mainNode.removeChild(i),this.debug&&this.mainNode.removeChild(e),s.build(this.mainNode);let o=l.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button",id:"btn-delete-section-"+s.id});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.mainNode.removeChild(s.node),this.sections=this.sections.filter((function(e){return e.id!=s.id}))},s.contentWrapper.appendChild(o),this.mainNode.appendChild(i),this.debug&&this.mainNode.appendChild(e)},this.mainNode.appendChild(t)}let e=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});e.innerText="GO TO RUN",e.onclick=()=>{this.run()},this.debug&&this.mainNode.appendChild(e)}run(){this.clear(),this.sections.forEach(e=>{e.run(this.mainNode)}),this.saveBtn=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"submit",id:"form-builder-save-final-btn"}),this.saveBtn.innerText="Save",this.saveBtn.onclick=e=>{this.sections[this.currentNode].isCompleted()?this.compileJson():(e.preventDefault(),alert("Please complete the form"))},this.currentNode!=this.sections.length-1||this.singleSection||(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)),this.singleSection&&this.sections[this.currentNode].node.appendChild(this.saveBtn);let e=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button",id:"form-builder-save-btn"});e.innerText="SAVE",e.onclick=()=>{this.compileJson()},this.debug&&this.mainNode.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-primary form-builder-btn",type:"button"});t.innerText="GO TO BUILD MODE",t.onclick=()=>{this.build()},this.debug&&this.mainNode.appendChild(t),this.display()}result(){}clear(){this.mainNode&&(this.mainNode.innerHTML="",this.sections.forEach(e=>{e.clear()}),this.currentNode=0)}display(){this.currentNode>=0&&this.currentNode<this.sections.length&&this.sections[this.currentNode].show()}compileJson(){let e;e=[],this.sections.forEach(t=>{e.push(t.compileJson())});let t=JSON.stringify({sections:e});return console.log("finalOutput"),console.log(t),t}moveSection(e){e?this.currentNode>=0&&this.currentNode<this.sections.length-1?(this.sections[this.currentNode].hide(),this.currentNode++,this.sections[this.currentNode].show(),document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="inline-block",this.currentNode==this.sections.length-1?(document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="none",document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).after(this.saveBtn)):document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block"):alert("You already are on the next slide"):this.currentNode>=1&&this.currentNode<this.sections.length?(this.sections[this.currentNode].hide(),this.currentNode--,this.sections[this.currentNode].show(),document.getElementById("btn-next-section-"+this.sections[this.currentNode].id).style.display="inline-block",0==this.currentNode&&(document.getElementById("btn-previous-section-"+this.sections[this.currentNode].id).style.display="none")):alert("You already are on the first slide")}}},
/*!********************************!*\
  !*** ./src/section.ts-exposed ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./section.ts */5)}).call(this,i(/*! ./../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/section.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Section=void 0;const n=i(/*! ./block/block */6),l=i(/*! ./builder */1);t.Section=class{constructor(e,t,i){this.parent=e,this.blocks=[],this.callback=i,this.title="",this.id=Math.random().toString(36).substring(7),t&&(t.title&&(this.title=t.title),t.blocks&&t.blocks.forEach(e=>{let t=new n.Block(e);this.blocks.push(t)}))}build(e){this.contentWrapper=l.Builder.createElement("div",{class:"pixium-box-content",draggable:!0,id:this.id}),this.node=l.Builder.createElement("div",{class:"row pixium-box drop-target",id:"holder-"+this.id});let t=l.Builder.createElement("div",{class:"row pixium-block-build pixium-block-build-header"});l.Builder.addBuilderInputText(t,this.id,this.title,"Title Section",e=>{this.title=e},"col-md-12"),this.contentWrapper.appendChild(t),this.blocks.forEach(e=>{let t=l.Builder.createElement("button",{class:"form-builder-btn button-delete",type:"button",style:"display:block"});t.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',e.build(this.contentWrapper,t),t.onclick=t=>{this.contentWrapper.removeChild(e.node),this.blocks=this.blocks.filter((function(t){return t.id!=e.id}))}});let i=l.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});i.innerHTML="+",i.onclick=e=>{let t,i=e.target,s=new n.Block(null);this.blocks.push(s),this.contentWrapper.removeChild(i),this.callback&&(t=document.getElementById("btn-delete-section-"+this.id),this.contentWrapper.removeChild(t)),s.build(this.contentWrapper,!1,"");let o=l.Builder.createElement("button",{class:"form-builder-btn button-delete float-right",type:"button",style:"display:block"});o.innerHTML='<i class="fa fa-trash" aria-hidden="true"></i>',o.onclick=e=>{this.contentWrapper.removeChild(s.node),this.blocks=this.blocks.filter((function(e){return e.id!=s.id}))},s.header.insertBefore(o,s.header.firstChild),this.contentWrapper.appendChild(i),this.callback&&this.contentWrapper.appendChild(t)},this.contentWrapper.appendChild(i),this.node.appendChild(this.contentWrapper),e.appendChild(this.node)}run(e){this.node=l.Builder.createElement("div",{class:"row pixium-box"});let t=document.createElement("h1");t.innerHTML=this.title;let i=document.createElement("hr");if(this.node.appendChild(t),this.node.appendChild(i),this.blocks.forEach(e=>{e.run(this.node)}),console.log("node.singleSection"),console.log(this.callback),this.callback){let e=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-previous-section-"+this.id,type:"button"});e.innerText="Previous",e.style.display="none",e.onclick=()=>{this.callback&&this.callback(!1)},this.node.appendChild(e);let t=l.Builder.createElement("button",{class:"btn btn-info form-builder-btn",id:"btn-next-section-"+this.id,type:"button"});t.innerText="Next",t.onclick=()=>{this.isCompleted()?this.callback&&this.callback(!0):alert("Please complete the form...")},this.node.appendChild(t)}this.node.style.display="none",e.appendChild(this.node)}clear(){this.node&&(this.node.innerHTML=""),this.blocks.forEach(e=>{e.clear()})}getNode(){return alert(this.node),this.node}show(){this.node.style.display="block"}hide(){this.node.style.display="none"}isCompleted(){let e=!0;return this.blocks.forEach(t=>{console.log(t.answer),t&&0==t.answer.length&&t.type!==n.BlockType.NOANSWER&&(e=!1)}),e}compileJson(){let e;return e=[],this.blocks.forEach(t=>{e.push(t.compileJson())}),{title:this.title,blocks:e}}}},
/*!************************************!*\
  !*** ./src/block/block.ts-exposed ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./block.ts */7)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*****************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/block.ts ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=t.BlockType=void 0;const n=i(/*! ../builder */1),l=i(/*! ./choice */9),s=i(/*! ./blockSlider */11),o=i(/*! ./blockFreetext */13),r=i(/*! ./blockRadio */15),d=i(/*! ./blockCheckbox */17),a=i(/*! ./blockLongtext */19),c=i(/*! ./BlockTags */21);var u;!function(e){e[e.FREETEXT=1]="FREETEXT",e[e.RADIO=2]="RADIO",e[e.SLIDER=3]="SLIDER",e[e.CHECKBOX=4]="CHECKBOX",e[e.LONGTEXT=5]="LONGTEXT",e[e.NOANSWER=6]="NOANSWER",e[e.TAGS=7]="TAGS"}(u=t.BlockType||(t.BlockType={}));t.Block=class{constructor(e=null){this.json=e,this.text="",this.type=1,this.min="",this.max="",this.step="",this.answer="",this.choices=[],this.id=Math.random().toString(36).substring(7),e&&(e.text&&(this.text=e.text),e.type&&(this.type=e.type),this.answer="",e.answer&&(this.answer=e.answer),e.min&&(this.min=e.min),e.max&&(this.max=e.max),e.step&&(this.step=e.step),this.type!==u.RADIO&&this.type!==u.CHECKBOX||e.choices&&e.choices.forEach(e=>{let t=new l.Choice(e);this.choices.push(t)}))}clear(){this.node&&(this.node.innerHTML="")}build(e,t=null,i="collapse"){this.node=n.Builder.createElement("div",{class:"row pixium-block-build"});let s=n.Builder.createElement("div",{class:"col-md-12 "+i});this.header=n.Builder.addBoxHeader(this.node,this.id,s,t),n.Builder.addBuilderInputText(this.header,this.id,this.text,"Text",e=>{this.text=e},"col-md-6"),this.node.appendChild(s);let o=Object.keys(u).filter(e=>e.match(/^\D/)).map(e=>({name:e,value:u[e]}));n.Builder.addBuilderInputDropdown(s,this.id,this.type,"Type",e=>{this.type=Number(e),this.answer="",this.triggerSubElementBlock()},o,"col-md-4");let r="";this.type!==u.RADIO&&this.type!==u.CHECKBOX&&(r="display:none;");let d=n.Builder.createElement("div",{id:"choices_block_"+this.id,class:"col-md-12 custom_block_type",style:r}),a=n.Builder.createElement("label");a.innerHTML="Choices : ",d.appendChild(a),this.choices.length>0&&this.choices.forEach(e=>{e.build(d);let t=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});t.innerText="-",t.onclick=t=>{d.removeChild(e.node),this.choices=this.choices.filter((function(t){return t.id!=e.id}))},e.node.appendChild(t)});let c=n.Builder.createElement("button",{class:"btn btn-success form-builder-btn",type:"button"});c.innerText="+",c.onclick=e=>{let t=e.target,i=new l.Choice(null);this.choices.push(i),d.removeChild(t),i.build(d);let s=n.Builder.createElement("button",{class:"btn btn-danger form-builder-btn",type:"button"});s.innerText="-",s.onclick=e=>{d.removeChild(i.node),this.choices=this.choices.filter((function(e){return e.id!=i.id}))},i.node.appendChild(s),d.appendChild(t)},d.appendChild(c),s.appendChild(d);let h="";this.type!==u.SLIDER&&(h="display:none;");let p=n.Builder.createElement("div",{id:"slider_block_"+this.id,class:"col-md-12 custom_block_type",style:h});n.Builder.addBuilderInputText(p,this.id,this.min,"Min",e=>{this.min=e},"col-md-4"),n.Builder.addBuilderInputText(p,this.id,this.max,"Max",e=>{this.max=e},"col-md-4"),n.Builder.addBuilderInputText(p,this.id,this.step,"Step",e=>{this.step=e},"col-md-4"),s.appendChild(p),e.appendChild(this.node)}run(e){let t=n.Builder.createElement("p");switch(t.innerHTML=this.text,this.node=n.Builder.createElement("div"),this.node.appendChild(t),this.type){case u.RADIO:r.BlockRadio.run(this.node,this);break;case u.CHECKBOX:d.BlockCheckbox.run(this.node,this);break;case u.FREETEXT:o.BlockFreetext.run(this.node,this);break;case u.LONGTEXT:a.BlockLongtext.run(this.node,this);break;case u.NOANSWER:break;case u.SLIDER:s.BlockSlider.run(this.node,this);break;case u.TAGS:c.BlockTags.run(this.node,this)}let i=n.Builder.createElement("hr",{class:"pixium-hr"});this.node.appendChild(i),e.appendChild(this.node)}display(){}triggerSubElementBlock(){let e=null;(e=document.getElementById("slider_block_"+this.id))?this.type===u.SLIDER?e.style.display="block":e.style.display="none":alert("Node Silder not found");let t=null;(t=document.getElementById("choices_block_"+this.id))?this.type===u.RADIO||this.type===u.CHECKBOX?t.style.display="block":t.style.display="none":alert("Node Choice not found")}compileJson(){let e;return e=[],this.choices.forEach(t=>{e.push(t.compileJson())}),this.json={type:this.type,text:this.text,answer:this.answer,min:this.min,max:this.max,step:this.step,choices:e},this.json}}},
/*!*************************************************!*\
  !*** ./node_modules/ts-loader!./src/builder.ts ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;class n{static createElement(e,t=null){if(!e)return void alert("Could not build the element");let i=document.createElement(e);if(t)for(var n in t){var l=t[n];i.setAttribute(n,l)}return i}static setAttributes(e,t=null){if(t)for(var i in t){var n=t[i];e.setAttribute(i,n)}}static addBuilderInputText(e,t,i,l,s,o="col-md-12"){let r=n.createElement("div",{class:"pixium-row-block "+o}),d=n.createElement("input",{class:"pixium-textbox",type:"text",value:i,name:l+"_"+t,placeholder:l});d.onblur=e=>{console.log(e.target),s(e.target.value)},r.appendChild(d),e.appendChild(r)}static addBoxHeader(e,t,i,l){let s=n.createElement("div",{class:"col-md-12 block-header block-header-"+t});l&&(l.className+=" float-right",s.appendChild(l));let o=n.createElement("i",{class:"fa fa-caret-left float-right","aria-hidden":"true"});s.appendChild(o);let r=n.createElement("i",{class:"fa fa-caret-down float-right hidden","aria-hidden":"true"});return s.appendChild(r),o.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},r.onclick=e=>{i.classList.toggle("collapse"),o.classList.toggle("hidden"),r.classList.toggle("hidden")},e.appendChild(s),s}static addBuilderInputDropdown(e,t,i,l,s,o,r="col-md-12"){let d=n.createElement("div",{class:"pixium-row-block "+r}),a=n.createElement("label");a.innerHTML=l+": ";let c=n.createElement("select",{class:"pixium-dropdown",value:i,name:l+"_"+t,style:"display:block"});c.onchange=e=>{s(e.target.value)},o.forEach(e=>{let t=n.createElement("option",{value:e.value});i===e.value&&n.setAttributes(t,{selected:"selected"}),t.innerHTML=e.name,c.appendChild(t)}),d.appendChild(a),d.appendChild(c),e.appendChild(d)}}t.Builder=n},
/*!*************************************!*\
  !*** ./src/block/choice.ts-exposed ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./choice.ts */10)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!******************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/choice.ts ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Choice=void 0;const n=i(/*! ../builder */1);t.Choice=class{constructor(e){this.id=Math.random().toString(36).substring(7),e&&(e.label&&(this.label=e.label),e.value&&(this.value=e.value))}build(e){this.node=n.Builder.createElement("div",{class:"pixium-row-block block-choices col-md-12"});let t=n.Builder.createElement("label",{for:"input_"+this.value+"_"+this.id});t.innerHTML="Value : ";let i=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.value?this.value:"",placeholder:"Value",id:"input_"+this.value+"_"+this.id});i.onblur=e=>{console.log(e.target),this.value=e.target.value};let l=n.Builder.createElement("label",{for:"input_"+this.label+"_"+this.id,style:"min-width: auto;"});l.innerHTML="Label : ";let s=n.Builder.createElement("input",{class:"pixium-textbox",type:"text",value:this.label?this.label:"",placeholder:"Label",id:"input_"+this.label+"_"+this.id});s.onblur=e=>{console.log(e.target),this.label=e.target.value},this.node.appendChild(t),this.node.appendChild(i),this.node.appendChild(l),this.node.appendChild(s),e.appendChild(this.node)}compileJson(){return this.json={label:this.label,value:this.value},this.json}}},
/*!******************************************!*\
  !*** ./src/block/blockSlider.ts-exposed ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockSlider.ts */12)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!***********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockSlider.ts ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSlider=void 0;const n=i(/*! ../builder */1);t.BlockSlider=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=n.Builder.createElement("input"),s=n.Builder.createElement("span",{class:"_left"});s.innerHTML=t.min?t.min:"0";let o=n.Builder.createElement("span",{class:"_right"});o.innerHTML=t.max?t.max:"100",n.Builder.setAttributes(l,{class:"pixium-slider",type:"range",value:t.answer?t.answer:t.max?Number(t.max)/2:50,min:t.min?t.min:0,max:t.max?t.max:100,id:"inputrange_"+t.id}),t.step&&l.setAttribute("step",t.step),l.onchange=()=>{t.answer=parseFloat(l.value),console.log(t.answer),document.getElementById("output_"+t.id).innerHTML=t.answer};let r=n.Builder.createElement("div");r.setAttribute("class","pixium-block-slider");let d=n.Builder.createElement("output",{id:"output_"+t.id});d.innerHTML=t.answer?t.answer:t.max?Number(t.max)/2:50,t.answer=d.innerHTML,r.appendChild(d),r.appendChild(l),r.appendChild(s),r.appendChild(o),i.appendChild(r),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockFreetext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockFreetext.ts */14)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockFreetext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFreetext=void 0;const n=i(/*! ../builder */1);t.BlockFreetext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=n.Builder.createElement("input");n.Builder.setAttributes(l,{class:"pixium-textbox",type:"text",value:t.answer,id:"inputfreetext_"+t.id}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!*****************************************!*\
  !*** ./src/block/blockRadio.ts-exposed ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockRadio.ts */16)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!**********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockRadio.ts ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockRadio=void 0;const n=i(/*! ../builder */1);t.BlockRadio=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"radio",id:"inputradio_"+t.id,value:e.value+""}),s=n.Builder.createElement("label");s.innerHTML=e.label;let o=n.Builder.createElement("div");o.appendChild(l),o.appendChild(s),i.appendChild(o),l.onclick=e=>{console.log(e.target),t.answer=e.target.value,console.log(t.answer)}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockCheckbox.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockCheckbox.ts */18)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockCheckbox.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCheckbox=void 0;const n=i(/*! ../builder */1);t.BlockCheckbox=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container"),t.choices.forEach(e=>{let l=n.Builder.createElement("input",{type:"checkbox",name:t.id,value:e.value+"",id:e.value+""});for(var s=0;s<t.answer.length;s++)e.value+""===t.answer[s]&&n.Builder.setAttributes(l,{checked:!0});let o=n.Builder.createElement("label");o.innerHTML=e.label;let r=n.Builder.createElement("div");r.appendChild(l),r.appendChild(o),i.appendChild(r),l.onclick=e=>{let i=document.querySelectorAll('input[type=checkbox][name="'+t.id+'"]:checked'),n=[];i.forEach(e=>{n.push(e.value)}),t.answer=n}}),e.appendChild(i)}}},
/*!********************************************!*\
  !*** ./src/block/blockLongtext.ts-exposed ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./blockLongtext.ts */20)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*************************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/blockLongtext.ts ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockLongtext=void 0;const n=i(/*! ../builder */1);t.BlockLongtext=class{static run(e,t){let i=document.createElement("div");i.setAttribute("class","element-form-container");let l=document.createElement("textarea");n.Builder.setAttributes(l,{class:"pixium-textbox",rows:5,value:t.answer,id:"inputlongtext_"+t.id}),l.onblur=()=>{t.answer=l.value,console.log(t.answer)},i.appendChild(l),e.appendChild(i)}}},
/*!****************************************!*\
  !*** ./src/block/BlockTags.ts-exposed ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){(function(t){e.exports=t.Library=i(/*! -!./node_modules/ts-loader!./BlockTags.ts */22)}).call(this,i(/*! ./../../node_modules/webpack/buildin/global.js */0))},
/*!*********************************************************!*\
  !*** ./node_modules/ts-loader!./src/block/BlockTags.ts ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTags=void 0;const n=i(/*! ../builder */1);class l{static run(e,t){0==t.answer.length&&(t.answer=[]);let i=document.createElement("div");i.setAttribute("class","element-form-container"),i.setAttribute("style","display:flex");let s=document.createElement("div");i.setAttribute("class","tags"),t.answer&&t.answer.forEach(e=>{if(e&&e.length>0){let i=document.createElement("span");i.setAttribute("id","tag-"+t.id+"-"+e),i.innerHTML=e;let l=n.Builder.createElement("button",{class:"btn btn-danger",type:"button"});l.innerText="-",l.onclick=e=>{s.removeChild(i),t.answer=t.answer.filter((function(e){return e+l.outerHTML!=i.innerHTML}))},i.appendChild(l),s.appendChild(i)}});let o=n.Builder.createElement("input",{class:"fff"});o.addEventListener("keypress",(function(e){l.processNewKeyword(e,o,t,s)})),o.onblur=()=>{l.processNewKeyword(event,o,t,s,!0)},i.appendChild(s),i.appendChild(o),e.appendChild(i)}static processNewKeyword(e,t,i,l,s=!1){if(s||"Enter"===e.key||","===e.key||188==e.keyCode){e.preventDefault();let s=t.value.trim();if(console.log(s),s&&s.length>0){t.value=null,i.answer.push(s);let e=document.createElement("span");e.innerHTML=s;let o=n.Builder.createElement("button",{class:"btn",type:"button"});o.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>',o.onclick=t=>{l.removeChild(e),i.answer=i.answer.filter((function(t){return t+o.outerHTML!=e.innerHTML}))},e.appendChild(o),l.appendChild(e)}}}}t.BlockTags=l},
/*!***********************!*\
  !*** ./src/data.json ***!
  \***********************/
/*! exports provided: sections, default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e){e.exports=JSON.parse('{"sections":[{"title":"Section 1","blocks":[{"text":"BLABLA: <br> <br> How BLALBAty to delegate?","name":"q3","type":7},{"text":"Test Ludo?","name":"q3bis","type":3,"min":"1","max":"10","step":"1","label":"Delegation"}]},{"title":"Block Test Checkbox","blocks":[{"type":2,"name":"q2","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"Extraverted"},{"value":2,"label":"Introverted"}]},{"type":4,"name":"q22","text":"How do you feel about meeting new people?","choices":[{"value":1,"label":"I love meeting new people!"},{"value":2,"label":"Sometimes I like to meet new people, if I\'m in the right mood."}]}]},{"name":"block 1","blocks":[{"text":"DDDDELEGATION: <br> <br> How skilled do you feel today about your ability to delegate?","name":"q1","type":1,"group":1,"label":"Delegation"},{"text":"TEST: <br> <br> How sity to delegate?","name":"q2","type":1,"group":1,"label":"Delegation"}]}]}')}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVpbGRlci50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlY3Rpb24udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvc2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Nob2ljZS50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9jaG9pY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrU2xpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0ZyZWV0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrRnJlZXRleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrUmFkaW8udHMtZXhwb3NlZCIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tSYWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmxvY2svYmxvY2tDaGVja2JveC50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0NoZWNrYm94LnRzIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9ja0xvbmd0ZXh0LnRzLWV4cG9zZWQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL2Jsb2NrTG9uZ3RleHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jsb2NrL0Jsb2NrVGFncy50cy1leHBvc2VkIiwid2VicGFjazovLy8uL3NyYy9ibG9jay9CbG9ja1RhZ3MudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImRhdGEiLCJjb2xsZWN0aW9uSGFzIiwiYSIsImIiLCJsZW4iLCJsZW5ndGgiLCJmaW5kUGFyZW50QnlTZWxlY3RvciIsImVsbSIsInNlbGVjdG9yIiwiYWxsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VyIiwicGFyZW50Tm9kZSIsInBhcmFtcyIsInNlY3Rpb25zIiwiY3VycmVudE5vZGUiLCJkaXYiLCJtYWluTm9kZSIsImdldEVsZW1lbnRCeUlkIiwiY29uc29sZSIsImxvZyIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJzaW5nbGVTZWN0aW9uIiwiZm9yRWFjaCIsInNlYyIsInNlY3Rpb25Nb2RlbCIsIlNlY3Rpb24iLCJuZXh0U2xpZGUiLCJtb3ZlU2VjdGlvbiIsInB1c2giLCJhbGVydCIsImRlYnVnIiwiYnVpbGQiLCJydW4iLCJfaWQiLCJpZCIsInMxX2lkIiwiczJfaWQiLCJ0ZW1wIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsInRhcmdldCIsInNldFRpbWVvdXQiLCJ0aGVfcGFyZW50IiwiY2hpbGRyZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZSIsImdldERhdGEiLCJkcmFnZ2FibGUiLCJpZDEiLCJnZXRJbmRleEZyb21TZWN0aW9uSWQiLCJpZDIiLCJzd2FwU2VjdGlvbnMiLCJhUGFyZW50IiwiYlBhcmVudCIsImFIb2xkZXIiLCJjcmVhdGVFbGVtZW50IiwiYkhvbGRlciIsInJlcGxhY2VDaGlsZCIsImNsZWFyIiwiZGVsQnRuIiwiQnVpbGRlciIsImlubmVySFRNTCIsImNvbnRlbnRXcmFwcGVyIiwiYXBwZW5kQ2hpbGQiLCJvbmNsaWNrIiwiZXYiLCJyZW1vdmVDaGlsZCIsIm5vZGUiLCJmaWx0ZXIiLCJlbCIsIm9uZHJhZ3N0YXJ0IiwiZHJhZ1N0YXJ0IiwiYm94IiwiYWRkRXZlbnRMaXN0ZW5lciIsImRyYWdFbnRlciIsImRyYWdPdmVyIiwiZHJhZ0xlYXZlIiwiZHJhZ0VuZCIsImRyb3AiLCJhZGRCdXR0b24iLCJpbm5lclRleHQiLCJidG5TZWNBZGQiLCJzd2l0Y2hCdXR0b24iLCJidG5TZWNEZWwiLCJzYXZlQnRuIiwiaXNDb21wbGV0ZWQiLCJjb21waWxlSnNvbiIsInN0eWxlIiwiZGlzcGxheSIsImFmdGVyIiwic2F2ZUJ1dHRvbiIsInNob3ciLCJhcnIiLCJmaW5hbE91dHB1dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJoaWRlIiwiX3BhcmVudCIsIl9qc29uIiwiX2NhbGxiYWNrIiwicGFyZW50IiwiYmxvY2tzIiwiY2FsbGJhY2siLCJ0aXRsZSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImJsb2NrTW9kZWwiLCJCbG9jayIsIl9ub2RlIiwibm9kZUhlYWRlciIsImFkZEJ1aWxkZXJJbnB1dFRleHQiLCJ2YWwiLCJibGsiLCJidG5CbGtBZGQiLCJidG5CbGtEZWwiLCJoZWFkZXIiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwibmFtZU5vZGUiLCJock5hbWUiLCJwcmV2QnV0dG9uIiwibmV4dEJ1dHRvbiIsImFuc3dlciIsInR5cGUiLCJCbG9ja1R5cGUiLCJOT0FOU1dFUiIsInRleHQiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY2hvaWNlcyIsIlJBRElPIiwiQ0hFQ0tCT1giLCJjaG9pY2VKc29uIiwiY2hvaWNlIiwiQ2hvaWNlIiwiY2xhc3NlcyIsIm5vZGVDb250ZW50IiwiYWRkQm94SGVhZGVyIiwiZW51bUFycmF5Iiwia2V5cyIsIm1hdGNoIiwibWFwIiwiYWRkQnVpbGRlcklucHV0RHJvcGRvd24iLCJOdW1iZXIiLCJ0cmlnZ2VyU3ViRWxlbWVudEJsb2NrIiwiYmxrQ2hvaWNlc1N0eWxlIiwibm9kZUNob2ljZXMiLCJsYWJUaXRsZSIsImNoIiwiYWRkQ2hvaWNlQnV0dG9uIiwiYnRuQ2hBZGQiLCJidG5DaERlbCIsImJsa1NsaWRlclN0eWxlIiwiU0xJREVSIiwibm9kZVNsaWRlciIsInRpdGxlTm9kZSIsIkJsb2NrUmFkaW8iLCJCbG9ja0NoZWNrYm94IiwiRlJFRVRFWFQiLCJCbG9ja0ZyZWV0ZXh0IiwiTE9OR1RFWFQiLCJCbG9ja0xvbmd0ZXh0IiwiQmxvY2tTbGlkZXIiLCJUQUdTIiwiQmxvY2tUYWdzIiwiaHIiLCJzbGlkZXJCbG9jayIsImNob2ljZUJsb2NrIiwiX3BhcmFtcyIsImVsZW0iLCJsYWJlbCIsImlucHV0Iiwib25ibHVyIiwic3ViRWxlbWVudCIsImNsYXNzTmFtZSIsImV5ZTEiLCJleWUyIiwidG9nZ2xlIiwib3B0aW9ucyIsImxhYiIsIm9uY2hhbmdlIiwiZWxlbWVudCIsIm9wdCIsInNldEF0dHJpYnV0ZXMiLCJsYWJWYWx1ZSIsImlucHV0VmFsdWUiLCJsYWJMYWJlbCIsImlucHV0TGFiZWwiLCJibG9jayIsImhvbGRlciIsImZpZWxkIiwicGFyc2VGbG9hdCIsImlucHV0RGl2Iiwib3V0cHV0IiwiZiIsIl9kaXYiLCJjaGVja2VkQm94ZXMiLCJpZHMiLCJ0YWdzIiwidGFnIiwib3V0ZXJIVE1MIiwiZXZlbnQiLCJwcm9jZXNzTmV3S2V5d29yZCIsImZv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WXRGLEVBRWhCLElBQUlvRixFQUFTLEVBQUFDLFFBQVFMLGNBQWMsU0FBVSxDQUFDLE1BQVEsTUFBTyxLQUFPLFdBQ3BFSSxFQUFPRSxVQUFZLGlEQUNuQkYsRUFBT0ssUUFBV0MsSUFDZHdJLEVBQUt2SSxZQUFZd0ksR0FDakJYLEVBQU1uRSxPQUFTbUUsRUFBTW5FLE9BQU94RCxRQUFPLFNBQVNDLEdBQU0sT0FBT0EsRUFBR1YsRUFBT2dKLFdBQWFELEVBQUk3SSxjQUV4RjZJLEVBQUkzSSxZQUFZSixHQUNoQjhJLEVBQUsxSSxZQUFZMkksTUE1RmpDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiLi9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2J1aWxkZXIudHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9tYWluLnRzXCIpOyIsIlxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuL3NlY3Rpb24nO1xuaW1wb3J0IHtCdWlsZGVyfSBmcm9tICcuL2J1aWxkZXInO1xuLy8gaW1wb3J0ICogYXMgZGF0YSBmcm9tICcuL2RhdGEuanNvbic7XG4vLyBpbXBvcnQgQ2hhcnQgZnJvbSAnY2hhcnRqcyc7XG4vLyBpbXBvcnQgZm9udGF3ZXNvbWUgZnJvbSAnQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWUnO1xuXG5jb25zdCBkYXRhID0gcmVxdWlyZSgnLi9kYXRhLmpzb24nKTtcbi8vIGNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb25IYXMoYSwgYikgeyAvL2hlbHBlciBmdW5jdGlvbiAoc2VlIGJlbG93KVxuICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGEubGVuZ3RoOyBpIDwgbGVuOyBpICsrKSB7XG4gICAgICAgIGlmKGFbaV0gPT0gYikgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGZpbmRQYXJlbnRCeVNlbGVjdG9yKGVsbSwgc2VsZWN0b3IpIHtcbiAgICB2YXIgYWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgdmFyIGN1ciA9IGVsbS5wYXJlbnROb2RlO1xuICAgIHdoaWxlKGN1ciAmJiAhY29sbGVjdGlvbkhhcyhhbGwsIGN1cikpIHsgLy9rZWVwIGdvaW5nIHVwIHVudGlsIHlvdSBmaW5kIGEgbWF0Y2hcbiAgICAgICAgY3VyID0gY3VyLnBhcmVudE5vZGU7IC8vZ28gdXBcbiAgICB9XG4gICAgcmV0dXJuIGN1cjsgLy93aWxsIHJldHVybiBudWxsIGlmIG5vdCBmb3VuZFxufVxuZnVuY3Rpb24gc3dhcERvbShhLGIpIFxuICAgIHtcbiAgICAgICAgdmFyIGFQYXJlbnQgPSBhLnBhcmVudE5vZGU7XG4gICAgICAgIHZhciBiUGFyZW50ID0gYi5wYXJlbnROb2RlO1xuXG4gICAgICAgIHZhciBhSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIGJIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgIGFQYXJlbnQucmVwbGFjZUNoaWxkKGFIb2xkZXIsYSk7XG4gICAgICAgIGJQYXJlbnQucmVwbGFjZUNoaWxkKGJIb2xkZXIsYik7XG5cbiAgICAgICAgYVBhcmVudC5yZXBsYWNlQ2hpbGQoYixhSG9sZGVyKTtcbiAgICAgICAgYlBhcmVudC5yZXBsYWNlQ2hpbGQoYSxiSG9sZGVyKTsgICAgXG4gICAgfVxuXG5cblxuXG5leHBvcnQgY2xhc3MgUGl4aXVtRm9ybSB7XG4gICAganNvbjpGb3JtRGF0YTtcbiAgICBkaXY6c3RyaW5nO1xuICAgIHNlY3Rpb25zOlNlY3Rpb25bXTtcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgICBtYWluTm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgdGl0bGVOb2RlOiBIVE1MRWxlbWVudDtcbiAgICBjdXJyZW50Tm9kZTogbnVtYmVyO1xuICAgIG1vZGU6c3RyaW5nO1xuICAgIGRlYnVnOmJvb2xlYW47XG4gICAgc2luZ2xlU2VjdGlvbjpib29sZWFuO1xuICAgIHNhdmVCdG46IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IocGFyYW1zOkZvcm1EYXRhKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG5cbiAgICAgICAgaWYoIXBhcmFtc1tcImRpdlwiXSl7XG4gICAgICAgICAgICBhbGVydCgnRGl2IG5vdCBmb3VuZC4gQ2Fubm90IGRpc3BsYXkgdGhlIGZvcm0nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpdiA9IHBhcmFtc1tcImRpdlwiXTtcbiAgICAgICAgdGhpcy5tYWluTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGl2KTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5tYWluTm9kZSk7XG4gICAgICAgIHRoaXMubWFpbk5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb250YWluZXIgZm9ybS1jb250YWluZXIgZHJvcC10YXJnZXRzXCIpO1xuXG4gICAgICAgIGlmKHBhcmFtc1tcImRhdGFcIl0pe1xuICAgICAgICAgICAgdGhpcy5qc29uID0gcGFyYW1zW1wiZGF0YVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuanNvbiA9IGRhdGE7Ly9KU09OLnBhcnNlKCBkYXRhICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIE9OTFkgQUxMT1cgT05FIFNFQ1RJT04gRk9STVxuICAgICAgICBpZihwYXJhbXNbXCJzaW5nbGVTZWN0aW9uXCJdKXtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlU2VjdGlvbiA9IHBhcmFtc1tcInNpbmdsZVNlY3Rpb25cIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZVNlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLyBCVUlMRCB0aGUgc2VjdGlvbiBzdWIgZWxlbWVudCAobm8gZ2VuZXJhdGVkIEhUTUwgYXQgdGhpcyBzdGFnZSB5ZXQpXG4gICAgICAgIGlmKHRoaXMuanNvbiAmJiB0aGlzLmpzb25bXCJzZWN0aW9uc1wiXSl7XG4gICAgICAgICAgICBsZXQgc2VjcyA9IHRoaXMuanNvbltcInNlY3Rpb25zXCJdO1xuICAgICAgICAgICAgc2Vjcy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNlY3Rpb25Nb2RlbCA9IG5ldyBTZWN0aW9uKHRoaXMubWFpbk5vZGUsIHNlYywgKCghdGhpcy5zaW5nbGVTZWN0aW9uKSA/IChuZXh0U2xpZGU6Ym9vbGVhbikgPT50aGlzLm1vdmVTZWN0aW9uKG5leHRTbGlkZSkgOiBudWxsICkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWN0aW9uTW9kZWwpO1xuXG4gICAgICAgICAgICAgICAgLy8gbGV0IGl0ZW0gPSBzZWN0aW9uTW9kZWwubm9kZTtcbiAgICAgICAgICAgICAgICAvLyBpdGVtLm9uZHJhZ3N0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5kcmFnU3RhcnQoZSk7XG4gICAgICAgICAgICAgICAgLy8gfTtcbiAgICAgICAgICAgICAgICAvL2l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnQpO1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBpbml0IHRoZSBtb2R1bGUuXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5qc29uKTtcbiAgICAgICAgfSAgICAgXG4gICAgICAgIFxuICAgICAgICBcblxuICAgICAgICAvLyAgLS0tLS0tLS0tLS0tICAgIFNUQVJUIFRIRSBBUFBMSUNBVElPTiBJTiBkZWJ1Z1xuICAgICAgICAgaWYocGFyYW1zW1wiZGVidWdcIl0pe1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IHBhcmFtc1tcImRlYnVnXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyA9IGZhbHNlO1xuICAgICAgICB9ICAgICAgIFxuXG4gICAgICAgIC8vICAtLS0tLS0tLS0tLS0gICAgU1RBUlQgVEhFIEFQUExJQ0FUSU9OIElOIGJ1aWxkIE9SIHJ1biBNT0RFXG4gICAgICAgIGlmKHBhcmFtc1tcIm1vZGVcIl0pe1xuICAgICAgICAgICAgdGhpcy5tb2RlID0gcGFyYW1zW1wibW9kZVwiXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdydW4nO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMubW9kZSA9PT0gJ2J1aWxkJyl7XG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogR2V0IEluZGV4IGZyb20gSUQgXG4gICAgICovXG4gICAgZ2V0SW5kZXhGcm9tU2VjdGlvbklkKF9pZDpzdHJpbmcpe1xuICAgICAgICBmb3IobGV0IGk9MCA7IGk8dGhpcy5zZWN0aW9ucy5sZW5ndGggOyBpKyspe1xuICAgICAgICAgICAgaWYodGhpcy5zZWN0aW9uc1tpXS5pZCA9PSBfaWQpIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN3YXAgdG8gc2VjdGlvbiBlbGVtZW50IGZyb20gdGhlIHRhYmxlXG4gICAgICogQHBhcmFtIHMxIFxuICAgICAqIEBwYXJhbSBzMiBcbiAgICAgKi9cbiAgICBzd2FwU2VjdGlvbnMoczFfaWQ6bnVtYmVyLCBzMl9pZDpudW1iZXIpe1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25zKTtcbiAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnNlY3Rpb25zW3MxX2lkXTtcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzMV9pZF0gPSB0aGlzLnNlY3Rpb25zW3MyX2lkXTtcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzMl9pZF0gPSB0ZW1wO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25zKTtcbiAgICB9XG5cbiAgICBcblxuXG4gICAgLyoqXG4gICAgICogV2hlbiBhIGVsZW1lbnQgaXMgc2VsZWN0ZWQgdG8gYmUgZHJhZ2dlZFxuICAgICAqL1xuICAgIGRyYWdTdGFydChlKXtcbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGUudGFyZ2V0LmlkKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGxldCB0aGVfcGFyZW50ID0gZmluZFBhcmVudEJ5U2VsZWN0b3IoZS50YXJnZXQsIFwiLmRyb3AtdGFyZ2V0XCIpO1xuICAgICAgICAgICAgaWYodGhlX3BhcmVudCl7IFxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwYXJlbnQgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgdGhlX3BhcmVudC5jaGlsZHJlblswXS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwibm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICB9XG4gICAgZHJhZ0VudGVyKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgdGhlX3BhcmVudCA9IGZpbmRQYXJlbnRCeVNlbGVjdG9yKGUudGFyZ2V0LCBcIi5kcm9wLXRhcmdldFwiKTtcbiAgICAgICAgaWYodGhlX3BhcmVudCkge1xuICAgICAgICAgICAgdGhlX3BhcmVudC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkcmFnT3ZlcihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIGlmKHRoZV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZHJhZ0xlYXZlKGUpIHtcbiAgICAgICAgbGV0IHRoZV9wYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcihlLnRhcmdldCwgXCIuZHJvcC10YXJnZXRcIik7XG4gICAgICAgIGlmKHRoZV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG4gICAgICAgICAgICAvLyB0aGVfcGFyZW50LmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhZ0VuZChlKSB7XG4gICAgICAgIGxldCB0aGVfcGFyZW50ID0gZmluZFBhcmVudEJ5U2VsZWN0b3IoZS50YXJnZXQsIFwiLmRyb3AtdGFyZ2V0XCIpO1xuICAgICAgICBpZih0aGVfcGFyZW50KSB7XG4gICAgICAgICAgICB0aGVfcGFyZW50LmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFdoZW4gYW4gZWxlbWVudCBpcyBkcmFnZ2VkIG92ZXJcbiAgICAgKi9cbiAgICBkcm9wKGUpIHtcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBkcmFnZ2FibGUgZWxlbWVudFxuICAgICAgICBjb25zdCBpZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICAgICAgbGV0IGRyYWdnYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgICAgICBsZXQgdGhlX3BhcmVudCA9IGZpbmRQYXJlbnRCeVNlbGVjdG9yKGUudGFyZ2V0LCBcIi5kcm9wLXRhcmdldFwiKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGRyYWdnYWJsZSl7XG4gICAgICAgICAgICBkcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoZV9wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJyk7XG4gICAgICAgIGRyYWdnYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTtcblxuICAgICAgICBpZighdGhlX3BhcmVudCl7XG4gICAgICAgICAgICBhbGVydChcIm5vdCBwYXJlbnQgZm91bmRcIik7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbGV0IGlkMSA9IHRoaXMuZ2V0SW5kZXhGcm9tU2VjdGlvbklkKHRoZV9wYXJlbnQuY2hpbGRyZW5bMF0uaWQpO1xuICAgICAgICAgICAgbGV0IGlkMiA9IHRoaXMuZ2V0SW5kZXhGcm9tU2VjdGlvbklkKGRyYWdnYWJsZS5pZCk7XG4gICAgXG4gICAgICAgICAgICBpZihpZDEgIT0gaWQyKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN3YXBTZWN0aW9ucyhpZDEsIGlkMik7XG4gICAgICAgICAgICAgICAgc3dhcERvbSh0aGVfcGFyZW50LmNoaWxkcmVuWzBdLCBkcmFnZ2FibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBcblxuICAgICAgICAvLyBzd2l0Y2ggdGhlIDIgZWxlbWVudCBpbiB0aGUgU0VDVElPTiBMSVNUXG4gICAgICAgIC8vIHRoaXMuc2VjdGlvbnNcbiAgICBcbiAgICAgICAgLy8gbGV0IHRhcmdldEVsZW0gPSBlLnRhcmdldC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIC8vIGxldCBkZXN0RWxlbSA9IGRyYWdnYWJsZS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgLy8gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChkZXN0RWxlbSwgZS50YXJnZXQucGFyZW50Tm9kZSk7ICAvLyByZW1vdmUgY2hpbGRyZW5cbiAgICAgICAgLy8gZHJhZ2dhYmxlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGFyZ2V0RWxlbSwgZHJhZ2dhYmxlLnBhcmVudE5vZGUpO1xuICAgIFxuICAgICAgICAvLyAvLyBkaXNwbGF5IHRoZSBkcmFnZ2FibGUgZWxlbWVudFxuICAgICAgICAvLyBkcmFnZ2FibGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuXG5cbiAgICAvKipcbiAgICAgKiBFbnRlciBCVUlMRCBNT0RFIGZvciB1c2VyIHRvIGVkaXQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZCgpe1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjOlNlY3Rpb24pID0+IHtcbiAgICAgICAgICAgIHNlYy5idWlsZCh0aGlzLm1haW5Ob2RlKTtcbiAgICAgICAgICAgIGlmKCF0aGlzLnNpbmdsZVNlY3Rpb24pe1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBTRUNUSU9OIEJUTlxuICAgICAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIiwgXCJpZFwiOlwiYnRuLWRlbGV0ZS1zZWN0aW9uLVwiK3NlYy5pZH0pO1xuICAgICAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyAgXG5cbiAgICAgICAgICAgICAgICBzZWMuY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcblxuICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzZWMubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMgPSB0aGlzLnNlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gc2VjLmlkOyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGl0ZW0gPSBzZWMuY29udGVudFdyYXBwZXI7XG4gICAgICAgICAgICBpdGVtLm9uZHJhZ3N0YXJ0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGFydChlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gZ2V0IGFsbCB0aGUgRElWIHRhZ2dlcyBwaXhpdW0tYm94IGFuZCBjb25uZWN0IGxpc3RlbmVyIGZvciBkcmFnIC8gZHJvcCBldmVudHNcbiAgICAgICAgbGV0IGJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5waXhpdW0tYm94XCIpO1xuICAgICAgICBib3hlcy5mb3JFYWNoKGJveCA9PiB7XG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5kcmFnRW50ZXIpXG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmRyYWdPdmVyKTtcbiAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZSk7XG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZCk7XG4gICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB0aGlzLmRyb3AoZSkpO1xuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgaWYoIXRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvLyBCVUlMRCBBREQgU0VDVElPTiBCVE5cbiAgICAgICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5pbm5lclRleHQgPSAnKyc7ICBcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5vbmNsaWNrID0gKGV2KSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBsZXQgYnRuU2VjQWRkID0gPEhUTUxFbGVtZW50PmV2LnRhcmdldDtcbiAgICAgICAgICAgICAgICBsZXQgc2VjID0gbmV3IFNlY3Rpb24odGhpcy5tYWluTm9kZSwgbnVsbCwgKCAobmV4dFNsaWRlOmJvb2xlYW4pID0+dGhpcy5tb3ZlU2VjdGlvbihuZXh0U2xpZGUpICkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaChzZWMpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoYnRuU2VjQWRkKTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5yZW1vdmVDaGlsZChzd2l0Y2hCdXR0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWMuYnVpbGQodGhpcy5tYWluTm9kZSk7XG4gICAgICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIFNFQ1RJT04gQlROXG4gICAgICAgICAgICAgICAgbGV0IGJ0blNlY0RlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJidG4tZGVsZXRlLXNlY3Rpb24tXCIrc2VjLmlkfSk7XG4gICAgICAgICAgICAgICAgYnRuU2VjRGVsLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPmA7ICBcbiAgICAgICAgICAgICAgICBidG5TZWNEZWwub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUucmVtb3ZlQ2hpbGQoc2VjLm5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IHNlYy5pZDsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2VjLmNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGJ0blNlY0RlbCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGJ0blNlY0FkZCk7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCVUlMRCBUSEUgU1dJVENIIFVJIEJVVFRPTiBUTyBETyBUTyBSVU4gTU9ERSBJRiBERUJVRy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzd2l0Y2hCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXByaW1hcnkgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLmlubmVyVGV4dCA9IFwiR08gVE8gUlVOXCI7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgeyAgIFxuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc3dpdGNoQnV0dG9uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIFJ1biBmb3IgdXNlciB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uc1xuICAgICAqL1xuICAgIHJ1bigpe1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5mb3JFYWNoKCAoc2VjKSA9PiB7XG4gICAgICAgICAgICBzZWMucnVuKHRoaXMubWFpbk5vZGUpO1xuICAgICAgICB9KTsgXG5cbiAgICAgICAgLy9DcmVhdGUgU2F2ZSBidG5cbiAgICAgICAgdGhpcy5zYXZlQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJzdWJtaXRcIiwgXCJpZFwiOlwiZm9ybS1idWlsZGVyLXNhdmUtZmluYWwtYnRuXCJ9KTsgIFxuICAgICAgICB0aGlzLnNhdmVCdG4uaW5uZXJUZXh0ID0gXCJTYXZlXCI7ICBcbiAgICAgICAgdGhpcy5zYXZlQnRuLm9uY2xpY2sgPSAoZSkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGlmKHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaXNDb21wbGV0ZWQoKSl7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxlSnNvbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgY29tcGxldGUgdGhlIGZvcm1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYoKHRoaXMuY3VycmVudE5vZGUgPT0gdGhpcy5zZWN0aW9ucy5sZW5ndGgtMSkgJiYgIXRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvL1JlbW92ZSBOZXh0IGJ0blxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5hZnRlcih0aGlzLnNhdmVCdG4pO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuc2luZ2xlU2VjdGlvbil7XG4gICAgICAgICAgICAvL0Rpc3BsYXkgc2F2ZUJ0blxuICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5ub2RlLmFwcGVuZENoaWxkKHRoaXMuc2F2ZUJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0gREVCVUcgU0FWRSBCVVRUT04gLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHNhdmVCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcImlkXCI6XCJmb3JtLWJ1aWxkZXItc2F2ZS1idG5cIn0pOyAgXG4gICAgICAgIHNhdmVCdXR0b24uaW5uZXJUZXh0ID0gXCJTQVZFXCI7ICBcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIHRoaXMuY29tcGlsZUpzb24oKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBpZih0aGlzLmRlYnVnKXtcbiAgICAgICAgICAgIHRoaXMubWFpbk5vZGUuYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJVSUxEIFRIRSBTV0lUQ0ggVUkgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGxldCBzd2l0Y2hCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXByaW1hcnkgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgc3dpdGNoQnV0dG9uLmlubmVyVGV4dCA9IFwiR08gVE8gQlVJTEQgTU9ERVwiOyAgIFxuICAgICAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICB0aGlzLmJ1aWxkKCk7XG4gICAgICAgIH07ICBcbiAgICAgICAgaWYodGhpcy5kZWJ1Zyl7XG4gICAgICAgICAgICB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKHN3aXRjaEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAgICAgdGhpcy5tYWluTm9kZS5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImxpc3RcIj48IS0tIFNvcnRhYmxlIC0tPlxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj4gSXRlbSAxXG4gICAgICAgIC8vICAgICAgIDxkaXYgY2xhc3M9XCJzdWJsaXN0XCI+PCEtLSBOZXN0ZWQgU29ydGFibGU7IFdyYXBwaW5nIGNvbnRhaW5lciBuZWVkZWQgLS0+XG4gICAgICAgIC8vICAgICAgICAgPGRpdiBjbGFzcz1cInN1Yml0ZW1cIj5TdWJpdGVtIDE8L2Rpdj5cbiAgICAgICAgLy8gICAgICAgICA8ZGl2IGNsYXNzPVwic3ViaXRlbVwiPlN1Yml0ZW0gMjwvZGl2PlxuICAgICAgICAvLyAgICAgICA8L2Rpdj5cbiAgICAgICAgLy8gICAgIDwvZGl2PlxuICAgICAgICAvLyAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj4gSXRlbSAyIDwvZGl2PlxuICAgICAgICAvLyAgIDwvZGl2PmA7XG5cbiAgICAgICAgLy8gbGV0IHRlbXAgPSBzb3J0YWJsZSh0aGlzLm1haW5Ob2RlLCB7XG4gICAgICAgIC8vICAgICBjb3B5OnRydWUgLy8gZGVmYXVsdCB0byBmYWxzZVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdGhpcy5tYWluTm9kZS5hcHBlbmRDaGlsZCh0ZW1wKTtcblxuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9XG5cbiAgICByZXN1bHQoKXtcbiAgICAgICAgLy8gPGNhbnZhcyBpZD1cIm15Q2hhcnRcIiB3aWR0aD1cIjQwMFwiIGhlaWdodD1cIjQwMFwiPjwvY2FudmFcbiAgICAgICAgLy8gbGV0IGNoYXJ0SG9sZGVyID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIsIHtcbiAgICAgICAgLy8gICAgIFwiaWRcIjpcImNoYXJ0ZGl2XCIsXG4gICAgICAgIC8vICAgICBcIndpZHRoXCI6IDQwMCxcbiAgICAgICAgLy8gICAgIFwiaGVpZ2h0XCI6IDQwMFxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAvLyB0aGlzLm1haW5Ob2RlLmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cbiAgICAgICAgLy8gO1xuXG4gICAgICAgIC8vIHZhciBteUxpbmVDaGFydCA9IG5ldyBDaGFydChjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLCB7XG4gICAgICAgIC8vICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgIC8vICAgICBkYXRhOiB7XG4gICAgICAgIC8vICAgICAgICAgZGF0YXNldHM6IFt7XG4gICAgICAgIC8vICAgICAgICAgICAgIGxhYmVsOiAnVGVzdCBEYXRhc2V0JyxcbiAgICAgICAgLy8gICAgICAgICAgICAgZGF0YTogW3tcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHg6IC0xMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgLy8gICAgICAgICAgICAgfSwge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHk6IDEwXG4gICAgICAgIC8vICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHg6IDEwLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgeTogNVxuICAgICAgICAvLyAgICAgICAgICAgICB9XVxuICAgICAgICAvLyAgICAgICAgIH1dXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgLy9vcHRpb25zOiBvcHRpb25zXG4gICAgICAgIC8vIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgQUxMIHRoZSBub2Rlc1xuICAgICAqL1xuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubWFpbk5vZGUpe1xuICAgICAgICAgICAgdGhpcy5tYWluTm9kZS5pbm5lckhUTUwgPSAnJzsgIC8vIGNsZWFyIGFsbCB0aGUgc3ViIG5vZGVzXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWMpID0+IHtcbiAgICAgICAgICAgICAgICBzZWMuY2xlYXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG5cblxuICAgIGRpc3BsYXkoKXtcbiAgICAgICAgLy8gdGhpcy5vdXRwdXQgPSBcIlwiO1xuICAgICAgICAvLyB0aGlzLnNlY3Rpb25zLmZvckVhY2goIChzZWN0aW9uKSA9PiB7XG4gICAgICAgIC8vICAgICB0aGlzLm91dHB1dCArPSBzZWN0aW9uLmRpc3BsYXkoKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHRoaXMubWFpbk5vZGUuaW5uZXJIVE1MID0gdGhpcy5vdXRwdXQ7XG4gICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTAgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aCl7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICBsZXQgYXJyOiBhbnlbXTtcbiAgICAgICAgYXJyID0gW107XG4gICAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCggKHNlYzpTZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBhcnIucHVzaChzZWMuY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQgPSBKU09OLnN0cmluZ2lmeSgge1wic2VjdGlvbnNcIjphcnJ9ICk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmaW5hbE91dHB1dCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhmaW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBmaW5hbE91dHB1dDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIHNsaWRlciBvciBkaXNwbGF5IHRvIHRoZSBuZXh0IHNlY3Rpb25cbiAgICAgKi9cbiAgICBtb3ZlU2VjdGlvbihuZXh0U2xpZGU6Ym9vbGVhbil7XG4gICAgICAgIC8vIGlmIG1vdmUgZm9yd2FyZFxuICAgICAgICBpZihuZXh0U2xpZGUpe1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgSSBhbSBhbGxvd2VkIHRvIG1vdmUgdG8gdGhlIG5leHQgc2xpZGUgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgICAgICBpZih0aGlzLmN1cnJlbnROb2RlPj0wICYmIHRoaXMuY3VycmVudE5vZGU8dGhpcy5zZWN0aW9ucy5sZW5ndGgtMSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSsrO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vRGlzcGxheSBQcmV2aW91cyBidG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXByZXZpb3VzLXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50Tm9kZSA9PSB0aGlzLnNlY3Rpb25zLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuYWZ0ZXIodGhpcy5zYXZlQnRuKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL0Rpc3BsYXkgTmV4dCBidG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0LXNlY3Rpb24tJyt0aGlzLnNlY3Rpb25zW3RoaXMuY3VycmVudE5vZGVdLmlkKS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGFscmVhZHkgYXJlIG9uIHRoZSBuZXh0IHNsaWRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIC8vIG1ha2luZyBzdXJlIEkgYW0gYWxsb3dlZCB0byBtb3ZlIHRvIHRoZSBwcmV2aW91cyBzbGlkZSBpZiB0aGVyZSBpcyBvbmVcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU+PTEgJiYgdGhpcy5jdXJyZW50Tm9kZTx0aGlzLnNlY3Rpb25zLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Tm9kZS0tO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vRGlzcGxheSBOZXh0IGJ0blxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dC1zZWN0aW9uLScrdGhpcy5zZWN0aW9uc1t0aGlzLmN1cnJlbnROb2RlXS5pZCkuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudE5vZGU9PTApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgUHJldmlvdXMgYnRuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcHJldmlvdXMtc2VjdGlvbi0nK3RoaXMuc2VjdGlvbnNbdGhpcy5jdXJyZW50Tm9kZV0uaWQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IGFscmVhZHkgYXJlIG9uIHRoZSBmaXJzdCBzbGlkZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9zZWN0aW9uLnRzXCIpOyIsImltcG9ydCB7QmxvY2ssIEJsb2NrVHlwZX0gZnJvbSBcIi4vYmxvY2svYmxvY2tcIjtcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4vYnVpbGRlclwiO1xuXG4vKipcbiAqIFNFQ1RJT04gY2xhc3MgY29udGFpbnMgYSBwb3RlbnRpYWwgbGlzdCBvZiBxdWVzdGlvbiB0aGF0IGlzIGRpc3BsYXllZCBvbiB0aGUgc2FtZSBwYWdlIFxuICovXG5leHBvcnQgY2xhc3MgU2VjdGlvbntcbiAgICBibG9ja3M6QmxvY2tbXTsgXG4gICAgdGl0bGU6IHN0cmluZzsgICBcbiAgICAvLyBuYW1lOiBzdHJpbmc7XG4gICAgb3V0cHV0OiBzdHJpbmc7XG4gICAgaWQ6c3RyaW5nO1xuICAgIHBhcmVudDogSFRNTEVsZW1lbnQ7XG4gICAgbm9kZTogSFRNTEVsZW1lbnQ7XG4gICAgY2FsbGJhY2s6IEZ1bmN0aW9uO1xuICAgIGNvbnRlbnRXcmFwcGVyOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKF9wYXJlbnQ6SFRNTEVsZW1lbnQsIF9qc29uOkZvcm1EYXRhLCBfY2FsbGJhY2s6RnVuY3Rpb24pe1xuICAgICAgICB0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gW107XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBfY2FsbGJhY2s7XG4gICAgICAgIHRoaXMudGl0bGUgPSAnJztcbiAgICAgICAgLy8gdGhpcy5uYW1lID0gXCJkZWZhdWx0X25hbWVcIjtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcInRpdGxlXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gX2pzb25bXCJ0aXRsZVwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmKF9qc29uW1wibmFtZVwiXSl7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5uYW1lID0gX2pzb25bXCJuYW1lXCJdO1xuICAgICAgICAgICAgLy8gfVxuICAgIFxuICAgICAgICAgICAgaWYoX2pzb25bXCJibG9ja3NcIl0pe1xuICAgICAgICAgICAgICAgIF9qc29uW1wiYmxvY2tzXCJdLmZvckVhY2goIChiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja01vZGVsID0gbmV3IEJsb2NrKGIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGJsb2NrTW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAvL2Jsb2NrTW9kZWwucnVuKHRoaXMubm9kZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGZvcm0gaW4gQlVJTERFUiBNT0RFIGZvciB0aGUgdXNlciB0byBlZGl0IHRoZSBmb3JtIGl0c2VsZlxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIGJ1aWxkKF9ub2RlKXtcbiAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlciA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWJveC1jb250ZW50XCIsXG4gICAgICAgICAgICBcImRyYWdnYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJpZFwiOiB0aGlzLmlkXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBfbm9kZS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRXcmFwcGVyKTtcblxuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYm94IGRyb3AtdGFyZ2V0XCIsXG4gICAgICAgICAgICBcImlkXCI6XCJob2xkZXItXCIrdGhpcy5pZFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyB0aGlzLm5vZGUub25kcmFnc3RhcnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiZHJhZyBzdGFydFwiKTtcbiAgICAgICAgLy8gICAgIChIVE1MRWxlbWVudChldmVudC50YXJnZXQpKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgLy8gfTtcblxuICAgICAgICAvLyBDcmVhdGUgc2VjdGlvbiBoZWFkZXIgZGl2IHdpdGggdGl0bGUgYW5kIG5hbWUgaW5wdXRcbiAgICAgICAgbGV0IG5vZGVIZWFkZXIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1wiY2xhc3NcIjogXCJyb3cgcGl4aXVtLWJsb2NrLWJ1aWxkIHBpeGl1bS1ibG9jay1idWlsZC1oZWFkZXJcIn0pO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZUhlYWRlciwgdGhpcy5pZCwgdGhpcy50aXRsZSwgXCJUaXRsZSBTZWN0aW9uXCIsICh2YWwpID0+IHt0aGlzLnRpdGxlPXZhbDt9LCBcImNvbC1tZC0xMlwiICk7XG4gICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZUhlYWRlcik7XG4gICAgICAgIFxuXG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEdPIFRIUk9VR0ggRUFDSCBCTE9DSyBXSVRISU4gVEhFIFNFQ1RJT05cbiAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIGJ1aWxkIHRoZSB2YXJpb3VzIGJsb2NrcyAhXG4gICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goIChibGs6QmxvY2spID0+IHtcbiAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImZvcm0tYnVpbGRlci1idG4gYnV0dG9uLWRlbGV0ZVwiLCBcInR5cGVcIjpcImJ1dHRvblwiLCBcInN0eWxlXCI6XCJkaXNwbGF5OmJsb2NrXCJ9KTtcbiAgICAgICAgICAgIGRlbEJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nOyBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYmxrLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcblxuICAgICAgICAgICAgYmxrLmJ1aWxkKHRoaXMuY29udGVudFdyYXBwZXIsIGRlbEJ0bik7XG5cbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE4gQUNUSU9OXG4gICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5yZW1vdmVDaGlsZChibGsubm9kZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MgPSB0aGlzLmJsb2Nrcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGJsay5pZDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuICAgICAgICAvLyBCVUlMRCBBREQgQk9MQ0sgQlROXG4gICAgICAgIGxldCBhZGRCdXR0b24gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcImNsYXNzXCI6XCJidG4gYnRuLXN1Y2Nlc3MgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgYWRkQnV0dG9uLmlubmVySFRNTCA9ICcrJzsgIFxuICAgICAgICBhZGRCdXR0b24ub25jbGljayA9IChldikgPT4gXG4gICAgICAgIHsgICBcbiAgICAgICAgICAgIGxldCBidG5CbGtBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgLy8gQUREIE5FVyBCT0xDS1xuICAgICAgICAgICAgbGV0IGJsayA9IG5ldyBCbG9jayhudWxsKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFdyYXBwZXIucmVtb3ZlQ2hpbGQoYnRuQmxrQWRkKTtcbiAgICAgICAgICAgIGxldCBidG5TZWNEZWw7XG4gICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICBidG5TZWNEZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ0bi1kZWxldGUtc2VjdGlvbi1cIit0aGlzLmlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLnJlbW92ZUNoaWxkKGJ0blNlY0RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibGsuYnVpbGQodGhpcy5jb250ZW50V3JhcHBlciwgZmFsc2UsIFwiXCIpO1xuICAgICAgICAgICAgLy8gQlVJTEQgREVMRVRFIEJPTENLIEJUTlxuICAgICAgICAgICAgbGV0IGJ0bkJsa0RlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiZm9ybS1idWlsZGVyLWJ0biBidXR0b24tZGVsZXRlIGZsb2F0LXJpZ2h0XCIsIFwidHlwZVwiOlwiYnV0dG9uXCIsIFwic3R5bGVcIjpcImRpc3BsYXk6YmxvY2tcIn0pO1xuICAgICAgICAgICAgYnRuQmxrRGVsLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7ICBcbiAgICAgICAgICAgIGJ0bkJsa0RlbC5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLnJlbW92ZUNoaWxkKGJsay5ub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHRoaXMuYmxvY2tzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gYmxrLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmxrLmhlYWRlci5pbnNlcnRCZWZvcmUoYnRuQmxrRGVsLCBibGsuaGVhZGVyLmZpcnN0Q2hpbGQpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGJ0bkJsa0FkZCk7XG4gICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRXcmFwcGVyLmFwcGVuZENoaWxkKGJ0blNlY0RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07ICBcbiAgICAgICAgdGhpcy5jb250ZW50V3JhcHBlci5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50V3JhcHBlcik7XG5cbiAgICAgICAgX25vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuXG4gICAgLyoqXG4gICAgICogUnVuIHRoZSBmb3JtIGZvciB1c2VyIHRvIGFuc3dlclxuICAgICAqIEBwYXJhbSBub2RlIFxuICAgICAqL1xuICAgIHJ1bihub2RlKXtcblxuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJvdyBwaXhpdW0tYm94XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBuYW1lTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICAgICAgbmFtZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50aXRsZTtcbiAgICAgICAgbGV0IGhyTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoclwiKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKG5hbWVOb2RlKTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyTmFtZSk7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGIpID0+IHtcbiAgICAgICAgICAgIGIucnVuKHRoaXMubm9kZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdub2RlLnNpbmdsZVNlY3Rpb24nKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5jYWxsYmFjayk7XG4gICAgICAgIGlmKHRoaXMuY2FsbGJhY2spe1xuICAgICAgICAgICAgLy8gQlVJTEQgVEhFIEJVVFRPTi4gUFJFVklPVVMgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBsZXQgcHJldkJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwiaWRcIjogXCJidG4tcHJldmlvdXMtc2VjdGlvbi1cIit0aGlzLmlkLCBcInR5cGVcIjpcImJ1dHRvblwifSk7ICBcbiAgICAgICAgICAgIHByZXZCdXR0b24uaW5uZXJUZXh0ID0gXCJQcmV2aW91c1wiO1xuICAgICAgICAgICAgcHJldkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAgXG4gICAgICAgICAgICBwcmV2QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBcbiAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNhbGxiYWNrKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gVFJVRSBGT1IgTkVYVCBTTElERVxuICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQocHJldkJ1dHRvbik7XG5cbiAgICAgICAgICAgIC8vIEJVSUxEIFRIRSBCVVRUT04uIE5FWFQgQlVUVE9OIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICBsZXQgbmV4dEJ1dHRvbiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1wiY2xhc3NcIjpcImJ0biBidG4taW5mbyBmb3JtLWJ1aWxkZXItYnRuXCIsIFwiaWRcIjogXCJidG4tbmV4dC1zZWN0aW9uLVwiK3RoaXMuaWQsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTsgIFxuICAgICAgICAgICAgbmV4dEJ1dHRvbi5pbm5lclRleHQgPSBcIk5leHRcIjsgIFxuICAgICAgICAgICAgbmV4dEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gXG4gICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgaWYodGhpcy5pc0NvbXBsZXRlZCgpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jYWxsYmFjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUUlVFIEZPUiBORVhUIFNMSURFXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGQUxTRSBGT1IgUFJFViBTTElERVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZm9ybS4uLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9OyAgXG4gICAgICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobmV4dEJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5vZGUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cblxuICAgIGNsZWFyKCl7XG4gICAgICAgIGlmKHRoaXMubm9kZSl7XG4gICAgICAgICAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsaykgPT4ge1xuICAgICAgICAgICAgYmxrLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldE5vZGUoKXtcbiAgICAgICAgYWxlcnQodGhpcy5ub2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBjdXJyZW50IHNlY3Rpb25cbiAgICAgKi9cbiAgICBzaG93KCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgdGhlIGN1cnJlbnQgc2VjdGlvbiBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICBoaWRlKCl7XG4gICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgRk9STSBoYXMgYmVlbiBmdWxseSBjb21wbGV0ZWQgLSBBbGwgYmxvY2tzIGhhdmUgYSB2YWxpZCBhbnN3ZXJcbiAgICAgKi9cbiAgICBpc0NvbXBsZXRlZCgpe1xuICAgICAgICBsZXQgaXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKCAoYmxrOkJsb2NrKT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coYmxrLmFuc3dlcik7XG4gICAgICAgICAgICBpZihibGsgJiYgKGJsay5hbnN3ZXIubGVuZ3RoPT0wKSAmJiAoYmxrLnR5cGUgIT09IEJsb2NrVHlwZS5OT0FOU1dFUikpe1xuICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNDb21wbGV0ZWQ7XG4gICAgfVxuXG5cbiAgICBjb21waWxlSnNvbigpe1xuICAgICAgICBsZXQgYXJyOmFueVtdO1xuICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaCggKGJsazpCbG9jaykgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goYmxrLmNvbXBpbGVKc29uKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHNlYyA9IHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogdGhpcy50aXRsZSxcbiAgICAgICAgICAgIFwiYmxvY2tzXCI6YXJyXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlYztcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9jay50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5pbXBvcnQge0Nob2ljZX0gZnJvbSBcIi4vY2hvaWNlXCI7XG5cbmltcG9ydCB7QmxvY2tTbGlkZXJ9IGZyb20gXCIuL2Jsb2NrU2xpZGVyXCI7XG5pbXBvcnQge0Jsb2NrRnJlZXRleHR9IGZyb20gXCIuL2Jsb2NrRnJlZXRleHRcIjtcbmltcG9ydCB7QmxvY2tSYWRpb30gZnJvbSBcIi4vYmxvY2tSYWRpb1wiO1xuaW1wb3J0IHsgQmxvY2tDaGVja2JveCB9IGZyb20gXCIuL2Jsb2NrQ2hlY2tib3hcIjtcbmltcG9ydCB7QmxvY2tMb25ndGV4dH0gZnJvbSBcIi4vYmxvY2tMb25ndGV4dFwiO1xuaW1wb3J0IHtCbG9ja1RhZ3N9IGZyb20gXCIuL0Jsb2NrVGFnc1wiO1xuLy8gaW1wb3J0IHtCbG9ja05vYW5zd2VyfSBmcm9tIFwiLi9ibG9ja05vYW5zd2VyXCI7XG5cbmV4cG9ydCBlbnVtIEJsb2NrVHlwZSB7XG4gICAgRlJFRVRFWFQgPSAxLFxuICAgIFJBRElPID0gMixcbiAgICBTTElERVIgPSAzLFxuICAgIENIRUNLQk9YID0gNCxcbiAgICBMT05HVEVYVCA9IDUsXG4gICAgTk9BTlNXRVIgPSA2LFxuICAgIFRBR1MgPSA3XG59XG5cblxuLyoqXG4gKiBBIEJsb2NrIGlzIGEgbGlzdCBcbiAqL1xuZXhwb3J0IGNsYXNzIEJsb2Nre1xuICAgIHR5cGU6bnVtYmVyO1xuICAgIHRleHQ6c3RyaW5nO1xuICAgIGFuc3dlcjphbnk7XG4gICAgbWluOnN0cmluZztcbiAgICBtYXg6c3RyaW5nO1xuICAgIHN0ZXA6c3RyaW5nO1xuICAgIGNob2ljZXM6Q2hvaWNlW107XG5cbiAgICBoZWFkZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICBvdXRwdXQ6c3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBqc29uOmFueTtcblxuICAgIG5vZGU6IEhUTUxFbGVtZW50O1xuXG4gICAgLypcbiAgICBcInRpdGxlXCI6IFwiREVMRUdBVElPTjogPGJyPiA8YnI+IEhvdyBza2lsbGVkIGRvIHlvdSBmZWVsIHRvZGF5IGFib3V0IHlvdXIgYWJpbGl0eSB0byBkZWxlZ2F0ZT9cIixcbiAgICBcInR5cGVcIjogNCxcbiAgICBcImdyb3VwXCI6IDEsXG4gICAgXCJsYWJlbFwiOiBcbiAgICAqL1xuXG4gICAgY29uc3RydWN0b3IoX2pzb246Rm9ybURhdGEgPSBudWxsKXtcbiAgICAgICAgdGhpcy5qc29uID0gX2pzb247XG4gICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMubWluID0gXCJcIjtcbiAgICAgICAgdGhpcy5tYXggPSBcIlwiO1xuICAgICAgICB0aGlzLnN0ZXAgPSBcIlwiO1xuICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2hvaWNlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XG5cbiAgICAgICAgaWYoX2pzb24pe1xuICAgICAgICAgICAgaWYoX2pzb25bXCJ0ZXh0XCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBfanNvbltcInRleHRcIl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKF9qc29uW1widHlwZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gX2pzb25bXCJ0eXBlXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IFwiXCI7XG4gICAgICAgICAgICBpZihfanNvbltcImFuc3dlclwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSBfanNvbltcImFuc3dlclwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJtaW5cIl0pe1xuICAgICAgICAgICAgICAgIHRoaXMubWluID0gX2pzb25bXCJtaW5cIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfanNvbltcIm1heFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSBfanNvbltcIm1heFwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF9qc29uW1wic3RlcFwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gX2pzb25bXCJzdGVwXCJdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5SQURJTyB8fCB0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCl7XG4gICAgICAgICAgICAgICAgLy8gbG9hZCBhZGRpdGlvbmFsIGRhdGFcbiAgICAgICAgICAgICAgICBpZihfanNvbltcImNob2ljZXNcIl0pe1xuICAgICAgICAgICAgICAgICAgICBfanNvbltcImNob2ljZXNcIl0uZm9yRWFjaChjaG9pY2VKc29uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaG9pY2UgPSBuZXcgQ2hvaWNlKGNob2ljZUpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzLnB1c2goY2hvaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vdGhpcy5jaG9pY2VzID0gX2pzb25bXCJjaG9pY2VzXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciBhbmQgcmVtb3ZlIGFsbCB0aGUgSFRNTCBOb2RlXG4gICAgICovXG4gICAgY2xlYXIoKXtcbiAgICAgICAgaWYodGhpcy5ub2RlKXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gYnVpbGQgdGhlIGZvcm1cbiAgICAgKi9cbiAgICBidWlsZChub2RlLCBkZWxCdG4gPSBudWxsLCBjbGFzc2VzOnN0cmluZyA9IFwiY29sbGFwc2VcIil7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCIgOiBcInJvdyBwaXhpdW0tYmxvY2stYnVpbGRcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBsZXQgaHIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJoclwiLCB7XG4gICAgICAgIC8vICAgICBcImNsYXNzXCI6IFwicGl4aXVtLWhyIGNvbC1tZC0xMlwiXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIGxldCBoZWFkZXJCb3ggPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAvLyAgICAgXCJpZFwiOiBcImhlYWRlcl9ib3hcIit0aGlzLmlkLFxuICAgICAgICAvLyAgICAgXCJjbGFzc1wiOiBcImNvbGxhcHNlXCJcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgbGV0IG5vZGVDb250ZW50ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICAgICdjbGFzcyc6ICdjb2wtbWQtMTIgJytjbGFzc2VzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaGVhZGVyID0gQnVpbGRlci5hZGRCb3hIZWFkZXIodGhpcy5ub2RlLCB0aGlzLmlkLCBub2RlQ29udGVudCwgZGVsQnRuKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KHRoaXMuaGVhZGVyLCB0aGlzLmlkLCB0aGlzLnRleHQsIFwiVGV4dFwiLCAodmFsKSA9PiB7dGhpcy50ZXh0PXZhbDt9LCBcImNvbC1tZC02XCIgKTtcblxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvbnRlbnQpO1xuXG4gICAgXG4gICAgICAgIGxldCBlbnVtQXJyYXkgPSBPYmplY3Qua2V5cyhCbG9ja1R5cGUpLmZpbHRlcihhPT5hLm1hdGNoKC9eXFxELykpLm1hcChuYW1lPT4oe25hbWUsIHZhbHVlOiBCbG9ja1R5cGVbbmFtZV0gYXMgbnVtYmVyfSkpO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dERyb3Bkb3duKG5vZGVDb250ZW50LCB0aGlzLmlkLCB0aGlzLnR5cGUsIFwiVHlwZVwiLCAodmFsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnR5cGU9TnVtYmVyKHZhbCk7XG4gICAgICAgICAgICB0aGlzLmFuc3dlcj0nJztcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1YkVsZW1lbnRCbG9jaygpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0sIGVudW1BcnJheSwgXCJjb2wtbWQtNFwiICk7XG5cbiAgICAgICAgLy8gLS0tLSBGaWVsZCBmb3IgQ2hvaWNlcyBibG9ja1xuICAgICAgICBsZXQgYmxrQ2hvaWNlc1N0eWxlID0gXCJcIjtcbiAgICAgICAgaWYoKHRoaXMudHlwZSAhPT0gQmxvY2tUeXBlLlJBRElPKSAmJiAodGhpcy50eXBlICE9PSBCbG9ja1R5cGUuQ0hFQ0tCT1gpKXtcbiAgICAgICAgICAgIGJsa0Nob2ljZXNTdHlsZSA9IFwiZGlzcGxheTpub25lO1wiXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxldCBub2RlQ2hvaWNlcyA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImNvbC1tZC0xMiBjdXN0b21fYmxvY2tfdHlwZVwiLFxuICAgICAgICAgICAgXCJzdHlsZVwiOiBibGtDaG9pY2VzU3R5bGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGxhYlRpdGxlID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYlRpdGxlLmlubmVySFRNTCA9IFwiQ2hvaWNlcyA6IFwiO1xuICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChsYWJUaXRsZSk7XG4gICAgICAgIGlmKHRoaXMuY2hvaWNlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5mb3JFYWNoKCAoY2g6Q2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2guYnVpbGQobm9kZUNob2ljZXMpO1xuICAgICAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgICAgICBsZXQgZGVsQnRuID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcImNsYXNzXCI6XCJidG4gYnRuLWRhbmdlciBmb3JtLWJ1aWxkZXItYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJUZXh0ID0gJy0nOyAgXG4gICAgICAgICAgICAgICAgZGVsQnRuLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlQ2hvaWNlcy5yZW1vdmVDaGlsZChjaC5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9pY2VzID0gdGhpcy5jaG9pY2VzLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gZWwuaWQgIT0gY2guaWQ7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNoLm5vZGUuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQlVJTEQgQUREIEJPTENLIEJUTlxuICAgICAgICBsZXQgYWRkQ2hvaWNlQnV0dG9uID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1zdWNjZXNzIGZvcm0tYnVpbGRlci1idG5cIiwgXCJ0eXBlXCI6XCJidXR0b25cIn0pOyAgXG4gICAgICAgIGFkZENob2ljZUJ1dHRvbi5pbm5lclRleHQgPSAnKyc7ICBcbiAgICAgICAgYWRkQ2hvaWNlQnV0dG9uLm9uY2xpY2sgPSAoZXYpID0+IFxuICAgICAgICB7ICAgXG4gICAgICAgICAgICBsZXQgYnRuQ2hBZGQgPSA8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0O1xuICAgICAgICAgICAgLy8gQUREIE5FVyBCT0xDS1xuICAgICAgICAgICAgbGV0IGNoID0gbmV3IENob2ljZShudWxsKTtcbiAgICAgICAgICAgIHRoaXMuY2hvaWNlcy5wdXNoKGNoKTtcbiAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGJ0bkNoQWRkKTtcbiAgICAgICAgICAgIGNoLmJ1aWxkKG5vZGVDaG9pY2VzKTtcbiAgICAgICAgICAgIC8vIEJVSUxEIERFTEVURSBCT0xDSyBCVE5cbiAgICAgICAgICAgIGxldCBidG5DaERlbCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuIGJ0bi1kYW5nZXIgZm9ybS1idWlsZGVyLWJ0blwiLCBcInR5cGVcIjpcImJ1dHRvblwifSk7XG4gICAgICAgICAgICBidG5DaERlbC5pbm5lclRleHQgPSAnLSc7ICBcbiAgICAgICAgICAgIGJ0bkNoRGVsLm9uY2xpY2sgPSAoZXYgPT4ge1xuICAgICAgICAgICAgICAgIG5vZGVDaG9pY2VzLnJlbW92ZUNoaWxkKGNoLm5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMuY2hvaWNlcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLmlkICE9IGNoLmlkOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2gubm9kZS5hcHBlbmRDaGlsZChidG5DaERlbCk7XG5cbiAgICAgICAgICAgIG5vZGVDaG9pY2VzLmFwcGVuZENoaWxkKGJ0bkNoQWRkKTtcbiAgICAgICAgfTsgIFxuICAgICAgICBub2RlQ2hvaWNlcy5hcHBlbmRDaGlsZChhZGRDaG9pY2VCdXR0b24pO1xuXG4gICAgICAgIG5vZGVDb250ZW50LmFwcGVuZENoaWxkKG5vZGVDaG9pY2VzKTtcbiAgICAgICAgLy8gLS0tLSBcblxuICAgICAgICAvLyAtLS0tIEZpZWxkIGZvciBTbGlkZXIgYmxvY2tcbiAgICAgICAgbGV0IGJsa1NsaWRlclN0eWxlID0gXCJcIjtcbiAgICAgICAgaWYodGhpcy50eXBlICE9PSBCbG9ja1R5cGUuU0xJREVSKXtcbiAgICAgICAgICAgIGJsa1NsaWRlclN0eWxlID0gXCJkaXNwbGF5Om5vbmU7XCJcbiAgICAgICAgfVxuICAgICAgICBsZXQgbm9kZVNsaWRlciA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwic2xpZGVyX2Jsb2NrX1wiK3RoaXMuaWQsXG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiY29sLW1kLTEyIGN1c3RvbV9ibG9ja190eXBlXCIsXG4gICAgICAgICAgICBcInN0eWxlXCI6IGJsa1NsaWRlclN0eWxlXG4gICAgICAgIH0pO1xuICAgICAgICBCdWlsZGVyLmFkZEJ1aWxkZXJJbnB1dFRleHQobm9kZVNsaWRlciwgdGhpcy5pZCwgdGhpcy5taW4sIFwiTWluXCIsICh2YWwpID0+IHt0aGlzLm1pbj12YWw7fSwgXCJjb2wtbWQtNFwiICk7XG4gICAgICAgIEJ1aWxkZXIuYWRkQnVpbGRlcklucHV0VGV4dChub2RlU2xpZGVyLCB0aGlzLmlkLCB0aGlzLm1heCwgXCJNYXhcIiwgKHZhbCkgPT4ge3RoaXMubWF4PXZhbDt9LCBcImNvbC1tZC00XCIgKTtcbiAgICAgICAgQnVpbGRlci5hZGRCdWlsZGVySW5wdXRUZXh0KG5vZGVTbGlkZXIsIHRoaXMuaWQsIHRoaXMuc3RlcCwgXCJTdGVwXCIsICh2YWwpID0+IHt0aGlzLnN0ZXA9dmFsO30sIFwiY29sLW1kLTRcIiApO1xuICAgICAgICBub2RlQ29udGVudC5hcHBlbmRDaGlsZChub2RlU2xpZGVyKTtcbiAgICAgICAgLy8gLS0tLVxuXG4gICAgICAgIC8vIHRoaXMubm9kZS5hcHBlbmRDaGlsZChocik7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICB9XG5cbiAgICBcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gUnVuIHRoZSBmb3JtXG4gICAgICovXG4gICAgcnVuKG5vZGUpe1xuICAgICAgICAvLyBhbGVydChcIkNcIik7XG4gICAgICAgIGxldCB0aXRsZU5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJwXCIpOyAvL2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0aXRsZU5vZGUuaW5uZXJIVE1MID0gdGhpcy50ZXh0O1xuICAgICAgICB0aGlzLm5vZGUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZCh0aXRsZU5vZGUpO1xuXG4gICAgICAgIHN3aXRjaCh0aGlzLnR5cGUpe1xuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuUkFESU86XG4gICAgICAgICAgICAgICAgQmxvY2tSYWRpby5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuQ0hFQ0tCT1g6XG4gICAgICAgICAgICAgICAgQmxvY2tDaGVja2JveC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuRlJFRVRFWFQ6XG4gICAgICAgICAgICAgICAgQmxvY2tGcmVldGV4dC5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLkxPTkdURVhUOlxuICAgICAgICAgICAgICAgIEJsb2NrTG9uZ3RleHQucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLk5PQU5TV0VSOlxuICAgICAgICAgICAgICAgIC8vIEJsb2NrTm9hbnN3ZXIucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgQmxvY2tUeXBlLlNMSURFUjpcbiAgICAgICAgICAgICAgICBCbG9ja1NsaWRlci5ydW4odGhpcy5ub2RlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBCbG9ja1R5cGUuVEFHUzpcbiAgICAgICAgICAgICAgICBCbG9ja1RhZ3MucnVuKHRoaXMubm9kZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCBociA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImhyXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0taHJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ub2RlLmFwcGVuZENoaWxkKGhyKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG5cbiAgICBkaXNwbGF5KCl7XG4gICAgfVxuXG5cblxuICAgIHRyaWdnZXJTdWJFbGVtZW50QmxvY2soKXtcbiAgICAgICAgbGV0IHNsaWRlckJsb2NrID0gbnVsbDtcbiAgICAgICAgaWYoc2xpZGVyQmxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNsaWRlcl9ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5TTElERVIpe1xuICAgICAgICAgICAgICAgIHNsaWRlckJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbGlkZXJCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIFNpbGRlciBub3QgZm91bmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2hvaWNlQmxvY2sgPSBudWxsO1xuICAgICAgICBpZihjaG9pY2VCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hvaWNlc19ibG9ja19cIit0aGlzLmlkKSl7XG4gICAgICAgICAgICBpZigodGhpcy50eXBlID09PSBCbG9ja1R5cGUuUkFESU8pIHx8ICh0aGlzLnR5cGUgPT09IEJsb2NrVHlwZS5DSEVDS0JPWCkpe1xuICAgICAgICAgICAgICAgIGNob2ljZUJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBjaG9pY2VCbG9jay5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYWxlcnQoXCJOb2RlIENob2ljZSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNvbXBpbGVKc29uKCl7XG4gICAgICAgIGxldCBhcnI6YW55W107XG4gICAgICAgIGFyciA9IFtdO1xuICAgICAgICB0aGlzLmNob2ljZXMuZm9yRWFjaCggKGNoOkNob2ljZSkgPT4ge1xuICAgICAgICAgICAgYXJyLnB1c2goY2guY29tcGlsZUpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmpzb24gPSB7XG4gICAgICAgICAgICBcInR5cGVcIjp0aGlzLnR5cGUsXG4gICAgICAgICAgICBcInRleHRcIjp0aGlzLnRleHQsXG4gICAgICAgICAgICBcImFuc3dlclwiOnRoaXMuYW5zd2VyLFxuICAgICAgICAgICAgXCJtaW5cIjp0aGlzLm1pbixcbiAgICAgICAgICAgIFwibWF4XCI6dGhpcy5tYXgsXG4gICAgICAgICAgICBcInN0ZXBcIjp0aGlzLnN0ZXAsXG4gICAgICAgICAgICBcImNob2ljZXNcIjogYXJyXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuanNvbjtcbiAgICB9XG59IiwiXG5leHBvcnQgY2xhc3MgQnVpbGRlcntcblxuICAgIC8qKlxuICAgICAqIEJ1aWxkIGFuZCBzZXQgYWxsIHRoZSBhdHRyaWJ1dGUgb2YgYSBIVE1MIEVsZW1lbnQgbm9kZVxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBpbnB1dCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gX3BhcmFtcyBUaGUgYXR0cmlidXRlcyBsaXN0IHRvIHNldFxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVFbGVtZW50KHR5cGU6c3RyaW5nLCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZighdHlwZSl7XG4gICAgICAgICAgICBhbGVydChcIkNvdWxkIG5vdCBidWlsZCB0aGUgZWxlbWVudFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgICAgICAgaWYoX3BhcmFtcyl7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3BhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9wYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB3aWxsIHNldCBhbGwgYXR0cmlidXRlIGludG8gYSBzcGVjaWZpYyBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW0gRWxlbWVudCB0byBzZXQgdGUgYXR0cmlidXRlIG9mXG4gICAgICogQHBhcmFtIF9wYXJhbXMgVGhlIGF0dHJpYnV0ZXMgbGlzdCB0byBzZXRcbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0QXR0cmlidXRlcyhlbGVtOkhUTUxFbGVtZW50LCBfcGFyYW1zOmFueSA9IG51bGwpe1xuICAgICAgICBpZihfcGFyYW1zKXtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3BhcmFtc1trZXldO1xuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0VGV4dChub2RlLCBpZCwgdmFsdWUsIGxhYmVsLCBjYWxsYmFjaywgY2xhc3Nlcz1cImNvbC1tZC0xMlwiKXtcbiAgICAgICAgbGV0IGRpdiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBcIitjbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBsZXQgbGFiID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIC8vIGxhYi5pbm5lckhUTUwgPSBsYWJlbCtcIjogXCI7XG4gICAgICAgIGxldCBpbnB1dCA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwaXhpdW0tdGV4dGJveFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogbGFiZWxcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uYmx1ciA9IChldikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXYudGFyZ2V0KTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlKTtcbiAgICAgICAgfTsgXG4gICAgICAgIC8vZGl2LmFwcGVuZENoaWxkKGxhYik7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB9XG5cblxuICAgIHN0YXRpYyBhZGRCb3hIZWFkZXIobm9kZSwgaWQsIHN1YkVsZW1lbnQsIGRlbEJ0bil7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImNvbC1tZC0xMiBibG9jay1oZWFkZXIgYmxvY2staGVhZGVyLVwiK2lkIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgdGhlIGRlbGV0ZSBidXR0b24gaW4gdGhlIGhlYWRlciBkaXJlY3RseVxuICAgICAgICBpZihkZWxCdG4pe1xuICAgICAgICAgICAgZGVsQnRuLmNsYXNzTmFtZSArPSBcIiBmbG9hdC1yaWdodFwiO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGRlbEJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZXllMSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlcIiwge1wiY2xhc3NcIjpcImZhIGZhLWNhcmV0LWxlZnQgZmxvYXQtcmlnaHRcIiwgXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChleWUxKTtcbiAgICAgICAgbGV0IGV5ZTIgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpXCIsIHtcImNsYXNzXCI6XCJmYSBmYS1jYXJldC1kb3duIGZsb2F0LXJpZ2h0IGhpZGRlblwiLCBcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCJ9KTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGV5ZTIpO1xuXG4gICAgICAgIFxuICAgICAgICBcblxuXG4gICAgICAgIGV5ZTEub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgc3ViRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY29sbGFwc2VcIik7XG4gICAgICAgICAgICBleWUxLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICBleWUyLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgIH07XG4gICAgICAgIGV5ZTIub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgc3ViRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY29sbGFwc2VcIik7XG4gICAgICAgICAgICBleWUxLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICBleWUyLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgXG5cbiAgICAgICAgLy8gbGV0IGxhYiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAvLyBsYWIuaW5uZXJIVE1MID0gbGFiZWw7XG4gICAgICAgIC8vIGRpdi5hcHBlbmRDaGlsZChsYWIpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgIHJldHVybiBkaXY7XG4gICAgfVxuXG4gICAgLypcbjxzZWxlY3QgbmFtZT1cImNhcnNcIiBpZD1cImNhcnNcIj5cbiAgPG9wdGlvbiB2YWx1ZT1cInZvbHZvXCI+Vm9sdm88L29wdGlvbj5cbiAgPG9wdGlvbiB2YWx1ZT1cInNhYWJcIj5TYWFiPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJtZXJjZWRlc1wiPk1lcmNlZGVzPC9vcHRpb24+XG4gIDxvcHRpb24gdmFsdWU9XCJhdWRpXCI+QXVkaTwvb3B0aW9uPlxuPC9zZWxlY3Q+XG4gICAgKi9cbiAgICBzdGF0aWMgYWRkQnVpbGRlcklucHV0RHJvcGRvd24obm9kZSwgaWQsIHZhbHVlLCBsYWJlbCwgY2FsbGJhY2ssIG9wdGlvbnMsIGNsYXNzZXM9XCJjb2wtbWQtMTJcIil7XG4gICAgICAgIGxldCBkaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1yb3ctYmxvY2sgXCIrY2xhc3Nlc1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhYiA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWIuaW5uZXJIVE1MID0gbGFiZWwrXCI6IFwiO1xuICAgICAgICBsZXQgaW5wdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1kcm9wZG93blwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBsYWJlbCtcIl9cIitpZCxcbiAgICAgICAgICAgIFwic3R5bGVcIjogXCJkaXNwbGF5OmJsb2NrXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlucHV0Lm9uY2hhbmdlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjaygoPEhUTUxJbnB1dEVsZW1lbnQ+ZXYudGFyZ2V0KS52YWx1ZSk7XG4gICAgICAgIH07IFxuXG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGxldCBvcHQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiwge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZWxlbWVudC52YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYodmFsdWU9PT1lbGVtZW50LnZhbHVlKXtcbiAgICAgICAgICAgICAgICBCdWlsZGVyLnNldEF0dHJpYnV0ZXMob3B0LCB7XG4gICAgICAgICAgICAgICAgICAgIFwic2VsZWN0ZWRcIjpcInNlbGVjdGVkXCJcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0LmlubmVySFRNTCA9IGVsZW1lbnQubmFtZTtcbiAgICAgICAgICAgIGlucHV0LmFwcGVuZENoaWxkKG9wdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChsYWIpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vY2hvaWNlLnRzXCIpOyIsIlxuaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQ2hvaWNle1xuICAgIGxhYmVsOnN0cmluZztcbiAgICB2YWx1ZTogc3RyaW5nO1xuICAgIGlkOnN0cmluZztcbiAgICBqc29uOmFueTtcbiAgICBub2RlOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKF9qc29uKXtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcblxuICAgICAgICBpZihfanNvbil7XG4gICAgICAgICAgICBpZihfanNvbltcImxhYmVsXCJdKXtcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsID0gX2pzb25bXCJsYWJlbFwiXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoX2pzb25bXCJ2YWx1ZVwiXSl7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IF9qc29uW1widmFsdWVcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB1c2VkIHRvIGJ1aWxkIHRoZSBmb3JtXG4gICAgICovXG4gICAgYnVpbGQobm9kZSl7XG4gICAgICAgIHRoaXMubm9kZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXJvdy1ibG9jayBibG9jay1jaG9pY2VzIGNvbC1tZC0xMlwiLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ1JFQVRFIFZBTFVFIElOUFVUXG4gICAgICAgIGxldCBsYWJWYWx1ZSA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcImZvclwiOlwiaW5wdXRfXCIrdGhpcy52YWx1ZStcIl9cIit0aGlzLmlkfSk7XG4gICAgICAgIGxhYlZhbHVlLmlubmVySFRNTCA9IFwiVmFsdWUgOiBcIjtcbiAgICAgICAgbGV0IGlucHV0VmFsdWUgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwidmFsdWVcIjogKHRoaXMudmFsdWUpID8gdGhpcy52YWx1ZSA6ICcnLFxuICAgICAgICAgICAgXCJwbGFjZWhvbGRlclwiOiAnVmFsdWUnLFxuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0X1wiK3RoaXMudmFsdWUrXCJfXCIrdGhpcy5pZFxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXRWYWx1ZS5vbmJsdXIgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlPSg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlO1xuICAgICAgICB9OyBcblxuICAgICAgICAvLyBDUkVBVEUgTEFCRUwgSU5QVVRcbiAgICAgICAgbGV0IGxhYkxhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1wiZm9yXCI6XCJpbnB1dF9cIit0aGlzLmxhYmVsK1wiX1wiK3RoaXMuaWQsIFwic3R5bGVcIjpcIm1pbi13aWR0aDogYXV0bztcIn0pO1xuICAgICAgICBsYWJMYWJlbC5pbm5lckhUTUwgPSBcIkxhYmVsIDogXCI7XG4gICAgICAgIGxldCBpbnB1dExhYmVsID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6ICh0aGlzLmxhYmVsKSA/IHRoaXMubGFiZWwgOiAnJyxcbiAgICAgICAgICAgIFwicGxhY2Vob2xkZXJcIjogJ0xhYmVsJyxcbiAgICAgICAgICAgIFwiaWRcIjpcImlucHV0X1wiK3RoaXMubGFiZWwrXCJfXCIrdGhpcy5pZFxuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXRMYWJlbC5vbmJsdXIgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmxhYmVsPSg8SFRNTElucHV0RWxlbWVudD5ldi50YXJnZXQpLnZhbHVlO1xuICAgICAgICB9OyBcblxuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQobGFiVmFsdWUpO1xuICAgICAgICB0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoaW5wdXRWYWx1ZSk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChsYWJMYWJlbCk7XG4gICAgICAgIHRoaXMubm9kZS5hcHBlbmRDaGlsZChpbnB1dExhYmVsKTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG4gICAgfVxuXG4gICAgY29tcGlsZUpzb24oKXtcbiAgICAgICAgdGhpcy5qc29uID0ge1xuICAgICAgICAgICAgXCJsYWJlbFwiOnRoaXMubGFiZWwsXG4gICAgICAgICAgICBcInZhbHVlXCI6dGhpcy52YWx1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmpzb247XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tTbGlkZXIudHNcIik7IiwiaW1wb3J0IHtCbG9ja30gZnJvbSBcIi4vYmxvY2tcIjtcbmltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrU2xpZGVye1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jazpCbG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuICAgICAgICBsZXQgZmllbGQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgICBsZXQgbWluID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6XCJfbGVmdFwiXG4gICAgICAgIH0pO1xuICAgICAgICBtaW4uaW5uZXJIVE1MID0gKGJsb2NrLm1pbikgPyBibG9jay5taW4gOiAnMCc7XG4gICAgICAgIGxldCBtYXggPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjpcIl9yaWdodFwiXG4gICAgICAgIH0pOztcbiAgICAgICAgbWF4LmlubmVySFRNTCA9IChibG9jay5tYXgpID8gYmxvY2subWF4IDogJzEwMCc7XG5cbiAgICAgICAgLy8gPG91dHB1dCBmb3I9XCJmb29cIiBvbmZvcm1pbnB1dD1cInZhbHVlID0gZm9vLnZhbHVlQXNOdW1iZXI7XCI+PC9vdXRwdXQ+XG5cbiAgICAgICAgLy9Bc3NpZ24gZGlmZmVyZW50IGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnQuIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYmxvY2suYW5zd2VyJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS1zbGlkZXJcIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInJhbmdlXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IChibG9jay5hbnN3ZXIpID8gYmxvY2suYW5zd2VyIDogKChibG9jay5tYXgpID8gKE51bWJlcihibG9jay5tYXgpLzIpIDogNTApLFxuICAgICAgICAgICAgXCJtaW5cIjogKGJsb2NrLm1pbikgPyBibG9jay5taW4gOiAwLFxuICAgICAgICAgICAgXCJtYXhcIjogKGJsb2NrLm1heCkgPyBibG9jay5tYXggOiAxMDAsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRyYW5nZV9cIitibG9jay5pZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYoYmxvY2suc3RlcCl7XG4gICAgICAgICAgICBmaWVsZC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIGJsb2NrLnN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIGZpZWxkLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZmllbGQpLnZhbHVlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm91dHB1dF9cIitibG9jay5pZCkuaW5uZXJIVE1MID0gYmxvY2suYW5zd2VyO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlucHV0RGl2ID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpbnB1dERpdi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBpeGl1bS1ibG9jay1zbGlkZXJcIik7XG4gICAgICAgIGxldCBvdXRwdXQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJvdXRwdXRcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcIm91dHB1dF9cIitibG9jay5pZFxuICAgICAgICB9KTtcbiAgICAgICAgb3V0cHV0LmlubmVySFRNTCA9IChibG9jay5hbnN3ZXIpID8gYmxvY2suYW5zd2VyIDogKChibG9jay5tYXgpID8gKE51bWJlcihibG9jay5tYXgpLzIpIDogNTApO1xuICAgICAgICBibG9jay5hbnN3ZXIgPSBvdXRwdXQuaW5uZXJIVE1MO1xuICAgICAgICBcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQob3V0cHV0KTtcbiAgICAgICAgaW5wdXREaXYuYXBwZW5kQ2hpbGQoZmllbGQpO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtaW4pO1xuICAgICAgICBpbnB1dERpdi5hcHBlbmRDaGlsZChtYXgpOyBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGlucHV0RGl2KTtcblxuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tGcmVldGV4dC50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja0ZyZWV0ZXh0e1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIFxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcblxuICAgICAgICBsZXQgZmllbGQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG4gICAgICAgIEJ1aWxkZXIuc2V0QXR0cmlidXRlcyhmaWVsZCwge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcInBpeGl1bS10ZXh0Ym94XCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGJsb2NrLmFuc3dlcixcbiAgICAgICAgICAgIFwiaWRcIjogXCJpbnB1dGZyZWV0ZXh0X1wiK2Jsb2NrLmlkXG4gICAgICAgIH0pOyBcbiAgICAgICAgZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIH07IFxuICAgICAgICBcbiAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKGZpZWxkKTsgXG4gICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoaG9sZGVyKTtcbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxbXCJMaWJyYXJ5XCJdID0gcmVxdWlyZShcIi0hL1VzZXJzL3JlbWl0YWNoZS9Xb3Jrc3BhY2UvZm9ybS1idWlsZGVyL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanMhLi9ibG9ja1JhZGlvLnRzXCIpOyIsImltcG9ydCB7QnVpbGRlcn0gZnJvbSBcIi4uL2J1aWxkZXJcIjtcblxuZXhwb3J0IGNsYXNzIEJsb2NrUmFkaW8ge1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuXG4gICAgICAgIGJsb2NrLmNob2ljZXMuZm9yRWFjaCggKGNob2ljZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGYgID0gQnVpbGRlci5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0cmFkaW9fXCIrYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNob2ljZS5sYWJlbDtcblxuICAgICAgICAgICAgbGV0IF9kaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoX2Rpdik7XG5cbiAgICAgICAgICAgIGYub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MSW5wdXRFbGVtZW50PmV2LnRhcmdldCkudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmxvY2suYW5zd2VyKTtcbiAgICAgICAgICAgIH07IFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL2Jsb2NrQ2hlY2tib3gudHNcIik7IiwiaW1wb3J0IHtCdWlsZGVyfSBmcm9tIFwiLi4vYnVpbGRlclwiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tDaGVja2JveCB7XG5cbiAgICBzdGF0aWMgcnVuKG5vZGUsIGJsb2NrKXtcbiAgICAgICAgbGV0IGhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImVsZW1lbnQtZm9ybS1jb250YWluZXJcIik7XG5cbiAgICAgICAgYmxvY2suY2hvaWNlcy5mb3JFYWNoKCAoY2hvaWNlKSA9PiB7XG5cbiAgICAgICAgICAgIGxldCBmICA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiAgYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiAgY2hvaWNlLnZhbHVlK1wiXCIsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9QcmVzZWxlY3QgYW5zd2VycyBpZiBzZXRcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmxvY2suYW5zd2VyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZigoY2hvaWNlLnZhbHVlK1wiXCIpPT09YmxvY2suYW5zd2VyW2ldKXtcbiAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hlY2tlZFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGNob2ljZS5sYWJlbDtcblxuICAgICAgICAgICAgbGV0IF9kaXYgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBfZGl2LmFwcGVuZENoaWxkKGYpO1xuICAgICAgICAgICAgX2Rpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoX2Rpdik7XG5cbiAgICAgICAgICAgIGYub25jbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjaGVja2VkQm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XVtuYW1lPVwiJytibG9jay5pZCsnXCJdOmNoZWNrZWQnKTtcbiAgICAgICAgICAgICAgICBsZXQgaWRzID0gW107XG4gICAgICAgICAgICAgICAgY2hlY2tlZEJveGVzLmZvckVhY2goIChlbGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKCg8SFRNTElucHV0RWxlbWVudD5lbGVtKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gaWRzO1xuICAgICAgICAgICAgfTsgXG4gICAgICAgIH0pO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGhvbGRlcik7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsW1wiTGlicmFyeVwiXSA9IHJlcXVpcmUoXCItIS9Vc2Vycy9yZW1pdGFjaGUvV29ya3NwYWNlL2Zvcm0tYnVpbGRlci9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzIS4vYmxvY2tMb25ndGV4dC50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBCbG9ja0xvbmd0ZXh0e1xuXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIFxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9sZGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZWxlbWVudC1mb3JtLWNvbnRhaW5lclwiKTtcbiAgICAgICAgbGV0IGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuXG4gICAgICAgIC8vQXNzaWduIGRpZmZlcmVudCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50LiBcbiAgICAgICAgQnVpbGRlci5zZXRBdHRyaWJ1dGVzKGZpZWxkLCB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwicGl4aXVtLXRleHRib3hcIixcbiAgICAgICAgICAgIFwicm93c1wiOiA1LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBibG9jay5hbnN3ZXIsXG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXRsb25ndGV4dF9cIitibG9jay5pZFxuICAgICAgICB9KTsgXG4gICAgICAgIC8vIGZpZWxkLmlubmVySFRNTCA9IGJsb2NrLmFuc3dlcjtcbiAgICAgICAgZmllbGQub25ibHVyID0gKCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suYW5zd2VyID0gKDxIVE1MVGV4dEFyZWFFbGVtZW50PmZpZWxkKS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG4gICAgICAgIH07IFxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoZmllbGQpOyBcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbFtcIkxpYnJhcnlcIl0gPSByZXF1aXJlKFwiLSEvVXNlcnMvcmVtaXRhY2hlL1dvcmtzcGFjZS9mb3JtLWJ1aWxkZXIvbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcyEuL0Jsb2NrVGFncy50c1wiKTsiLCJpbXBvcnQge0J1aWxkZXJ9IGZyb20gXCIuLi9idWlsZGVyXCI7XG5pbXBvcnQgeyBCbG9ja1R5cGUgfSBmcm9tIFwiLi9ibG9ja1wiO1xuXG5leHBvcnQgY2xhc3MgQmxvY2tUYWdzIHtcbiAgICAvLyA8ZGl2IGlkPVwiaG9sZGVyXCI+XG4gICAgLy8gICAgIDxkaXYgaWQ9XCJ0YWdzXCI+XG4gICAgLy8gICAgICAgICAgPHNwYW4+XG4gICAgLy8gICAgICAgICAgICAgIHZhbHVlXG4gICAgLy8gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ0biBidG4tZGFuZ2VyXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiPi08L2J1dHRvbj5cbiAgICAvLyAgICAgICAgICA8L3NwYW4+XG4gICAgLy8gICAgIDwvZGl2PlxuICAgIC8vICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIC8+XG4gICAgLy8gPC9kaXY+XG4gICAgXG4gICAgc3RhdGljIHJ1bihub2RlLCBibG9jayl7XG4gICAgICAgIC8vIHBhcnNlIGJsb2NrLmFuc3dlciBmb3IgYXJyYXkgdG8gc3RyaW5ncyBcbiAgICAgICAgaWYoYmxvY2suYW5zd2VyLmxlbmd0aD09MCl7XG4gICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJlbGVtZW50LWZvcm0tY29udGFpbmVyXCIpO1xuICAgICAgICBob2xkZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OmZsZXhcIik7XG5cbiAgICAgICAgLy8gZGl2IGFuc3dlclxuICAgICAgICBsZXQgdGFncyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGhvbGRlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRhZ3NcIik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGJsb2NrLmFuc3dlcik7XG5cbiAgICAgICAgaWYoYmxvY2suYW5zd2VyKXtcbiAgICAgICAgICAgIGJsb2NrLmFuc3dlci5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSAmJiB2YWx1ZS5sZW5ndGg+MCl7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGFnLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidGFnLVwiK2Jsb2NrLmlkK1wiLVwiK3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGFnLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgVEFHXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWxCdG4gPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1wiY2xhc3NcIjpcImJ0biBidG4tZGFuZ2VyXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVsQnRuLmlubmVyVGV4dCA9ICctJzsgIFxuICAgICAgICAgICAgICAgICAgICBkZWxCdG4ub25jbGljayA9IChldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzLnJlbW92ZUNoaWxkKHRhZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBibG9jay5hbnN3ZXIuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbCtkZWxCdG4ub3V0ZXJIVE1MICE9IHRhZy5pbm5lckhUTUw7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFnLmFwcGVuZENoaWxkKGRlbEJ0bik7IFxuICAgICAgICAgICAgICAgICAgICB0YWdzLmFwcGVuZENoaWxkKHRhZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmllbGQgPSBCdWlsZGVyLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAnY2xhc3MnOiBcImZmZlwiXG4gICAgICAgIH0pO1xuICAgICAgICAvL0Fzc2lnbiBkaWZmZXJlbnQgYXR0cmlidXRlcyB0byB0aGUgZWxlbWVudC4gXG5cbiAgICAgICAgZmllbGQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBCbG9ja1RhZ3MucHJvY2Vzc05ld0tleXdvcmQoZXZlbnQsIGZpZWxkLCBibG9jaywgdGFncyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIEJsb2NrVGFncy5wcm9jZXNzTmV3S2V5d29yZChldmVudCwgZmllbGQsIGJsb2NrLCB0YWdzLCB0cnVlKTtcbiAgICAgICAgfTsgXG5cbiAgICAgICAgLy8gYWRkIG9uYmx1ciBzYXZlXG4gICAgICAgIC8vIGZpZWxkLm9uYmx1ciA9ICgpID0+IHtcbiAgICAgICAgLy8gICAgIGJsb2NrLmFuc3dlci5wdXNoKCg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUpO1xuICAgICAgICAvLyAgICAgKDxIVE1MSW5wdXRFbGVtZW50PmZpZWxkKS52YWx1ZSA9IG51bGw7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhibG9jay5hbnN3ZXIpO1xuICAgICAgICAvLyB9OyBcblxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQodGFncyk7IFxuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQoZmllbGQpOyBcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChob2xkZXIpO1xuICAgIH1cblxuXG4gICAgc3RhdGljIHByb2Nlc3NOZXdLZXl3b3JkKGV2ZW50LCBmaWVsZCwgYmxvY2ssIHRhZ3MsIGZvcmNlUHJvY2Vzczpib29sZWFuID0gZmFsc2Upe1xuICAgICAgICAvLyBcIkVudGVyXCIga2V5IG9uIHRoZSBrZXlib2FyZFxuICAgICAgICBpZiAoZm9yY2VQcm9jZXNzIHx8IGV2ZW50LmtleSA9PT0gJ0VudGVyJyB8fCBldmVudC5rZXkgPT09ICcsJyB8fCBldmVudC5rZXlDb2RlID09IDE4OCkgeyAvLyB8fCBldmVudC5rZXkgPT09ICcgJyB8fCBldmVudC5jb2RlID09PSAnU3BhY2UnIHx8IGV2ZW50LmtleSA9PT0gJ1NwYWNlYmFyJ1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgICAgICAgICAgaWYodmFsdWUgJiYgdmFsdWUubGVuZ3RoPjApe1xuICAgICAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD5maWVsZCkudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIC8vYWRkIHRvIGFuc3dlclxuICAgICAgICAgICAgICAgIGJsb2NrLmFuc3dlci5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAvL2FkZCB0byBkaXNwbGF5XG4gICAgICAgICAgICAgICAgbGV0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgIHRhZy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAvLyBCVUlMRCBERUxFVEUgVEFHXG4gICAgICAgICAgICAgICAgbGV0IGRlbEJ0biA9IEJ1aWxkZXIuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XCJjbGFzc1wiOlwiYnRuXCIsIFwidHlwZVwiOlwiYnV0dG9uXCJ9KTtcbiAgICAgICAgICAgICAgICBkZWxCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JzsgIFxuICAgICAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gKGV2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGFncy5yZW1vdmVDaGlsZCh0YWcpO1xuICAgICAgICAgICAgICAgICAgICBibG9jay5hbnN3ZXIgPSBibG9jay5hbnN3ZXIuZmlsdGVyKGZ1bmN0aW9uKGVsKSB7IHJldHVybiBlbCtkZWxCdG4ub3V0ZXJIVE1MICE9IHRhZy5pbm5lckhUTUw7IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRhZy5hcHBlbmRDaGlsZChkZWxCdG4pOyBcbiAgICAgICAgICAgICAgICB0YWdzLmFwcGVuZENoaWxkKHRhZyk7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=